"use strict";(self.webpackChunkfriendlychat=self.webpackChunkfriendlychat||[]).push([[179],{333:()=>{function $e(t){return"function"==typeof t}function vh(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Bm=vh(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function yc(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class br{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if($e(r))try{r()}catch(s){e=s instanceof Bm?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{u2(s)}catch(o){e=e??[],o instanceof Bm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Bm(e)}}add(e){var n;if(e&&e!==this)if(this.closed)u2(e);else{if(e instanceof br){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&yc(n,e)}remove(e){const{_finalizers:n}=this;n&&yc(n,e),e instanceof br&&e._removeParent(this)}}br.EMPTY=(()=>{const t=new br;return t.closed=!0,t})();const o2=br.EMPTY;function a2(t){return t instanceof br||t&&"closed"in t&&$e(t.remove)&&$e(t.add)&&$e(t.unsubscribe)}function u2(t){$e(t)?t():t.unsubscribe()}const Ba={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},jm={setTimeout(t,e,...n){const{delegate:r}=jm;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=jm;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function c2(t){jm.setTimeout(()=>{const{onUnhandledError:e}=Ba;if(!e)throw t;e(t)})}function fw(){}const Vte=pw("C",void 0,void 0);function pw(t,e,n){return{kind:t,value:e,error:n}}let ja=null;function Gm(t){if(Ba.useDeprecatedSynchronousErrorHandling){const e=!ja;if(e&&(ja={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ja;if(ja=null,n)throw r}}else t()}class gw extends br{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,a2(e)&&e.add(this)):this.destination=zte}static create(e,n,r){return new Ih(e,n,r)}next(e){this.isStopped?_w(function Bte(t){return pw("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?_w(function Ute(t){return pw("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_w(Vte,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gte=Function.prototype.bind;function mw(t,e){return Gte.call(t,e)}class $te{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$m(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$m(r)}else $m(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$m(n)}}}class Ih extends gw{constructor(e,n,r){let i;if(super(),$e(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ba.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mw(e.next,s),error:e.error&&mw(e.error,s),complete:e.complete&&mw(e.complete,s)}):i=e}this.destination=new $te(i)}}function $m(t){Ba.useDeprecatedSynchronousErrorHandling?function jte(t){Ba.useDeprecatedSynchronousErrorHandling&&ja&&(ja.errorThrown=!0,ja.error=t)}(t):c2(t)}function _w(t,e){const{onStoppedNotification:n}=Ba;n&&jm.setTimeout(()=>n(t,e))}const zte={closed:!0,next:fw,error:function qte(t){throw t},complete:fw},yw="function"==typeof Symbol&&Symbol.observable||"@@observable";function Do(t){return t}function vw(...t){return l2(t)}function l2(t){return 0===t.length?Do:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let ut=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function Wte(t){return t&&t instanceof gw||function Hte(t){return t&&$e(t.next)&&$e(t.error)&&$e(t.complete)}(t)&&a2(t)}(n)?n:new Ih(n,r,i);return Gm(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=d2(r))((i,s)=>{const o=new Ih({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[yw](){return this}pipe(...n){return l2(n)(this)}toPromise(n){return new(n=d2(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function d2(t){var e;return null!==(e=t??Ba.Promise)&&void 0!==e?e:Promise}const Kte=vh(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let wi=(()=>{class t extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new h2(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Kte}next(n){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?o2:(this.currentObservers=null,s.push(n),new br(()=>{this.currentObservers=null,yc(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new ut;return n.source=this,n}}return t.create=(e,n)=>new h2(e,n),t})();class h2 extends wi{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:o2}}function f2(t){return $e(t?.lift)}function nn(t){return e=>{if(f2(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ht(t,e,n,r,i){return new Qte(t,e,n,r,i)}class Qte extends gw{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Pe(t,e){return nn((n,r)=>{let i=0;n.subscribe(Ht(r,s=>{r.next(t.call(e,s,i++))}))})}function vc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function So(t){return this instanceof So?(this.v=t,this):new So(t)}function _2(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function ww(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const y2=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function v2(t){return $e(t?.then)}function I2(t){return $e(t[yw])}function E2(t){return Symbol.asyncIterator&&$e(t?.[Symbol.asyncIterator])}function T2(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const w2=function mne(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function A2(t){return $e(t?.[w2])}function C2(t){return function m2(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof So?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield So(n.read());if(i)return yield So(void 0);yield yield So(r)}}finally{n.releaseLock()}})}function b2(t){return $e(t?.getReader)}function qr(t){if(t instanceof ut)return t;if(null!=t){if(I2(t))return function _ne(t){return new ut(e=>{const n=t[yw]();if($e(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(y2(t))return function yne(t){return new ut(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(v2(t))return function vne(t){return new ut(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,c2)})}(t);if(E2(t))return D2(t);if(A2(t))return function Ine(t){return new ut(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(b2(t))return function Ene(t){return D2(C2(t))}(t)}throw T2(t)}function D2(t){return new ut(e=>{(function Tne(t,e){var n,r,i,s;return function p2(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=_2(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Rs(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Dn(t,e,n=1/0){return $e(e)?Dn((r,i)=>Pe((s,o)=>e(r,s,i,o))(qr(t(r,i))),n):("number"==typeof e&&(n=e),nn((r,i)=>function wne(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let _=!1;qr(n(g,l++)).subscribe(Ht(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const v=u.shift();o?Rs(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Ht(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function Ic(t=1/0){return Dn(Do,t)}const qi=new ut(t=>t.complete());function Aw(t){return t[t.length-1]}function S2(t){return $e(Aw(t))?t.pop():void 0}function Eh(t){return function Cne(t){return t&&$e(t.schedule)}(Aw(t))?t.pop():void 0}function qm(t,e=0){return nn((n,r)=>{n.subscribe(Ht(r,i=>Rs(r,t,()=>r.next(i),e),()=>Rs(r,t,()=>r.complete(),e),i=>Rs(r,t,()=>r.error(i),e)))})}function zm(t,e=0){return nn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function x2(t,e){if(!t)throw new Error("Iterable cannot be null");return new ut(n=>{Rs(n,e,()=>{const r=t[Symbol.asyncIterator]();Rs(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hn(t,e){return e?function kne(t,e){if(null!=t){if(I2(t))return function Dne(t,e){return qr(t).pipe(zm(e),qm(e))}(t,e);if(y2(t))return function xne(t,e){return new ut(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(v2(t))return function Sne(t,e){return qr(t).pipe(zm(e),qm(e))}(t,e);if(E2(t))return x2(t,e);if(A2(t))return function Rne(t,e){return new ut(n=>{let r;return Rs(n,e,()=>{r=t[w2](),Rs(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>$e(r?.return)&&r.return()})}(t,e);if(b2(t))return function Pne(t,e){return x2(C2(t),e)}(t,e)}throw T2(t)}(t,e):qr(t)}class ai extends wi{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function se(...t){return hn(t,Eh(t))}function R2(t={}){const{connector:e=(()=>new wi),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return nn((g,_)=>{c++,!d&&!l&&h();const v=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=Cw(p,i))}),v.subscribe(_),!o&&c>0&&(o=new Ih({next:y=>v.next(y),error:y=>{d=!0,h(),a=Cw(f,n,y),v.error(y)},complete:()=>{l=!0,h(),a=Cw(f,r),v.complete()}}),qr(g).subscribe(o))})(s)}}function Cw(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ih({next:()=>{r.unsubscribe(),t()}});return qr(e(...n)).subscribe(r)}function zi(t,e){return nn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ht(r,u=>{i?.unsubscribe();let c=0;const l=s++;qr(t(u,l)).subscribe(i=Ht(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function One(t,e){return t===e}function Fe(t){for(let e in t)if(t[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function Hm(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function rn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(rn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bw(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Fne=Fe({__forward_ref__:Fe});function Ke(t){return t.__forward_ref__=Ke,t.toString=function(){return rn(this())},t}function re(t){return Dw(t)?t():t}function Dw(t){return"function"==typeof t&&t.hasOwnProperty(Fne)&&t.__forward_ref__===Ke}function Sw(t){return t&&!!t.\u0275providers}const P2="https://g.co/ng/security#xss";class R extends Error{constructor(e,n){super(function Wm(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ue(t){return"string"==typeof t?t:null==t?"":String(t)}function xw(t,e){throw new R(-201,!1)}function ui(t,e){null==t&&function te(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ci(t){return{providers:t.providers||[],imports:t.imports||[]}}function Km(t){return k2(t,Ym)||k2(t,N2)}function k2(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qm(t){return t&&(t.hasOwnProperty(Rw)||t.hasOwnProperty(qne))?t[Rw]:null}const Ym=Fe({\u0275prov:Fe}),Rw=Fe({\u0275inj:Fe}),N2=Fe({ngInjectableDef:Fe}),qne=Fe({ngInjectorDef:Fe});var ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ye||{});let Pw;function Dr(t){const e=Pw;return Pw=t,e}function O2(t,e,n){const r=Km(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ye.Optional?null:void 0!==e?e:void xw(rn(t))}const Qe=globalThis,Th={},Fw="__NG_DI_FLAG__",Xm="ngTempTokenPath",Wne=/\n/gm,L2="__source";let Ec;function xo(t){const e=Ec;return Ec=t,e}function Yne(t,e=ye.Default){if(void 0===Ec)throw new R(-203,!1);return null===Ec?O2(t,void 0,e):Ec.get(t,e&ye.Optional?null:void 0,e)}function Z(t,e=ye.Default){return(function M2(){return Pw}()||Yne)(re(t),e)}function $(t,e=ye.Default){return Z(t,Jm(e))}function Jm(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Lw(t){const e=[];for(let n=0;n<t.length;n++){const r=re(t[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let i,s=ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Xne(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Z(i,s))}else e.push(Z(r))}return e}function wh(t,e){return t[Fw]=e,t.prototype[Fw]=e,t}function Xne(t){return t[Fw]}function Ps(t){return{toString:t}.toString()}var Zm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zm||{}),Ai=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ai||{});const Hi={},ke=[],e_=Fe({\u0275cmp:Fe}),Vw=Fe({\u0275dir:Fe}),Uw=Fe({\u0275pipe:Fe}),U2=Fe({\u0275mod:Fe}),ks=Fe({\u0275fac:Fe}),Ah=Fe({__NG_ELEMENT_ID__:Fe}),B2=Fe({__NG_ENV_ID__:Fe});function j2(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bw(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];$2(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function G2(t){return 3===t||4===t||6===t}function $2(t){return 64===t.charCodeAt(0)}function Ch(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||q2(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function q2(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const z2="ng-template";function ere(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==j2(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function H2(t){return 4===t.type&&t.value!==z2}function tre(t,e,n){return e===(4!==t.type||n?t.value:z2)}function nre(t,e,n){let r=4;const i=t.attrs||[],s=function sre(t){for(let e=0;e<t.length;e++)if(G2(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!tre(t,u,n)||""===u&&1===e.length){if(Ci(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ere(t.attrs,c,n)){if(Ci(r))return!1;o=!0}continue}const d=rre(8&r?"class":u,i,H2(t),n);if(-1===d){if(Ci(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==j2(f,c,0)||2&r&&c!==h){if(Ci(r))return!1;o=!0}}}}else{if(!o&&!Ci(r)&&!Ci(u))return!1;if(o&&Ci(u))continue;o=!1,r=u|1&r}}return Ci(r)||o}function Ci(t){return 0==(1&t)}function rre(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function ore(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function W2(t,e,n=!1){for(let r=0;r<e.length;r++)if(nre(t,e[r],n))return!0;return!1}function K2(t,e){return t?":not("+e.trim()+")":e}function ure(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ci(o)&&(e+=K2(s,i),i=""),r=o,s=s||!Ci(r);n++}return""!==i&&(e+=K2(s,i)),e}function Tc(t){return Ps(()=>{const e=Y2(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ai.Emulated,styles:t.styles||ke,_:null,schemas:t.schemas||null,tView:null,id:""};X2(n);const r=t.dependencies;return n.directiveDefs=t_(r,!1),n.pipeDefs=t_(r,!0),n.id=function mre(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function hre(t){return Ce(t)||Sn(t)}function fre(t){return null!==t}function bi(t){return Ps(()=>({type:t.type,bootstrap:t.bootstrap||ke,declarations:t.declarations||ke,imports:t.imports||ke,exports:t.exports||ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Q2(t,e){if(null==t)return Hi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function ie(t){return Ps(()=>{const e=Y2(t);return X2(e),e})}function Sr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ce(t){return t[e_]||null}function Sn(t){return t[Vw]||null}function ar(t){return t[Uw]||null}function Hr(t,e){const n=t[U2]||null;if(!n&&!0===e)throw new Error(`Type ${rn(t)} does not have '\u0275mod' property.`);return n}function Y2(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Hi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ke,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Q2(t.inputs,e),outputs:Q2(t.outputs)}}function X2(t){t.features?.forEach(e=>e(t))}function t_(t,e){if(!t)return null;const n=e?ar:hre;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(fre)}const At=0,q=1,fe=2,ct=3,Di=4,bh=5,Hn=6,Ac=7,Mt=8,Ro=9,Cc=10,ce=11,Dh=12,J2=13,bc=14,Ot=15,Sh=16,Dc=17,Wi=18,xh=19,Z2=20,Po=21,Ns=22,Rh=23,Ph=24,ve=25,jw=1,eU=2,Ki=7,Sc=9,xn=11;function xr(t){return Array.isArray(t)&&"object"==typeof t[jw]}function ur(t){return Array.isArray(t)&&!0===t[jw]}function Gw(t){return 0!=(4&t.flags)}function $a(t){return t.componentOffset>-1}function r_(t){return 1==(1&t.flags)}function Si(t){return!!t.template}function $w(t){return 0!=(512&t[fe])}function qa(t,e){return t.hasOwnProperty(ks)?t[ks]:null}let Rn=null,i_=!1;function li(t){const e=Rn;return Rn=t,e}const rU={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function sU(t){if(!Nh(t)||t.dirty){if(!t.producerMustRecompute(t)&&!uU(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function aU(t){t.dirty=!0,function oU(t){if(void 0===t.liveConsumerNode)return;const e=i_;i_=!0;try{for(const n of t.liveConsumerNode)n.dirty||aU(n)}finally{i_=e}}(t),t.consumerMarkedDirty?.(t)}function zw(t){return t&&(t.nextProducerIndex=0),li(t)}function Hw(t,e){if(li(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Nh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)s_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function uU(t){xc(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(sU(n),r!==n.version))return!0}return!1}function cU(t){if(xc(t),Nh(t))for(let e=0;e<t.producerNode.length;e++)s_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function s_(t,e){if(function dU(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),xc(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)s_(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];xc(i),i.producerIndexOfThis[r]=e}}function Nh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function xc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let hU=null;function gU(t){const e=li(null);try{return t()}finally{li(e)}}const mU=()=>{},xre=(()=>({...rU,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:mU}))();class Rre{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function di(){return _U}function _U(t){return t.type.prototype.ngOnChanges&&(t.setInput=kre),Pre}function Pre(){const t=vU(this),e=t?.current;if(e){const n=t.previous;if(n===Hi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kre(t,e,n,r){const i=this.declaredInputs[n],s=vU(t)||function Nre(t,e){return t[yU]=e}(t,{previous:Hi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Rre(u&&u.currentValue,e,a===Hi),t[r]=e}di.ngInherit=!0;const yU="__ngSimpleChanges__";function vU(t){return t[yU]||null}const Qi=function(t,e,n){};function Ye(t){for(;Array.isArray(t);)t=t[At];return t}function o_(t,e){return Ye(e[t])}function Rr(t,e){return Ye(e[t.index])}function TU(t,e){return t.data[e]}function Rc(t,e){return t[e]}function Wr(t,e){const n=e[t];return xr(n)?n:n[At]}function No(t,e){return null==e?null:t[e]}function wU(t){t[Dc]=0}function Ure(t){1024&t[fe]||(t[fe]|=1024,CU(t,1))}function AU(t){1024&t[fe]&&(t[fe]&=-1025,CU(t,-1))}function CU(t,e){let n=t[ct];if(null===n)return;n[bh]+=e;let r=n;for(n=n[ct];null!==n&&(1===e&&1===r[bh]||-1===e&&0===r[bh]);)n[bh]+=e,r=n,n=n[ct]}const ne={lFrame:FU(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function SU(){return ne.bindingsEnabled}function b(){return ne.lFrame.lView}function be(){return ne.lFrame.tView}function Xw(t){return ne.lFrame.contextLView=t,t[Mt]}function Jw(t){return ne.lFrame.contextLView=null,t}function Pn(){let t=xU();for(;null!==t&&64===t.type;)t=t.parent;return t}function xU(){return ne.lFrame.currentTNode}function Yi(t,e){const n=ne.lFrame;n.currentTNode=t,n.isParent=e}function Zw(){return ne.lFrame.isParent}function kc(){return ne.lFrame.bindingIndex++}function Xre(t,e){const n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,tA(e)}function tA(t){ne.lFrame.currentDirectiveIndex=t}function rA(t){ne.lFrame.currentQueryIndex=t}function Zre(t){const e=t[q];return 2===e.type?e.declTNode:1===e.type?t[Hn]:null}function MU(t,e,n){if(n&ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&ye.Host||(i=Zre(s),null===i||(s=s[bc],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ne.lFrame=OU();return r.currentTNode=e,r.lView=t,!0}function iA(t){const e=OU(),n=t[q];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function OU(){const t=ne.lFrame,e=null===t?null:t.child;return null===e?FU(t):e}function FU(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function LU(){const t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const VU=LU;function sA(){const t=LU();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lr(){return ne.lFrame.selectedIndex}function za(t){ne.lFrame.selectedIndex=t}let BU=!0;function a_(){return BU}function Mo(t){BU=t}function u_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function c_(t,e,n){jU(t,e,3,n)}function l_(t,e,n,r){(3&t[fe])===n&&jU(t,e,n,r)}function oA(t,e){let n=t[fe];(3&n)===e&&(n&=8191,n+=1,t[fe]=n)}function jU(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Dc]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Dc]+=65536),(a<s||-1==s)&&(aie(t,n,e,u),t[Dc]=(4294901760&t[Dc])+u+2),u++}function GU(t,e){Qi(4,t,e);const n=li(null);try{e.call(t)}finally{li(n),Qi(5,t,e)}}function aie(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[fe]>>13<t[Dc]>>16&&(3&t[fe])===e&&(t[fe]+=8192,GU(a,s)):GU(a,s)}const Nc=-1;class Oh{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function uA(t){return t!==Nc}function Fh(t){return 32767&t}function Lh(t,e){let n=function die(t){return t>>16}(t),r=e;for(;n>0;)r=r[bc],n--;return r}let cA=!0;function d_(t){const e=cA;return cA=t,e}const $U=255,qU=5;let hie=0;const Xi={};function h_(t,e){const n=zU(t,e);if(-1!==n)return n;const r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,lA(r.data,t),lA(e,null),lA(r.blueprint,null));const i=f_(t,e),s=t.injectorIndex;if(uA(i)){const o=Fh(i),a=Lh(i,e),u=a[q].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function lA(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zU(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function f_(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=JU(i),null===r)return Nc;if(n++,i=i[bc],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Nc}function dA(t,e,n){!function fie(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ah)&&(r=n[Ah]),null==r&&(r=n[Ah]=hie++);const i=r&$U;e.data[t+(i>>qU)]|=1<<i}(t,e,n)}function HU(t,e,n){if(n&ye.Optional||void 0!==t)return t;xw()}function WU(t,e,n,r){if(n&ye.Optional&&void 0===r&&(r=null),!(n&(ye.Self|ye.Host))){const i=t[Ro],s=Dr(void 0);try{return i?i.get(e,r,n&ye.Optional):O2(e,r,n&ye.Optional)}finally{Dr(s)}}return HU(r,0,n)}function KU(t,e,n,r=ye.Default,i){if(null!==t){if(2048&e[fe]&&!(r&ye.Self)){const o=function vie(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[fe]&&!(512&o[fe]);){const a=QU(s,o,n,r|ye.Self,Xi);if(a!==Xi)return a;let u=s.parent;if(!u){const c=o[Z2];if(c){const l=c.get(n,Xi,r);if(l!==Xi)return l}u=JU(o),o=o[bc]}s=u}return i}(t,e,n,r,Xi);if(o!==Xi)return o}const s=QU(t,e,n,r,Xi);if(s!==Xi)return s}return WU(e,n,r,i)}function QU(t,e,n,r,i){const s=function mie(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ah)?t[Ah]:void 0;return"number"==typeof e?e>=0?e&$U:yie:e}(n);if("function"==typeof s){if(!MU(e,t,r))return r&ye.Host?HU(i,0,r):WU(e,n,r,i);try{let o;if(o=s(r),null!=o||r&ye.Optional)return o;xw()}finally{VU()}}else if("number"==typeof s){let o=null,a=zU(t,e),u=Nc,c=r&ye.Host?e[Ot][Hn]:null;for((-1===a||r&ye.SkipSelf)&&(u=-1===a?f_(t,e):e[a+8],u!==Nc&&XU(r,!1)?(o=e[q],a=Fh(u),e=Lh(u,e)):a=-1);-1!==a;){const l=e[q];if(YU(s,a,l.data)){const d=gie(a,e,n,o,r,c);if(d!==Xi)return d}u=e[a+8],u!==Nc&&XU(r,e[q].data[a+8]===c)&&YU(s,a,e)?(o=l,a=Fh(u),e=Lh(u,e)):a=-1}}return i}function gie(t,e,n,r,i,s){const o=e[q],a=o.data[t+8],l=function p_(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&Si(f)&&f.type===n)return u}return null}(a,o,n,null==r?$a(a)&&cA:r!=o&&0!=(3&a.type),i&ye.Host&&s===a);return null!==l?Ha(e,o,l,a):Xi}function Ha(t,e,n,r){let i=t[n];const s=e.data;if(function uie(t){return t instanceof Oh}(i)){const o=i;o.resolving&&function Lne(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Oe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(s[n]));const a=d_(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Dr(o.injectImpl):null;MU(t,r,ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function oie(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=_U(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&Dr(c),d_(a),o.resolving=!1,VU()}}return i}function YU(t,e,n){return!!(n[e+(t>>qU)]&1<<t)}function XU(t,e){return!(t&ye.Self||t&ye.Host&&e)}class dr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return KU(this._tNode,this._lView,e,Jm(r),n)}}function yie(){return new dr(Pn(),b())}function kn(t){return Ps(()=>{const e=t.prototype.constructor,n=e[ks]||hA(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[ks]||hA(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hA(t){return Dw(t)?()=>{const e=hA(re(t));return e&&e()}:qa(t)}function JU(t){const e=t[q],n=e.type;return 2===n?e.declTNode:1===n?t[Hn]:null}const Oc="__parameters__";function Lc(t,e,n){return Ps(()=>{const r=function fA(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Oc)?u[Oc]:Object.defineProperty(u,Oc,{value:[]})[Oc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Uc(t,e){t.forEach(n=>Array.isArray(n)?Uc(n,e):e(n))}function e3(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function m_(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Kr(t,e,n){let r=Bc(t,e);return r>=0?t[1|r]=n:(r=~r,function bie(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function pA(t,e){const n=Bc(t,e);if(n>=0)return t[1|n]}function Bc(t,e){return function t3(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const fn=wh(Lc("Optional"),8),y_=wh(Lc("SkipSelf"),4);function w_(t){return 128==(128&t.flags)}var Oo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Oo||{});const vA=new Map;let Yie=0;const EA="__ngContext__";function Wn(t,e){xr(e)?(t[EA]=e[xh],function Jie(t){vA.set(t[xh],t)}(e)):t[EA]=e}let TA;function wA(t,e){return TA(t,e)}function $h(t){const e=t[ct];return ur(e)?e[ct]:e}function E3(t){return w3(t[Dh])}function T3(t){return w3(t[Di])}function w3(t){for(;null!==t&&!ur(t);)t=t[Di];return t}function $c(t,e,n,r,i){if(null!=r){let s,o=!1;ur(r)?s=r:xr(r)&&(o=!0,r=r[At]);const a=Ye(r);0===t&&null!==n?null==i?D3(e,n,a):Wa(e,n,a,i||null,!0):1===t&&null!==n?Wa(e,n,a,i||null,!0):2===t?function R_(t,e,n){const r=S_(t,e);r&&function _se(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Ise(t,e,n,r,i){const s=n[Ki];s!==Ye(n)&&$c(e,t,r,s,i);for(let a=xn;a<n.length;a++){const u=n[a];zh(u[q],u,t,e,r,s)}}(e,t,s,n,i)}}function b_(t,e,n){return t.createElement(e,n)}function C3(t,e){const n=t[Sc],r=n.indexOf(e);AU(e),n.splice(r,1)}function D_(t,e){if(t.length<=xn)return;const n=xn+e,r=t[n];if(r){const i=r[Sh];null!==i&&i!==t&&C3(i,r),e>0&&(t[n-1][Di]=r[Di]);const s=m_(t,xn+e);!function cse(t,e){zh(t,e,e[ce],2,null,null),e[At]=null,e[Hn]=null}(r[q],r);const o=s[Wi];null!==o&&o.detachView(s[q]),r[ct]=null,r[Di]=null,r[fe]&=-129}return r}function CA(t,e){if(!(256&e[fe])){const n=e[ce];e[Rh]&&cU(e[Rh]),e[Ph]&&cU(e[Ph]),n.destroyNode&&zh(t,e,n,3,null,null),function hse(t){let e=t[Dh];if(!e)return bA(t[q],t);for(;e;){let n=null;if(xr(e))n=e[Dh];else{const r=e[xn];r&&(n=r)}if(!n){for(;e&&!e[Di]&&e!==t;)xr(e)&&bA(e[q],e),e=e[ct];null===e&&(e=t),xr(e)&&bA(e[q],e),n=e&&e[Di]}e=n}}(e)}}function bA(t,e){if(!(256&e[fe])){e[fe]&=-129,e[fe]|=256,function mse(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Oh)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Qi(4,a,u);try{u.call(a)}finally{Qi(5,a,u)}}else{Qi(4,i,s);try{s.call(i)}finally{Qi(5,i,s)}}}}}(t,e),function gse(t,e){const n=t.cleanup,r=e[Ac];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Ac]=null);const i=e[Po];if(null!==i){e[Po]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[q].type&&e[ce].destroy();const n=e[Sh];if(null!==n&&ur(e[ct])){n!==e[ct]&&C3(n,e);const r=e[Wi];null!==r&&r.detachView(t)}!function Zie(t){vA.delete(t[xh])}(e)}}function DA(t,e,n){return function b3(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[At];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ai.None||s===Ai.Emulated)return null}return Rr(r,n)}}(t,e.parent,n)}function Wa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function D3(t,e,n){t.appendChild(e,n)}function S3(t,e,n,r,i){null!==r?Wa(t,e,n,r,i):D3(t,e,n)}function S_(t,e){return t.parentNode(e)}let SA,kA,P3=function R3(t,e,n){return 40&t.type?Rr(t,n):null};function x_(t,e,n,r){const i=DA(t,r,e),s=e[ce],a=function x3(t,e,n){return P3(t,e,n)}(r.parent||e[Hn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)S3(s,i,n[u],a,!1);else S3(s,i,n,a,!1);void 0!==SA&&SA(s,r,e,n,i)}function qh(t,e){if(null!==e){const n=e.type;if(3&n)return Rr(e,t);if(4&n)return xA(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return qh(t,r);{const i=t[e.index];return ur(i)?xA(-1,i):Ye(i)}}if(32&n)return wA(e,t)()||Ye(t[e.index]);{const r=N3(t,e);return null!==r?Array.isArray(r)?r[0]:qh($h(t[Ot]),r):qh(t,e.next)}}return null}function N3(t,e){return null!==e?t[Ot][Hn].projection[e.projection]:null}function xA(t,e){const n=xn+t+1;if(n<e.length){const r=e[n],i=r[q].firstChild;if(null!==i)return qh(r,i)}return e[Ki]}function RA(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Wn(Ye(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)RA(t,e,n.child,r,i,s,!1),$c(e,t,i,a,s);else if(32&u){const c=wA(n,r);let l;for(;l=c();)$c(e,t,i,l,s);$c(e,t,i,a,s)}else 16&u?O3(t,e,r,n,i,s):$c(e,t,i,a,s);n=o?n.projectionNext:n.next}}function zh(t,e,n,r,i,s){RA(n,r,t.firstChild,e,i,s,!1)}function O3(t,e,n,r,i,s){const o=n[Ot],u=o[Hn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)$c(e,t,i,u[c],s);else{let c=u;const l=o[ct];w_(r)&&(c.flags|=128),RA(t,e,c,l,i,s,!0)}}function F3(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function L3(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Bw(t,e,r),null!==i&&F3(t,e,i),null!==s&&function Tse(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class j3{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${P2})`}}function Fo(t){return t instanceof j3?t.changingThisBreaksApplicationSecurity:t}const Fse=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Hc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Hc||{});function Wc(t){const e=function Kh(){const t=b();return t&&t[Cc].sanitizer}();return e?e.sanitize(Hc.URL,t)||"":function Hh(t,e){const n=function kse(t){return t instanceof j3&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${P2})`)}return n===e}(t,"URL")?Fo(t):function MA(t){return(t=String(t)).match(Fse)?t:"unsafe:"+t}(ue(t))}class W{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Qh=new W("ENVIRONMENT_INITIALIZER"),Y3=new W("INJECTOR",-1),X3=new W("INJECTOR_DEF_TYPES");class VA{get(e,n=Th){if(n===Th){const r=new Error(`NullInjectorError: No provider for ${rn(e)}!`);throw r.name="NullInjectorError",r}return n}}function Qse(...t){return{\u0275providers:Z3(0,t),\u0275fromNgModule:!0}}function Z3(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Uc(e,o=>{const a=o;M_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&eB(i,s),n}function eB(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];UA(i,s=>{e(s,r)})}}function M_(t,e,n,r){if(!(t=re(t)))return!1;let i=null,s=Qm(t);const o=!s&&Ce(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Qm(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)M_(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Uc(s.imports,l=>{M_(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&eB(c,e)}if(!a){const c=qa(i)||(()=>new i);e({provide:i,useFactory:c,deps:ke},i),e({provide:X3,useValue:i,multi:!0},i),e({provide:Qh,useValue:()=>Z(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const c=t;UA(u,l=>{e(l,c)})}}}return i!==t&&void 0!==t.providers}function UA(t,e){for(let n of t)Sw(n)&&(n=n.\u0275providers),Array.isArray(n)?UA(n,e):e(n)}const Yse=Fe({provide:String,useValue:Fe});function BA(t){return null!==t&&"object"==typeof t&&Yse in t}function Ka(t){return"function"==typeof t}const jA=new W("Set Injector scope."),O_={},Jse={};let GA;function F_(){return void 0===GA&&(GA=new VA),GA}class fi{}class L_ extends fi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qA(e,o=>this.processProvider(o)),this.records.set(Y3,Kc(void 0,this)),i.has("environment")&&this.records.set(fi,Kc(void 0,this));const s=this.records.get(jA);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(X3.multi,ke,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=xo(this),r=Dr(void 0);try{return e()}finally{xo(n),Dr(r)}}get(e,n=Th,r=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(B2))return e[B2](this);r=Jm(r);const s=xo(this),o=Dr(void 0);try{if(!(r&ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function roe(t){return"function"==typeof t||"object"==typeof t&&t instanceof W}(e)&&Km(e);u=c&&this.injectableDefInScope(c)?Kc($A(e),O_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ye.Self?F_():this.parent).get(e,n=r&ye.Optional&&n===Th?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Xm]=a[Xm]||[]).unshift(rn(e)),s)throw a;return function Jne(t,e,n,r){const i=t[Xm];throw e[L2]&&i.unshift(e[L2]),t.message=function Zne(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):rn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Wne,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Xm]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Dr(o),xo(s)}}resolveInjectorInitializers(){const e=xo(this),n=Dr(void 0);try{const i=this.get(Qh.multi,ke,ye.Self);for(const s of i)s()}finally{xo(e),Dr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){let n=Ka(e=re(e))?e:re(e&&e.provide);const r=function eoe(t){return BA(t)?Kc(void 0,t.useValue):Kc(rB(t),O_)}(e);if(Ka(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Kc(void 0,O_,!0),i.factory=()=>Lw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===O_&&(n.value=Jse,n.value=n.factory()),"object"==typeof n.value&&n.value&&function noe(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=re(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function $A(t){const e=Km(t),n=null!==e?e.factory:qa(t);if(null!==n)return n;if(t instanceof W)throw new R(204,!1);if(t instanceof Function)return function Zse(t){const e=t.length;if(e>0)throw function Bh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new R(204,!1);const n=function $ne(t){return t&&(t[Ym]||t[N2])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new R(204,!1)}function rB(t,e,n){let r;if(Ka(t)){const i=re(t);return qa(i)||$A(i)}if(BA(t))r=()=>re(t.useValue);else if(function nB(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Lw(t.deps||[]));else if(function tB(t){return!(!t||!t.useExisting)}(t))r=()=>Z(re(t.useExisting));else{const i=re(t&&(t.useClass||t.provide));if(!function toe(t){return!!t.deps}(t))return qa(i)||$A(i);r=()=>new i(...Lw(t.deps))}return r}function Kc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qA(t,e){for(const n of t)Array.isArray(n)?qA(n,e):n&&Sw(n)?qA(n.\u0275providers,e):e(n)}const V_=new W("AppId",{providedIn:"root",factory:()=>ioe}),ioe="ng",iB=new W("Platform Initializer"),Qa=new W("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sB=new W("CSP nonce",{providedIn:"root",factory:()=>function zc(){if(void 0!==kA)return kA;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let oB=(t,e,n)=>null;function JA(t,e,n=!1){return oB(t,e,n)}class poe{}class cB{}class moe{resolveComponentFactory(e){throw function goe(t){const e=Error(`No component factory found for ${rn(t)}.`);return e.ngComponent=t,e}(e)}}let q_=(()=>{class t{static#e=this.NULL=new moe}return t})();function _oe(){return Xc(Pn(),b())}function Xc(t,e){return new Qr(Rr(t,e))}let Qr=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=_oe}return t})();class dB{}let Ls=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function voe(){const t=b(),n=Wr(Pn().index,t);return(xr(n)?n:t)[ce]}()}return t})(),Ioe=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>null})}return t})();class Jc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Eoe=new Jc("16.2.10"),t0={};function gB(t,e=null,n=null,r){const i=mB(t,e,n,r);return i.resolveInjectorInitializers(),i}function mB(t,e=null,n=null,r,i=new Set){const s=[n||ke,Qse(t)];return r=r||("object"==typeof t?void 0:rn(t)),new L_(s,e||F_(),r||null,i)}let kr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Th;static#t=this.NULL=new VA;static create(n,r){if(Array.isArray(n))return gB({name:""},r,n,"");{const i=n.name??"";return gB({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=J({token:t,providedIn:"any",factory:()=>Z(Y3)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function r0(t){return t.ngOriginalError}class Vs{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&r0(e);for(;n&&r0(n);)n=r0(n);return n||null}}function o0(t){return e=>{setTimeout(t,void 0,e)}}const Ct=class Soe extends wi{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=o0(s),i&&(i=o0(i)),o&&(o=o0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof br&&e.add(a),a}};function yB(...t){}class qe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ct(!1),this.onMicrotaskEmpty=new Ct(!1),this.onStable=new Ct(!1),this.onError=new Ct(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xoe(){const t="function"==typeof Qe.requestAnimationFrame;let e=Qe[t?"requestAnimationFrame":"setTimeout"],n=Qe[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function koe(t){const e=()=>{!function Poe(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Qe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,u0(t),t.isCheckStableRunning=!0,a0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),u0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function Moe(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return vB(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),IB(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return vB(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),IB(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,u0(t),a0(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qe.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(qe.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Roe,yB,yB);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Roe={};function a0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function u0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vB(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function IB(t){t._nesting--,a0(t)}class Noe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ct,this.onMicrotaskEmpty=new Ct,this.onStable=new Ct,this.onError=new Ct}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const EB=new W("",{providedIn:"root",factory:TB});function TB(){const t=$(qe);let e=!0;return function Nne(...t){const e=Eh(t),n=function bne(t,e){return"number"==typeof Aw(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?qr(r[0]):Ic(n)(hn(r,e)):qi}(new ut(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ut(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{qe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(R2()))}function Us(t){return t instanceof Function?t():t}let c0=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})();function Jh(t){for(;t;){t[fe]|=64;const e=$h(t);if($w(t)&&!e)return t;t=e}return null}const DB=new W("",{providedIn:"root",factory:()=>!1});let H_=null;function PB(t,e){return t[e]??MB()}function kB(t,e){const n=MB();n.producerNode?.length&&(t[e]=H_,n.lView=t,H_=NB())}const qoe={...rU,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Jh(t.lView)},lView:null};function NB(){return Object.create(qoe)}function MB(){return H_??=NB(),H_}const he={};function hr(t){OB(be(),b(),lr()+t,!1)}function OB(t,e,n,r){if(!r)if(3==(3&e[fe])){const s=t.preOrderCheckHooks;null!==s&&c_(e,s,n)}else{const s=t.preOrderHooks;null!==s&&l_(e,s,0,n)}za(n)}function N(t,e=ye.Default){const n=b();return null===n?Z(t,e):KU(Pn(),n,re(t),e)}function W_(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[At]=i,d[fe]=140|r,(null!==c||t&&2048&t[fe])&&(d[fe]|=2048),wU(d),d[ct]=d[bc]=t,d[Mt]=n,d[Cc]=o||t&&t[Cc],d[ce]=a||t&&t[ce],d[Ro]=u||t&&t[Ro]||null,d[Hn]=s,d[xh]=function Xie(){return Yie++}(),d[Ns]=l,d[Z2]=c,d[Ot]=2==e.type?t[Ot]:d,d}function tl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function l0(t,e,n,r,i){const s=xU(),o=Zw(),u=t.data[e]=function Joe(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Pc(){return null!==ne.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Yre(){return ne.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Mh(){const t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Yi(s,!0),s}function Zh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function LB(t,e,n,r,i){const s=PB(e,Rh),o=lr(),a=2&r;try{za(-1),a&&e.length>ve&&OB(t,e,ve,!1),Qi(a?2:0,i);const c=a?s:null,l=zw(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{Hw(c,l)}}finally{a&&null===e[Rh]&&kB(e,Rh),za(o),Qi(a?3:1,i)}}function d0(t,e,n){if(Gw(e)){const r=li(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{li(r)}}}function h0(t,e,n){SU()&&(function sae(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;$a(n)&&function hae(t,e,n){const r=Rr(e,t),i=VB(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=K_(t,W_(t,i,null,o,r,e,null,t[Cc].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||h_(n,e),Wn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=Ha(e,t,a,n);Wn(c,e),null!==o&&fae(0,a-i,c,u,0,o),Si(u)&&(Wr(n.index,e)[Mt]=Ha(e,t,a,n))}}(t,e,n,Rr(n,e)),64==(64&n.flags)&&$B(t,e,n))}function f0(t,e,n=Rr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function VB(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=p0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function p0(t,e,n,r,i,s,o,a,u,c,l){const d=ve+r,h=d+i,f=function Hoe(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:he);return n}(d,h),p="function"==typeof c?c():c;return f[q]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let UB=t=>null;function BB(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?jB(n,e,i,s):r.hasOwnProperty(i)&&jB(n,e,r[i],s)}return n}function jB(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function g0(t,e,n,r){if(SU()){const i=null===r?null:{"":-1},s=function aae(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(W2(e,o.selectors,!1))if(r||(r=[]),Si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),m0(t,e,a.length)}else r.unshift(o),m0(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&GB(t,e,n,o,i,a),i&&function uae(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new R(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Ch(n.mergedAttrs,n.attrs)}function GB(t,e,n,r,i,s){for(let c=0;c<r.length;c++)dA(h_(n,e),t,r[c].type);!function lae(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=Zh(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Ch(n.mergedAttrs,l.hostAttrs),dae(t,n,e,u,l),cae(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Zoe(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=BB(d.inputs,l,u,h?h.inputs:null),c=BB(d.outputs,l,c,p);const g=null===u||null===o||H2(e)?null:pae(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function $B(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Jre(){return ne.lFrame.currentDirectiveIndex}();try{za(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];tA(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&oae(u,c)}}finally{za(-1),tA(o)}}function oae(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function m0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cae(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Si(e)&&(n[""]=t)}}function dae(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=qa(i.type)),o=new Oh(s,Si(i),N);t.blueprint[r]=o,n[r]=o,function rae(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function iae(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Zh(t,n,i.hostVars,he),i)}function fae(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)qB(r,n,o[a++],o[a++],o[a++])}function qB(t,e,n,r,i){const s=li(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{li(s)}}function pae(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function zB(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function HB(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];rA(n[r]),o.contentQueries(2,e[s],s)}}}function K_(t,e){return t[Dh]?t[J2][Di]=e:t[Dh]=e,t[J2]=e,e}function y0(t,e,n){rA(0);const r=li(null);try{e(t,n)}finally{li(r)}}function YB(t,e){const n=t[Ro],r=n?n.get(Vs,null):null;r&&r.handleError(e)}function v0(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];qB(t.data[o],e[o],r,a,i)}}function gae(t,e){const n=Wr(e,t),r=n[q];!function mae(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[At];null!==i&&null===n[Ns]&&(n[Ns]=JA(i,n[Ro])),I0(r,n,n[Mt])}function I0(t,e,n){iA(e);try{const r=t.viewQuery;null!==r&&y0(1,r,n);const i=t.template;null!==i&&LB(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&HB(t,e),t.staticViewQueries&&y0(2,t.viewQuery,n);const s=t.components;null!==s&&function _ae(t,e){for(let n=0;n<e.length;n++)gae(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,sA()}}let XB=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Sre(t,e,n){const r=Object.create(xre);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>aU(r),run:()=>{if(r.dirty=!1,r.hasRun&&!uU(r))return;r.hasRun=!0;const o=zw(r);try{r.cleanupFn(),r.cleanupFn=mU,r.fn(i)}finally{Hw(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})();function Q_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=bw(i,a):2==s&&(r=bw(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ef(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Ye(s)),ur(s)&&JB(s,r);const o=n.type;if(8&o)ef(t,e,n.child,r);else if(32&o){const a=wA(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=N3(e,n);if(Array.isArray(a))r.push(...a);else{const u=$h(e[Ot]);ef(u[q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function JB(t,e){for(let n=xn;n<t.length;n++){const r=t[n],i=r[q].firstChild;null!==i&&ef(r[q],r,i,e)}t[Ki]!==t[At]&&e.push(t[Ki])}function Y_(t,e,n,r=!0){const i=e[Cc],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ZB(t,e,t.template,n)}catch(u){throw r&&YB(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ZB(t,e,n,r){const i=e[fe];if(256!=(256&i)){e[Cc].effectManager?.flush(),iA(e);try{wU(e),function PU(t){return ne.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&LB(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&c_(e,c,null)}else{const c=t.preOrderHooks;null!==c&&l_(e,c,0,null),oA(e,0)}if(function Iae(t){for(let e=E3(t);null!==e;e=T3(e)){if(!e[eU])continue;const n=e[Sc];for(let r=0;r<n.length;r++){Ure(n[r])}}}(e),e4(e,2),null!==t.contentQueries&&HB(t,e),o){const c=t.contentCheckHooks;null!==c&&c_(e,c)}else{const c=t.contentHooks;null!==c&&l_(e,c,1),oA(e,1)}!function zoe(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=PB(e,Ph);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)za(~s);else{const o=s,a=n[++i],u=n[++i];Xre(a,o),r.dirty=!1;const c=zw(r);try{u(2,e[o])}finally{Hw(r,c)}}}}finally{null===e[Ph]&&kB(e,Ph),za(-1)}}(t,e);const a=t.components;null!==a&&n4(e,a,0);const u=t.viewQuery;if(null!==u&&y0(2,u,r),o){const c=t.viewCheckHooks;null!==c&&c_(e,c)}else{const c=t.viewHooks;null!==c&&l_(e,c,2),oA(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fe]&=-73,AU(e)}finally{sA()}}}function e4(t,e){for(let n=E3(t);null!==n;n=T3(n))for(let r=xn;r<n.length;r++)t4(n[r],e)}function Eae(t,e,n){t4(Wr(e,t),n)}function t4(t,e){if(!function Lre(t){return 128==(128&t[fe])}(t))return;const n=t[q],r=t[fe];if(80&r&&0===e||1024&r||2===e)ZB(n,t,n.template,t[Mt]);else if(t[bh]>0){e4(t,1);const i=n.components;null!==i&&n4(t,i,1)}}function n4(t,e,n){for(let r=0;r<e.length;r++)Eae(t,e[r],n)}class tf{get rootNodes(){const e=this._lView,n=e[q];return ef(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mt]}set context(e){this._lView[Mt]=e}get destroyed(){return 256==(256&this._lView[fe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ct];if(ur(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(D_(e,r),m_(n,r))}this._attachedToViewContainer=!1}CA(this._lView[q],this._lView)}onDestroy(e){!function bU(t,e){if(256==(256&t[fe]))throw new R(911,!1);null===t[Po]&&(t[Po]=[]),t[Po].push(e)}(this._lView,e)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){this._lView[fe]|=128}detectChanges(){Y_(this._lView[q],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dse(t,e){zh(t,e,e[ce],2,null,null)}(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e}}class Tae extends tf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Y_(e[q],e,e[Mt],!1)}checkNoChanges(){}get context(){return null}}class r4 extends q_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ce(e);return new nf(n,this.ngModule)}}function i4(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Aae{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Jm(r);const i=this.injector.get(e,t0,r);return i!==t0||n===t0?i:this.parentInjector.get(e,n,r)}}class nf extends cB{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=i4(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return i4(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function cre(t){return t.map(ure).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof fi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Aae(e,s):e,a=o.get(dB,null);if(null===a)throw new R(407,!1);const d={rendererFactory:a,sanitizer:o.get(Ioe,null),effectManager:o.get(XB,null),afterRenderEventManager:o.get(c0,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function Woe(t,e,n,r){const s=r.get(DB,!1)||n===Ai.ShadowDom,o=t.selectRootElement(e,s);return function Koe(t){UB(t)}(o),o}(h,r,this.componentDef.encapsulation,o):b_(h,f,function wae(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=JA(p,o,!0));const I=p0(0,null,null,1,0,null,null,null,null,null,null),C=W_(null,I,null,v,null,null,d,h,o,null,y);let k,M;iA(C);try{const ee=this.componentDef;let Ae,tn=null;ee.findHostDirectiveDefs?(Ae=[],tn=new Map,ee.findHostDirectiveDefs(ee,Ae,tn),Ae.push(ee)):Ae=[ee];const Ua=function bae(t,e){const n=t[q],r=ve;return t[r]=e,tl(n,r,2,"#host",null)}(C,p),v2e=function Dae(t,e,n,r,i,s,o){const a=i[q];!function Sae(t,e,n,r){for(const i of t)e.mergedAttrs=Ch(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Q_(e,e.mergedAttrs,!0),null!==n&&L3(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=JA(e,i[Ro]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=W_(i,VB(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&m0(a,t,r.length-1),K_(i,d),i[t.index]=d}(Ua,p,ee,Ae,C,d,h);M=TU(I,ve),p&&function Rae(t,e,n,r){if(r)Bw(t,n,["ng-version",Eoe.full]);else{const{attrs:i,classes:s}=function lre(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ci(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Bw(t,n,i),s&&s.length>0&&F3(t,n,s.join(" "))}}(h,ee,p,r),void 0!==n&&function Pae(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(M,this.ngContentSelectors,n),k=function xae(t,e,n,r,i,s){const o=Pn(),a=i[q],u=Rr(o,i);GB(a,i,o,n,null,r);for(let l=0;l<n.length;l++)Wn(Ha(i,a,o.directiveStart+l,o),i);$B(a,i,o),u&&Wn(u,i);const c=Ha(i,a,o.directiveStart+o.componentOffset,o);if(t[Mt]=i[Mt]=c,null!==s)for(const l of s)l(c,e);return d0(a,o,t),c}(v2e,ee,Ae,tn,C,[kae]),I0(I,C,null)}finally{sA()}return new Cae(this.componentType,k,Xc(M,C),C,M)}}class Cae extends poe{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Tae(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;v0(s[q],s,i,e,n),this.previousInputValues.set(e,n),Jh(Wr(this._tNode.index,s))}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function kae(){const t=Pn();u_(b()[q],t)}function Le(t){let e=function s4(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Si(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=X_(t.inputs),o.inputTransforms=X_(t.inputTransforms),o.declaredInputs=X_(t.declaredInputs),o.outputs=X_(t.outputs);const a=i.hostBindings;a&&Fae(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&Mae(t,u),c&&Oae(t,c),Hm(t.inputs,i.inputs),Hm(t.declaredInputs,i.declaredInputs),Hm(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Hm(o.inputTransforms,i.inputTransforms)),Si(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Le&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Nae(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ch(i.hostAttrs,n=Ch(n,i.hostAttrs))}}(r)}function X_(t){return t===Hi?{}:t===ke?[]:t}function Mae(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function Oae(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function Fae(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function J_(t){return!!function E0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Kn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function dl(t,e,n,r,i,s,o,a){const u=b(),c=be(),l=t+ve,d=c.firstCreatePass?function aue(t,e,n,r,i,s,o,a,u){const c=e.consts,l=tl(e,t,4,o||null,No(c,a));g0(e,n,l,No(c,u)),u_(e,l);const d=l.tView=p0(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Yi(d,!1);const h=T4(c,u,d,t);a_()&&x_(c,u,h,d),Wn(h,u),K_(u,u[l]=zB(h,u,h,d)),r_(d)&&h0(c,u,d),null!=o&&f0(u,d,a)}let T4=function w4(t,e,n,r){return Mo(!0),e[ce].createComment("")};function gi(t,e,n){const r=b();return Kn(r,kc(),e)&&function Yr(t,e,n,r,i,s,o,a){const u=Rr(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(v0(t,n,l,r,i),$a(e)&&function tae(t,e){const n=Wr(e,t);16&n[fe]||(n[fe]|=64)}(n,e.index)):3&e.type&&(r=function eae(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(be(),function _t(){const t=ne.lFrame;return TU(t.tView,t.selectedIndex)}(),r,t,e,r[ce],n,!1),gi}function D0(t,e,n,r,i){const o=i?"class":"style";v0(t,n,e.inputs[o],o,r)}function ze(t,e,n,r){const i=b(),s=be(),o=ve+t,a=i[ce],u=s.firstCreatePass?function due(t,e,n,r,i,s){const o=e.consts,u=tl(e,t,2,r,No(o,i));return g0(e,n,u,No(o,s)),null!==u.attrs&&Q_(u,u.attrs,!1),null!==u.mergedAttrs&&Q_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=C4(s,i,u,a,e,t);i[o]=c;const l=r_(u);return Yi(u,!0),L3(a,c,u),32!=(32&u.flags)&&a_()&&x_(s,i,c,u),0===function jre(){return ne.lFrame.elementDepthCount}()&&Wn(c,i),function Gre(){ne.lFrame.elementDepthCount++}(),l&&(h0(s,i,u),d0(s,u,i)),null!==r&&f0(i,u),ze}function yt(){let t=Pn();Zw()?function eA(){ne.lFrame.isParent=!1}():(t=t.parent,Yi(t,!1));const e=t;(function qre(t){return ne.skipHydrationRootTNode===t})(e)&&function Kre(){ne.skipHydrationRootTNode=null}(),function $re(){ne.lFrame.elementDepthCount--}();const n=be();return n.firstCreatePass&&(u_(n,t),Gw(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function cie(t){return 0!=(8&t.flags)}(e)&&D0(n,e,b(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lie(t){return 0!=(16&t.flags)}(e)&&D0(n,e,b(),e.stylesWithoutHost,!1),yt}function fr(t,e,n,r){return ze(t,e,n,r),yt(),fr}let C4=(t,e,n,r,i,s)=>(Mo(!0),b_(r,i,function UU(){return ne.lFrame.currentNamespace}()));function R0(){return b()}function cf(t){return!!t&&"function"==typeof t.then}function S4(t){return!!t&&"function"==typeof t.subscribe}function pn(t,e,n,r){const i=b(),s=be(),o=Pn();return function R4(t,e,n,r,i,s,o){const a=r_(r),c=t.firstCreatePass&&function KB(t){return t.cleanup||(t.cleanup=[])}(t),l=e[Mt],d=function WB(t){return t[Ac]||(t[Ac]=[])}(e);let h=!0;if(3&r.type||o){const g=Rr(r,e),_=o?o(g):g,v=d.length,y=o?C=>o(Ye(C[r.index])):r.index;let I=null;if(!o&&a&&(I=function _ue(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Ac],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,h=!1;else{s=k4(r,e,l,s,!1);const C=n.listen(_,i,s);d.push(s,C),c&&c.push(i,y,v,v+1)}}else s=k4(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const k=e[p[_]][p[_+1]].subscribe(s),M=d.length;d.push(s,k),c&&c.push(i,r.index,M,-(M+1))}}}(s,i,i[ce],o,t,e,r),pn}function P4(t,e,n,r){try{return Qi(6,e,n),!1!==n(r)}catch(i){return YB(t,i),!1}finally{Qi(7,e,n)}}function k4(t,e,n,r,i){return function s(o){if(o===Function)return r;Jh(t.componentOffset>-1?Wr(t.index,e):e);let u=P4(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=P4(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function hl(t=1){return function eie(t){return(ne.lFrame.contextLView=function tie(t,e){for(;t>0;)e=e[bc],t--;return e}(t,ne.lFrame.contextLView))[Mt]}(t)}function ry(t,e){return t<<17|e<<2}function Lo(t){return t>>17&32767}function k0(t){return 2|t}function Xa(t){return(131068&t)>>2}function N0(t,e){return-131069&t|e<<2}function M0(t){return 1|t}function G4(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Lo(s):Xa(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];bue(t[a],e)&&(u=!0,t[a+1]=r?M0(l):k0(l)),a=r?Lo(l):Xa(l)}u&&(t[n+1]=r?k0(s):M0(s))}function bue(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Bc(t,e)>=0}function iy(t,e){return function xi(t,e,n,r){const i=b(),s=be(),o=function Os(t){const e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function X4(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[lr()],o=function Y4(t,e){return e>=t.expandoStartIndex}(t,n);(function tj(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Oue(t,e,n,r){const i=function nA(t){const e=ne.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=lf(n=O0(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=O0(i,t,e,n,r),null===s){let u=function Fue(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Xa(r))return t[Lo(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=O0(null,t,e,u[1],r),u=lf(u,e.attrs,r),function Lue(t,e,n,r){t[Lo(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function Vue(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=lf(r,t[s].hostAttrs,n);return lf(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Aue(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lo(o),u=Xa(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||Bc(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=Lo(t[a+1]);t[r+1]=ry(h,a),0!==h&&(t[h+1]=N0(t[h+1],r)),t[a+1]=function Tue(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=ry(a,0),0!==a&&(t[a+1]=N0(t[a+1],r)),a=r;else t[r+1]=ry(u,0),0===a?a=r:t[u+1]=N0(t[u+1],r),u=r;c&&(t[r+1]=k0(t[r+1])),G4(t,l,r,!0),G4(t,l,r,!1),function Cue(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Bc(s,e)>=0&&(n[r+1]=M0(n[r+1]))}(e,l,t,r,s),o=ry(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==he&&Kn(i,o,e)&&function Z4(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function wue(t){return 1==(1&t)}(c)?ej(u,e,n,i,Xa(c),o):void 0;sy(l)||(sy(s)||function Eue(t){return 2==(2&t)}(c)&&(s=ej(u,null,n,i,a,o)),function Ese(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Oo.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Oo.Important),t.setStyle(n,r,i,s))}}(r,o,o_(lr(),n),i,s))}(s,s.data[lr()],i,i[ce],t,i[o+1]=function Gue(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=rn(Fo(t)))),t}(e,n),r,o)}(t,e,null,!0),iy}function O0(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=lf(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function lf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Kr(t,o,!!n||e[++s]))}return void 0===t?null:t}function ej(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===he&&(h=d?ke:void 0);let f=d?pA(h,r):l===r?h:void 0;if(c&&!sy(f)&&(f=pA(u,r)),sy(f)&&(a=f,o))return a;const p=t[i+1];i=o?Lo(p):Xa(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=pA(u,r))}return a}function sy(t){return void 0!==t}function js(t,e=""){const n=b(),r=be(),i=t+ve,s=r.firstCreatePass?tl(r,i,1,e,null):r.data[i],o=nj(r,n,s,e,t);n[i]=o,a_()&&x_(r,n,o,s),Yi(s,!1)}let nj=(t,e,n,r,i)=>(Mo(!0),function C_(t,e){return t.createText(e)}(e[ce],r));function Ja(t,e,n){const r=b(),i=function rl(t,e,n,r){return Kn(t,kc(),n)?e+ue(n)+r:he}(r,t,e,n);return i!==he&&function Bs(t,e,n){const r=o_(e,t);!function A3(t,e,n){t.setValue(e,n)}(t[ce],r,n)}(r,lr(),i),Ja}const gl="en-US";let Cj=gl;function V0(t,e,n,r,i){if(t=re(t),Array.isArray(t))for(let s=0;s<t.length;s++)V0(t[s],e,n,r,i);else{const s=be(),o=b(),a=Pn();let u=Ka(t)?t:re(t.provide);const c=rB(t),l=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Ka(t)||!t.multi){const f=new Oh(c,i,N),p=B0(u,e,i?l:l+h,d);-1===p?(dA(h_(a,o),s,u),U0(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=B0(u,e,l+h,d),p=B0(u,e,l,l+h),_=p>=0&&n[p];if(i&&!_||!i&&!(f>=0&&n[f])){dA(h_(a,o),s,u);const v=function cle(t,e,n,r,i){const s=new Oh(t,n,N);return s.multi=[],s.index=e,s.componentProviders=0,Yj(s,i,r&&!n),s}(i?ule:ale,n.length,i,r,c);!i&&_&&(n[p].providerFactory=v),U0(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else U0(s,t,f>-1?f:p,Yj(n[i?p:f],c,!i&&r));!i&&r&&_&&n[p].componentProviders++}}}function U0(t,e,n,r){const i=Ka(e),s=function Xse(t){return!!t.useClass}(e);if(i||s){const u=(s?re(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function Yj(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function B0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ale(t,e,n,r){return j0(this.multi,[])}function ule(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ha(n,n[q],this.providerFactory.index,r);s=a.slice(0,o),j0(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],j0(i,s);return s}function j0(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function lt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function ole(t,e,n){const r=be();if(r.firstCreatePass){const i=Si(t);V0(n,r.data,r.blueprint,i,!0),V0(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class eu{}class Xj{}class G0 extends eu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new r4(this);const i=Hr(e);this._bootstrapComponents=Us(i.bootstrap),this._r3Injector=mB(e,n,[{provide:eu,useValue:this},{provide:q_,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $0 extends Xj{constructor(e){super(),this.moduleType=e}create(e){return new G0(this.moduleType,e,[])}}class Jj extends eu{constructor(e){super(),this.componentFactoryResolver=new r4(this),this.instance=null;const n=new L_([...e.providers,{provide:eu,useValue:this},{provide:q_,useValue:this.componentFactoryResolver}],e.parent||F_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function q0(t,e,n=null){return new Jj({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let hle=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Z3(0,n.type),i=r.length>0?q0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=J({token:t,providedIn:"environment",factory:()=>new t(Z(fi))})}return t})();function Zj(t){t.getStandaloneInjector=e=>e.get(hle).getOrCreateStandaloneInjector(t)}function oG(t,e,n,r,i,s){const o=e+n;return Kn(t,o,i)?function Zi(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function mf(t,e){const n=t[e];return n===he?void 0:n}(t,o+1)}function ly(t,e){const n=be();let r;const i=t+ve;n.firstCreatePass?(r=function Ple(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=qa(r.type)),a=Dr(N);try{const u=d_(!1),c=s();return d_(u),function lue(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,b(),i,c),c}finally{Dr(a)}}function dy(t,e,n){const r=t+ve,i=b(),s=Rc(i,r);return function _f(t,e){return t[q].data[e].pure}(i,r)?oG(i,function cr(){const t=ne.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function Vle(t,e,n,r=!0){const i=e[q];if(function fse(t,e,n,r){const i=xn+r,s=n.length;r>0&&(n[i-1][Di]=e),r<s-xn?(e[Di]=n[i],e3(n,xn+r,e)):(n.push(e),e[Di]=null),e[ct]=n;const o=e[Sh];null!==o&&n!==o&&function pse(t,e){const n=t[Sc];e[Ot]!==e[ct][ct][Ot]&&(t[eU]=!0),null===n?t[Sc]=[e]:n.push(e)}(o,e);const a=e[Wi];null!==a&&a.insertView(t),e[fe]|=128}(i,e,t,n),r){const s=xA(n,t),o=e[ce],a=S_(o,t[Ki]);null!==a&&function lse(t,e,n,r,i,s){r[At]=i,r[Hn]=e,zh(t,r,n,1,i,s)}(i,t[Hn],o,e,a,s)}}Symbol;let Gs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=jle}return t})();const Ule=Gs,Ble=class extends Ule{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Lle(t,e,n,r){const i=e.tView,a=W_(t,i,n,4096&t[fe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Sh]=t[e.index];const c=t[Wi];return null!==c&&(a[Wi]=c.createEmbeddedView(i)),I0(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new tf(i)}};function jle(){return function hy(t,e){return 4&t.type?new Ble(e,t,Xc(t,e)):null}(Pn(),b())}let Pi=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Wle}return t})();function Wle(){return function _G(t,e){let n;const r=e[t.index];return ur(r)?n=r:(n=zB(r,e,null,t),e[t.index]=n,K_(e,n)),yG(n,e,t,r),new gG(n,t,e)}(Pn(),b())}const Kle=Pi,gG=class extends Kle{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){const e=f_(this._hostTNode,this._hostLView);if(uA(e)){const n=Lh(e,this._hostLView),r=Fh(e);return new dr(n[q].data[r+8],n)}return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=mG(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Uh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const u=o?e:new nf(Ce(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const _=(o?c:this.parentInjector).get(fi,null);_&&(s=_)}Ce(u.componentType??{});const f=u.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Vre(t){return ur(t[ct])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[ct],l=new gG(c,c[Hn],c[ct]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Vle(a,i,o,!r),e.attachToViewContainerRef(),e3(W0(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=mG(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=D_(this._lContainer,n);r&&(m_(W0(this._lContainer),n),CA(r[q],r))}detach(e){const n=this._adjustIndex(e,-1),r=D_(this._lContainer,n);return r&&null!=m_(W0(this._lContainer),n)?new tf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mG(t){return t[8]}function W0(t){return t[8]||(t[8]=[])}let yG=function vG(t,e,n,r){if(t[Ki])return;let i;i=8&n.type?Ye(r):function Qle(t,e){const n=t[ce],r=n.createComment(""),i=Rr(e,t);return Wa(n,S_(n,i),r,function yse(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ki]=i};const iC=new W("Application Initializer");let sC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=$(iC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(cf(s))n.push(s);else if(S4(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qG=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const $s=new W("LocaleId",{providedIn:"root",factory:()=>$($s,ye.Optional|ye.SkipSelf)||function bde(){return typeof $localize<"u"&&$localize.locale||gl}()});let zG=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ai(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class xde{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let HG=(()=>{class t{compileModuleSync(n){return new $0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Us(Hr(n).declarations).reduce((o,a)=>{const u=Ce(a);return u&&o.push(new nf(u)),o},[]);return new xde(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const YG=new W(""),my=new W("");let lC,uC=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lC||(function Qde(t){lC=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(Z(qe),Z(cC),Z(my))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),cC=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return lC?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Vo=null;const XG=new W("AllowMultipleToken"),dC=new W("PlatformDestroyListeners"),hC=new W("appBootstrapListener");class ZG{constructor(e,n){this.name=e,this.token=n}}function t$(t,e,n=[]){const r=`Platform: ${e}`,i=new W(r);return(s=[])=>{let o=fC();if(!o||o.injector.get(XG,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Jde(t){if(Vo&&!Vo.get(XG,!1))throw new R(400,!1);(function JG(){!function wre(t){hU=t}(()=>{throw new R(600,!1)})})(),Vo=t;const e=t.get(r$);(function e$(t){t.get(iB,null)?.forEach(n=>n())})(t)}(function n$(t=[],e){return kr.create({name:e,providers:[{provide:jA,useValue:"platform"},{provide:dC,useValue:new Set([()=>Vo=null])},...t]})}(a,r))}return function ehe(t){const e=fC();if(!e)throw new R(401,!1);return e}()}}function fC(){return Vo?.get(r$)??null}let r$=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function the(t="zone.js",e){return"noop"===t?new Noe:"zone.js"===t?new qe(e):t}(r?.ngZone,function i$(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function dle(t,e,n){return new G0(t,e,n)}(n.moduleType,this.injector,function c$(t){return[{provide:qe,useFactory:t},{provide:Qh,multi:!0,useFactory:()=>{const e=$(rhe,{optional:!0});return()=>e.initialize()}},{provide:u$,useFactory:nhe},{provide:EB,useFactory:TB}]}(()=>i)),o=s.injector.get(Vs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{_y(this._modules,s),a.unsubscribe()})}),function s$(t,e,n){try{const r=n();return cf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(sC);return a.runInitializers(),a.donePromise.then(()=>(function bj(t){ui(t,"Expected localeId to be defined"),"string"==typeof t&&(Cj=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get($s,gl)||gl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=o$({},r);return function Yde(t,e,n){const r=new $0(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(yl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new R(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(dC,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(Z(kr))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function o$(t,e){return Array.isArray(e)?e.reduce(o$,t):{...t,...e}}let yl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(u$),this.zoneIsStable=$(EB),this.componentTypes=[],this.components=[],this.isStable=$(zG).hasPendingTasks.pipe(zi(n=>n?se(!1):this.zoneIsStable),function Mne(t,e=Do){return t=t??One,nn((n,r)=>{let i,s=!0;n.subscribe(Ht(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),R2()),this._injector=$(fi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof cB;if(!this._injector.get(sC).done)throw!i&&function wc(t){const e=Ce(t)||Sn(t)||ar(t);return null!==e&&e.standalone}(n),new R(405,!1);let o;o=i?n:this._injector.get(q_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Xde(t){return t.isBoundToModule}(o)?void 0:this._injector.get(eu),c=o.create(kr.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(YG,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),_y(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;_y(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(hC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>_y(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _y(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const u$=new W("",{providedIn:"root",factory:()=>$(Vs).handleError.bind(void 0)});function nhe(){const t=$(qe),e=$(Vs);return n=>t.runOutsideAngular(()=>e.handleError(n))}let rhe=(()=>{class t{constructor(){this.zone=$(qe),this.applicationRef=$(yl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let yy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=she}return t})();function she(t){return function ohe(t,e,n){if($a(t)&&!n){const r=Wr(t.index,e);return new tf(r,r)}return 47&t.type?new tf(e[Ot],e):null}(Pn(),b(),16==(16&t))}class f${constructor(){}supports(e){return J_(e)}create(e){return new hhe(e)}}const dhe=(t,e)=>e;class hhe{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dhe}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<g$(r,i,s)?n:r,a=g$(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!J_(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function $ae(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new fhe(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new p$),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new p$),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class fhe{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class phe{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class p${constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new phe,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function g$(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function _$(){return new Ey([new f$])}let Ey=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:_$});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||_$()),deps:[[t,new y_,new fn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new R(901,!1)}}return t})();const vhe=t$(null,"core",[]);let Ihe=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(Z(yl))};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({})}return t})();let vC=null;function Uo(){return vC}class Mhe{}const mi=new W("DocumentToken");let IC=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return $(Fhe)},providedIn:"platform"})}return t})();const Ohe=new W("Location Initialized");let Fhe=(()=>{class t extends IC{constructor(){super(),this._doc=$(mi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Uo().getBaseHref(this._doc)}onPopState(n){const r=Uo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Uo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function EC(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function D$(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function qs(t){return t&&"?"!==t[0]?"?"+t:t}let nu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return $(x$)},providedIn:"root"})}return t})();const S$=new W("appBaseHref");let x$=(()=>{class t extends nu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(mi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return EC(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+qs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+qs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+qs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(IC),Z(S$,8))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lhe=(()=>{class t extends nu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=EC(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+qs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+qs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(IC),Z(S$,8))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),TC=(()=>{class t{constructor(n){this._subject=new Ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Bhe(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(D$(R$(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qs(r))}normalize(n){return t.stripTrailingSlash(function Uhe(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,R$(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=qs;static#t=this.joinWithSlash=EC;static#n=this.stripTrailingSlash=D$;static#r=this.\u0275fac=function(r){return new(r||t)(Z(nu))};static#i=this.\u0275prov=J({token:t,factory:function(){return function Vhe(){return new TC(Z(nu))}()},providedIn:"root"})}return t})();function R$(t){return t.replace(/\/index.html$/,"")}class Dfe{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let j$=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Dfe(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),G$(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{G$(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(N(Pi),N(Gs),N(Ey))};static#t=this.\u0275dir=ie({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function G$(t,e){t.context.$implicit=e.item}let NC=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Sfe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){$$("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){$$("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(N(Pi),N(Gs))};static#t=this.\u0275dir=ie({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class Sfe{constructor(){this.$implicit=null,this.ngIf=null}}function $$(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${rn(e)}'.`)}class Pfe{createSubscription(e,n){return gU(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){gU(()=>e.unsubscribe())}}class kfe{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const Nfe=new kfe,Mfe=new Pfe;let FC=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(cf(n))return Nfe;if(S4(n))return Mfe;throw function Ni(t,e){return new R(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(N(yy,16))};static#t=this.\u0275pipe=Sr({name:"async",type:t,pure:!1,standalone:!0})}return t})(),H$=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({})}return t})();function K$(t){return"server"===t}let tpe=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new npe(Z(mi),window)})}return t})();class npe{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function rpe(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Dpe extends Mhe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jC extends Dpe{static makeCurrent(){!function Nhe(t){vC||(vC=t)}(new jC)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Spe(){return Af=Af||document.querySelector("base"),Af?Af.getAttribute("href"):null}();return null==n?null:function xpe(t){Oy=Oy||document.createElement("a"),Oy.setAttribute("href",t);const e=Oy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Af=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Afe(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Oy,Af=null,Ppe=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const GC=new W("EventManagerPlugins");let Z$=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(Z(GC),Z(qe))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();class e5{constructor(e){this._doc=e}}const $C="ng-app-id";let t5=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=K$(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${$C}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute($C),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute($C,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(mi),Z(V_),Z(sB,8),Z(Qa))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const qC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zC=/%COMP%/g,Ope=new W("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function r5(t,e){return e.map(n=>n.replace(zC,t))}let i5=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=K$(a),this.defaultRenderer=new HC(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ai.ShadowDom&&(r={...r,encapsulation:Ai.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof o5?i.applyToHost(n):i instanceof WC&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ai.Emulated:s=new o5(u,c,r,this.appId,l,o,a,d);break;case Ai.ShadowDom:return new Upe(u,c,n,r,o,a,this.nonce,d);default:s=new WC(u,c,r,l,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Z$),Z(t5),Z(V_),Z(Ope),Z(mi),Z(Qa),Z(qe),Z(sB))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();class HC{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qC[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(s5(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(s5(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=qC[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=qC[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Oo.DashCase|Oo.Important)?e.style.setProperty(n,r,i&Oo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Oo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Uo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function s5(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Upe extends HC{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=r5(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class WC extends HC{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?r5(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class o5 extends WC{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function Fpe(t){return"_ngcontent-%COMP%".replace(zC,t)}(c),this.hostAttr=function Lpe(t){return"_nghost-%COMP%".replace(zC,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Bpe=(()=>{class t extends e5{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(mi))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const a5=["alt","control","meta","shift"],jpe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gpe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $pe=(()=>{class t extends e5{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Uo().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),a5.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=jpe[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),a5.forEach(o=>{o!==i&&(0,Gpe[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(Z(mi))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const c5=[{provide:Qa,useValue:"browser"},{provide:iB,useValue:function qpe(){jC.makeCurrent()},multi:!0},{provide:mi,useFactory:function Hpe(){return function bse(t){kA=t}(document),document},deps:[]}],Wpe=t$(vhe,"browser",c5),Kpe=new W(""),l5=[{provide:my,useClass:class Rpe{addToWindow(e){Qe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new R(5103,!1);return s},Qe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qe.getAllAngularRootElements=()=>e.getAllRootElements(),Qe.frameworkStabilizers||(Qe.frameworkStabilizers=[]),Qe.frameworkStabilizers.push(r=>{const i=Qe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Uo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:YG,useClass:uC,deps:[qe,cC,my]},{provide:uC,useClass:uC,deps:[qe,cC,my]}],d5=[{provide:jA,useValue:"root"},{provide:Vs,useFactory:function zpe(){return new Vs},deps:[]},{provide:GC,useClass:Bpe,multi:!0,deps:[mi,qe,Qa]},{provide:GC,useClass:$pe,multi:!0,deps:[mi]},i5,t5,Z$,{provide:dB,useExisting:i5},{provide:class ipe{},useClass:Ppe,deps:[]},[]];let Qpe=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:V_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Kpe,12))};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({providers:[...d5,...l5],imports:[H$,Ihe]})}return t})(),h5=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(Z(mi))};static#t=this.\u0275prov=J({token:t,factory:function(r){let i=null;return i=r?new r:function Xpe(){return new h5(Z(mi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:nge}=Array,{getPrototypeOf:rge,prototype:ige,keys:sge}=Object;function m5(t){if(1===t.length){const e=t[0];if(nge(e))return{args:e,keys:null};if(function oge(t){return t&&"object"==typeof t&&rge(t)===ige}(e)){const n=sge(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:age}=Array;function _5(t){return Pe(e=>function uge(t,e){return age(e)?t(...e):t(e)}(t,e))}function y5(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let v5=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(N(Ls),N(Qr))};static#t=this.\u0275dir=ie({type:t})}return t})(),ru=(()=>{class t extends v5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=kn(t)))(i||t)}}();static#t=this.\u0275dir=ie({type:t,features:[Le]})}return t})();const rs=new W("NgValueAccessor"),dge={provide:rs,useExisting:Ke(()=>Fy),multi:!0},fge=new W("CompositionEventMode");let Fy=(()=>{class t extends v5{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hge(){const t=Uo()?Uo().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(N(Ls),N(Qr),N(fge,8))};static#t=this.\u0275dir=ie({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&pn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[lt([dge]),Le]})}return t})();const Qn=new W("NgValidators"),Go=new W("NgAsyncValidators");function R5(t){return null!=t}function P5(t){return cf(t)?hn(t):t}function k5(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function N5(t,e){return e.map(n=>n(t))}function M5(t){return t.map(e=>function gge(t){return!t.validate}(e)?e:n=>e.validate(n))}function QC(t){return null!=t?function O5(t){if(!t)return null;const e=t.filter(R5);return 0==e.length?null:function(n){return k5(N5(n,e))}}(M5(t)):null}function YC(t){return null!=t?function F5(t){if(!t)return null;const e=t.filter(R5);return 0==e.length?null:function(n){return function cge(...t){const e=S2(t),{args:n,keys:r}=m5(t),i=new ut(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;qr(n[l]).subscribe(Ht(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?y5(r,a):a),s.complete())}))}});return e?i.pipe(_5(e)):i}(N5(n,e).map(P5)).pipe(Pe(k5))}}(M5(t)):null}function L5(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function XC(t){return t?Array.isArray(t)?t:[t]:[]}function Vy(t,e){return Array.isArray(t)?t.includes(e):t===e}function B5(t,e){const n=XC(e);return XC(t).forEach(i=>{Vy(n,i)||n.push(i)}),n}function j5(t,e){return XC(e).filter(n=>!Vy(t,n))}class G5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=QC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class _r extends G5{get formDirective(){return null}get path(){return null}}class $o extends G5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let q5=(()=>{class t extends $5{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(N($o,2))};static#t=this.\u0275dir=ie({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&iy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Le]})}return t})();const Cf="VALID",By="INVALID",El="PENDING",bf="DISABLED";function jy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class K5{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cf}get invalid(){return this.status===By}get pending(){return this.status==El}get disabled(){return this.status===bf}get enabled(){return this.status!==bf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j5(e,this._rawAsyncValidators))}hasValidator(e){return Vy(this._rawValidators,e)}hasAsyncValidator(e){return Vy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=El,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=bf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Cf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cf||this.status===El)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bf:Cf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=El,this._hasOwnPendingAsyncValidator=!0;const n=P5(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ct,this.statusChanges=new Ct}_calculateStatus(){return this._allControlsDisabled()?bf:this.errors?By:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(El)?El:this._anyControlsHaveStatus(By)?By:Cf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ige(t){return Array.isArray(t)?QC(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ege(t){return Array.isArray(t)?YC(t):t||null}(this._rawAsyncValidators)}}const Tl=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Gy}),Gy="always";function Df(t,e,n=Gy){(function rb(t,e){const n=function V5(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(L5(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function U5(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(L5(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();zy(e._rawValidators,i),zy(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Age(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Q5(t,e)})}(t,e),function bge(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Cge(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Q5(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function wge(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function zy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Q5(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function J5(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Z5(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const eq=class extends K5{constructor(e=null,n,r){super(function eb(t){return(jy(t)?t.validators:t)||null}(n),function tb(t,e){return(jy(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Z5(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){J5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){J5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Z5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Mge={provide:$o,useExisting:Ke(()=>ub)},rq=(()=>Promise.resolve())();let ub=(()=>{class t extends $o{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new eq,this._registered=!1,this.name="",this.update=new Ct,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ob(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fy?n=s:function xge(t){return Object.getPrototypeOf(t.constructor)===ru}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function sb(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Df(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){rq.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function vl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);rq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function $y(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(N(_r,9),N(Qn,10),N(Go,10),N(rs,10),N(yy,8),N(Tl,8))};static#t=this.\u0275dir=ie({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lt([Mge]),Le,di]})}return t})(),sq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({})}return t})(),sme=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({imports:[sq]})}return t})(),ame=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Tl,useValue:n.callSetDisabledState??Gy}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({imports:[sme]})}return t})();function gb(...t){const e=Eh(t),n=S2(t),{args:r,keys:i}=m5(t);if(0===r.length)return hn([],e);const s=new ut(function cme(t,e,n=Do){return r=>{wq(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)wq(e,()=>{const c=hn(t[u],e);let l=!1;c.subscribe(Ht(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>y5(i,o):Do));return n?s.pipe(_5(n)):s}function wq(t,e,n){t?Rs(n,t,e):e()}const Wy=vh(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function mb(...t){return function lme(){return Ic(1)}()(hn(t,Eh(t)))}function Aq(t){return new ut(e=>{qr(t()).subscribe(e)})}function xf(t,e){const n=$e(t)?t:()=>t,r=i=>i.error(n());return new ut(e?i=>e.schedule(r,0,i):r)}function _b(){return nn((t,e)=>{let n=null;t._refCount++;const r=Ht(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Cq extends ut{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,f2(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new br;const n=this.getSubject();e.add(this.source.subscribe(Ht(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=br.EMPTY)}return e}refCount(){return _b()(this)}}function su(t){return t<=0?()=>qi:nn((e,n)=>{let r=0;e.subscribe(Ht(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function qo(t,e){return nn((n,r)=>{let i=0;n.subscribe(Ht(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Ky(t){return nn((e,n)=>{let r=!1;e.subscribe(Ht(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bq(t=hme){return nn((e,n)=>{let r=!1;e.subscribe(Ht(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function hme(){return new Wy}function ou(t,e){const n=arguments.length>=2;return r=>r.pipe(t?qo((i,s)=>t(i,s,r)):Do,su(1),n?Ky(e):bq(()=>new Wy))}function Rf(t,e){return $e(e)?Dn(t,e,1):Dn(t,1)}function Nn(t,e,n){const r=$e(t)||e||n?{next:t,error:e,complete:n}:t;return r?nn((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ht(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Do}function au(t){return nn((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ht(n,void 0,void 0,o=>{s=qr(t(o,au(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function yb(t){return t<=0?()=>qi:nn((e,n)=>{let r=[];e.subscribe(Ht(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vb(t){return nn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const ge="primary",Pf=Symbol("RouteTitle");class yme{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function wl(t){return new yme(t)}function vme(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function is(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Dq(t[i],e[i]))return!1;return!0}function Dq(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function Sq(t){return t.length>0?t[t.length-1]:null}function zo(t){return function ume(t){return!!t&&(t instanceof ut||$e(t.lift)&&$e(t.subscribe))}(t)?t:cf(t)?hn(Promise.resolve(t)):se(t)}const Eme={exact:function Pq(t,e,n){if(!uu(t.segments,e.segments)||!Qy(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Pq(t.children[r],e.children[r],n))return!1;return!0},subset:kq},xq={exact:function Tme(t,e){return is(t,e)},subset:function wme(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Dq(t[n],e[n]))},ignored:()=>!0};function Rq(t,e,n){return Eme[n.paths](t.root,e.root,n.matrixParams)&&xq[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function kq(t,e,n){return Nq(t,e,e.segments,n)}function Nq(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!uu(i,n)||e.hasChildren()||!Qy(i,n,r))}if(t.segments.length===n.length){if(!uu(t.segments,n)||!Qy(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!kq(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(uu(t.segments,i)&&Qy(t.segments,i,r)&&t.children[ge])&&Nq(t.children[ge],e,s,r)}}function Qy(t,e,n){return e.every((r,i)=>xq[n](t[i].parameters,r.parameters))}class Al{constructor(e=new Ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wl(this.queryParams)),this._queryParamMap}toString(){return bme.serialize(this)}}class Ve{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yy(this)}}class kf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=wl(this.parameters)),this._parameterMap}toString(){return Fq(this)}}function uu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Nf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return new Ib},providedIn:"root"})}return t})();class Ib{parse(e){const n=new Lme(e);return new Al(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Mf(e.root,!0)}`,r=function xme(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Xy(n)}=${Xy(i)}`).join("&"):`${Xy(n)}=${Xy(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Dme(t){return encodeURI(t)}(e.fragment)}`:""}`}}const bme=new Ib;function Yy(t){return t.segments.map(e=>Fq(e)).join("/")}function Mf(t,e){if(!t.hasChildren())return Yy(t);if(e){const n=t.children[ge]?Mf(t.children[ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ge&&r.push(`${i}:${Mf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Cme(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===ge?[Mf(t.children[ge],!1)]:[`${i}:${Mf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ge]?`${Yy(t)}/${n[0]}`:`${Yy(t)}/(${n.join("//")})`}}function Mq(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xy(t){return Mq(t).replace(/%3B/gi,";")}function Eb(t){return Mq(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jy(t){return decodeURIComponent(t)}function Oq(t){return Jy(t.replace(/\+/g,"%20"))}function Fq(t){return`${Eb(t.path)}${function Sme(t){return Object.keys(t).map(e=>`;${Eb(e)}=${Eb(t[e])}`).join("")}(t.parameters)}`}const Rme=/^[^\/()?;#]+/;function Tb(t){const e=t.match(Rme);return e?e[0]:""}const Pme=/^[^\/()?;=#]+/,Nme=/^[^=?&#]+/,Ome=/^[^&#]+/;class Lme{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ge]=new Ve(e,n)),r}parseSegment(){const e=Tb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new kf(Jy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function kme(t){const e=t.match(Pme);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Tb(this.remaining);i&&(r=i,this.capture(r))}e[Jy(n)]=Jy(r)}parseQueryParam(e){const n=function Mme(t){const e=t.match(Nme);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function Fme(t){const e=t.match(Ome);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Oq(n),s=Oq(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[ge]:new Ve([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}}function Lq(t){return t.segments.length>0?new Ve([],{[ge]:t}):t}function Vq(t){const e={};for(const r of Object.keys(t.children)){const s=Vq(t.children[r]);if(r===ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Vme(t){if(1===t.numberOfChildren&&t.children[ge]){const e=t.children[ge];return new Ve(t.segments.concat(e.segments),e.children)}return t}(new Ve(t.segments,e))}function cu(t){return t instanceof Al}function Uq(t){let e;const i=Lq(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new Ve(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function Bq(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return wb(i,i,i,n,r);const s=function Bme(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Gq(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Gq(n,e,r)}(e);if(s.toRoot())return wb(i,i,new Ve([],{}),n,r);const o=function jme(t,e,n){if(t.isAbsolute)return new ev(e,!0,0);if(!n)return new ev(e,!1,NaN);if(null===n.parent)return new ev(n,!0,0);const r=Zy(t.commands[0])?0:1;return function Gme(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new ev(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Ff(o.segmentGroup,o.index,s.commands):$q(o.segmentGroup,o.index,s.commands);return wb(i,o.segmentGroup,a,n,r)}function Zy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Of(t){return"object"==typeof t&&null!=t&&t.outlets}function wb(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:jq(t,e,n);const a=Lq(Vq(o));return new Al(a,s,i)}function jq(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:jq(s,e,n)}),new Ve(t.segments,r)}class Gq{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zy(r[0]))throw new R(4003,!1);const i=r.find(Of);if(i&&i!==Sq(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ev{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function $q(t,e,n){if(t||(t=new Ve([],{})),0===t.segments.length&&t.hasChildren())return Ff(t,e,n);const r=function qme(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Of(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!zq(u,c,o))return s;r+=2}else{if(!zq(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ve(t.segments.slice(0,r.pathIndex),{});return s.children[ge]=new Ve(t.segments.slice(r.pathIndex),t.children),Ff(s,0,i)}return r.match&&0===i.length?new Ve(t.segments,{}):r.match&&!t.hasChildren()?Ab(t,e,n):r.match?Ff(t,0,i):Ab(t,e,n)}function Ff(t,e,n){if(0===n.length)return new Ve(t.segments,{});{const r=function $me(t){return Of(t[0])?t[0].outlets:{[ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==ge)&&t.children[ge]&&1===t.numberOfChildren&&0===t.children[ge].segments.length){const s=Ff(t.children[ge],e,n);return new Ve(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=$q(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ve(t.segments,i)}}function Ab(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Of(s)){const u=zme(s.outlets);return new Ve(r,u)}if(0===i&&Zy(n[0])){r.push(new kf(t.segments[e].path,qq(n[0]))),i++;continue}const o=Of(s)?s.outlets[ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Zy(a)?(r.push(new kf(o,qq(a))),i+=2):(r.push(new kf(o,{})),i++)}return new Ve(r,{})}function zme(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Ab(new Ve([],{}),0,r))}),e}function qq(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function zq(t,e,n){return t==n.path&&is(e,n.parameters)}const Lf="imperative";class ss{constructor(e,n){this.id=e,this.url=n}}class tv extends ss{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ho extends ss{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vf extends ss{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cl extends ss{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class nv extends ss{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hq extends ss{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hme extends ss{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wme extends ss{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kme extends ss{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qme extends ss{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yme{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xme{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jme{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zme{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e_e{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t_e{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wq{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Cb{}class bb{constructor(e){this.url=e}}class n_e{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Uf,this.attachRef=null}}let Uf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new n_e,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Kq{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Db(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Db(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Sb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Sb(e,this._root).map(n=>n.value)}}function Db(t,e){if(t===e.value)return e;for(const n of e.children){const r=Db(t,n);if(r)return r}return null}function Sb(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Sb(t,n);if(r.length)return r.unshift(e),r}return[]}class Ws{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function bl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Qq extends Kq{constructor(e,n){super(e),this.snapshot=n,xb(this,e)}toString(){return this.snapshot.toString()}}function Yq(t,e){const n=function r_e(t,e){const o=new rv([],{},{},"",{},ge,e,null,{});return new Jq("",new Ws(o,[]))}(0,e),r=new ai([new kf("",{})]),i=new ai({}),s=new ai({}),o=new ai({}),a=new ai(""),u=new Dl(r,i,o,a,s,ge,e,n.root);return u.snapshot=n.root,new Qq(new Ws(u,[]),n)}class Dl{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Pe(c=>c[Pf]))??se(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pe(e=>wl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pe(e=>wl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xq(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function i_e(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class rv{get title(){return this.data?.[Pf]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jq extends Kq{constructor(e,n){super(n),this.url=e,xb(this,n)}toString(){return Zq(this._root)}}function xb(t,e){e.value._routerState=t,e.children.forEach(n=>xb(t,n))}function Zq(t){const e=t.children.length>0?` { ${t.children.map(Zq).join(", ")} } `:"";return`${t.value}${e}`}function Rb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,is(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),is(e.params,n.params)||t.paramsSubject.next(n.params),function Ime(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!is(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),is(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Pb(t,e){const n=is(t.params,e.params)&&function Ame(t,e){return uu(t,e)&&t.every((n,r)=>is(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Pb(t.parent,e.parent))}let kb=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new Ct,this.deactivateEvents=new Ct,this.attachEvents=new Ct,this.detachEvents=new Ct,this.parentContexts=$(Uf),this.location=$(Pi),this.changeDetector=$(yy),this.environmentInjector=$(fi),this.inputBinder=$(iv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new s_e(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=ie({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[di]})}return t})();class s_e{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Dl?this.route:e===Uf?this.childContexts:this.parent.get(e,n)}}const iv=new W("");let ez=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=gb([r.queryParams,r.params,r.data]).pipe(zi(([s,o,a],u)=>(a={...s,...o,...a},0===u?se(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function khe(t){const e=Ce(t);if(!e)return null;const n=new nf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function Bf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function a_e(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Bf(t,r,i);return Bf(t,r)})}(t,e,n);return new Ws(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Bf(t,a)),o}}const r=function u_e(t){return new Dl(new ai(t.url),new ai(t.params),new ai(t.queryParams),new ai(t.fragment),new ai(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Bf(t,s));return new Ws(r,i)}}const Nb="ngNavigationCancelingError";function tz(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nz(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function nz(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Nb]=!0,r.cancellationCode=e,n&&(r.url=n),r}function rz(t){return t&&t[Nb]}let iz=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Tc({type:t,selectors:[["ng-component"]],standalone:!0,features:[Zj],decls:1,vars:0,template:function(r,i){1&r&&fr(0,"router-outlet")},dependencies:[kb],encapsulation:2})}return t})();function Mb(t){const e=t.children&&t.children.map(Mb),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=iz),n}function Mi(t){return t.outlet||ge}function jf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class m_e{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Rb(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=bl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=bl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new t_e(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zme(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Rb(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Rb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=jf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class sz{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sv{constructor(e,n){this.component=e,this.route=n}}function __e(t,e,n){const r=t._root;return Gf(r,e?e._root:null,n,[r.value])}function Sl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Gne(t){return null!==Km(t)}(t)?e.get(t):t:r}function Gf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=bl(e);return t.children.forEach(o=>{(function v_e(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function I_e(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!uu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!uu(t.url,e.url)||!is(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pb(t,e)||!is(t.queryParams,e.queryParams);default:return!Pb(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sz(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Gf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new sv(a.outlet.component,o))}else o&&$f(e,a,i),i.canActivateChecks.push(new sz(r)),Gf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>$f(a,n.getContext(o),i)),i}function $f(t,e,n){const r=bl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{$f(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new sv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qf(t){return"function"==typeof t}function oz(t){return t instanceof Wy||"EmptyError"===t?.name}const ov=Symbol("INITIAL_VALUE");function xl(){return zi(t=>gb(t.map(e=>e.pipe(su(1),function dme(...t){const e=Eh(t);return nn((n,r)=>{(e?mb(t,n,e):mb(t,n)).subscribe(r)})}(ov)))).pipe(Pe(e=>{for(const n of e)if(!0!==n){if(n===ov)return ov;if(!1===n||n instanceof Al)return n}return!0}),qo(e=>e!==ov),su(1)))}function az(t){return vw(Nn(e=>{if(cu(e))throw tz(0,e)}),Pe(e=>!0===e))}class av{constructor(e){this.segmentGroup=e||null}}class uz{constructor(e){this.urlTree=e}}function Rl(t){return xf(new av(t))}function cz(t){return xf(new uz(t))}class B_e{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new R(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return se(r);if(i.numberOfChildren>1||!i.children[ge])return xf(new R(4e3,!1));i=i.children[ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Al(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ve(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const Ob={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function j_e(t,e,n,r,i){const s=Fb(t,e,n);return s.matched?(r=function l_e(t,e){return t.providers&&!t._injector&&(t._injector=q0(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function L_e(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?se(i.map(o=>{const a=Sl(o,t);return zo(function b_e(t){return t&&qf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(xl(),az()):se(!0)}(r,e,n).pipe(Pe(o=>!0===o?s:{...Ob}))):se(s)}function Fb(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Ob}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||vme)(n,t,e);if(!i)return{...Ob};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function lz(t,e,n,r){return n.length>0&&function q_e(t,e,n){return n.some(r=>uv(t,e,r)&&Mi(r)!==ge)}(t,n,r)?{segmentGroup:new Ve(e,$_e(r,new Ve(n,t.children))),slicedSegments:[]}:0===n.length&&function z_e(t,e,n){return n.some(r=>uv(t,e,r))}(t,n,r)?{segmentGroup:new Ve(t.segments,G_e(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ve(t.segments,t.children),slicedSegments:n}}function G_e(t,e,n,r,i){const s={};for(const o of r)if(uv(t,n,o)&&!i[Mi(o)]){const a=new Ve([],{});s[Mi(o)]=a}return{...i,...s}}function $_e(t,e){const n={};n[ge]=e;for(const r of t)if(""===r.path&&Mi(r)!==ge){const i=new Ve([],{});n[Mi(r)]=i}return n}function uv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Q_e{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new B_e(this.urlSerializer,this.urlTree)}noMatchError(e){return new R(4002,!1)}recognize(){const e=lz(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ge).pipe(au(n=>{if(n instanceof uz)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof av?this.noMatchError(n):n}),Pe(n=>{const r=new rv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ge,this.rootComponentType,null,{}),i=new Ws(r,n),s=new Jq("",i),o=function Ume(t,e,n=null,r=null){return Bq(Uq(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ge).pipe(au(r=>{throw r instanceof av?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Xq(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return hn(i).pipe(Rf(s=>{const o=r.children[s],a=function p_e(t,e){const n=t.filter(r=>Mi(r)===e);return n.push(...t.filter(r=>Mi(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function pme(t,e){return nn(function fme(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Ht(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Ky(null),function gme(t,e){const n=arguments.length>=2;return r=>r.pipe(t?qo((i,s)=>t(i,s,r)):Do,yb(1),n?Ky(e):bq(()=>new Wy))}(),Dn(s=>{if(null===s)return Rl(r);const o=dz(s);return function Y_e(t){t.sort((e,n)=>e.value.outlet===ge?-1:n.value.outlet===ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),se(o)}))}processSegment(e,n,r,i,s,o){return hn(n).pipe(Rf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(au(u=>{if(u instanceof av)return se(null);throw u}))),ou(a=>!!a),au(a=>{if(oz(a))return function W_e(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?se([]):Rl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function H_e(t,e,n,r){return!!(Mi(t)===r||r!==ge&&uv(e,n,t))&&("**"===t.path||Fb(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Rl(i):Rl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cz(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Dn(o=>{const a=new Ve(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=Fb(n,i,s);if(!a)return Rl(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?cz(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Dn(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?Sq(i).parameters:{};a=se({snapshot:new rv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hz(r),Mi(r),r.component??r._loadedComponent??null,r,fz(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=j_e(n,r,i,e).pipe(Pe(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new rv(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hz(r),Mi(r),r.component??r._loadedComponent??null,r,fz(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(zi(u=>null===u?Rl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(zi(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=u,{segmentGroup:p,slicedSegments:g}=lz(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(Pe(v=>null===v?null:[new Ws(d,v)]));if(0===c.length&&0===g.length)return se([new Ws(d,[])]);const _=Mi(r)===s;return this.processSegment(l,c,p,g,_?ge:s,!0).pipe(Pe(v=>[new Ws(d,v)]))}))))}getChildConfig(e,n,r){return n.children?se({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?se({routes:n._loadedRoutes,injector:n._loadedInjector}):function F_e(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?se(!0):se(i.map(o=>{const a=Sl(o,t);return zo(function T_e(t){return t&&qf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(xl(),az())}(e,n,r).pipe(Dn(i=>i?this.configLoader.loadChildren(e,n).pipe(Nn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function U_e(t){return xf(nz(!1,3))}())):se({routes:[],injector:e})}}function X_e(t){const e=t.value.routeConfig;return e&&""===e.path}function dz(t){const e=[],n=new Set;for(const r of t){if(!X_e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=dz(r.children);e.push(new Ws(r.value,i))}return e.filter(r=>!n.has(r))}function hz(t){return t.data||{}}function fz(t){return t.resolve||{}}function pz(t){return"string"==typeof t.title||null===t.title}function Lb(t){return zi(e=>{const n=t(e);return n?hn(n).pipe(Pe(()=>e)):se(e)})}const Pl=new W("ROUTES");let Vb=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(HG)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return se(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=zo(n.loadComponent()).pipe(Pe(gz),Nn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),vb(()=>{this.componentLoaders.delete(n)})),i=new Cq(r,()=>new wi).pipe(_b());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function iye(t,e,n,r){return zo(t.loadChildren()).pipe(Pe(gz),Dn(i=>i instanceof Xj||Array.isArray(i)?se(i):hn(e.compileModuleAsync(i))),Pe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Pl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Mb),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(vb(()=>{this.childrenLoaders.delete(r)})),o=new Cq(s,()=>new wi).pipe(_b());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gz(t){return function sye(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let cv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wi,this.transitionAbortSubject=new wi,this.configLoader=$(Vb),this.environmentInjector=$(fi),this.urlSerializer=$(Nf),this.rootContexts=$(Uf),this.inputBindingEnabled=null!==$(iv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Xme(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Yme(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new ai({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qo(s=>0!==s.id),Pe(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),zi(s=>{this.currentTransition=s;let o=!1,a=!1;return se(s).pipe(Nn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zi(u=>{const c=u.currentBrowserUrl.toString(),l=!n.navigated||u.extractedUrl.toString()!==c||c!==u.currentUrlTree.toString();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Cl(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),qi}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return se(u).pipe(zi(h=>{const f=this.transitions?.getValue();return this.events.next(new tv(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?qi:Promise.resolve(h)}),function J_e(t,e,n,r,i,s){return Dn(o=>function K_e(t,e,n,r,i,s,o="emptyOnly"){return new Q_e(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(Pe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Nn(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new Hq(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:_}=u,v=new tv(h,this.urlSerializer.serialize(f),p,g);this.events.next(v);const y=Yq(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:y,urlAfterRedirects:f,extras:{..._,skipLocationChange:!1,replaceUrl:!1}},se(s)}{const h="";return this.events.next(new Cl(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),qi}}),Nn(u=>{const c=new Hme(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),Pe(u=>(this.currentTransition=s={...u,guards:__e(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function S_e(t,e){return Dn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?se({...n,guardsResult:!0}):function x_e(t,e,n,r){return hn(t).pipe(Dn(i=>function O_e(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?se(s.map(a=>{const u=jf(e)??i,c=Sl(a,u);return zo(function C_e(t){return t&&qf(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(ou())})).pipe(xl()):se(!0)}(i.component,i.route,n,e,r)),ou(i=>!0!==i,!0))}(o,r,i,t).pipe(Dn(a=>a&&function E_e(t){return"boolean"==typeof t}(a)?function R_e(t,e,n,r){return hn(e).pipe(Rf(i=>mb(function k_e(t,e){return null!==t&&e&&e(new Jme(t)),se(!0)}(i.route.parent,r),function P_e(t,e){return null!==t&&e&&e(new e_e(t)),se(!0)}(i.route,r),function M_e(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function y_e(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Aq(()=>se(o.guards.map(u=>{const c=jf(o.node)??n,l=Sl(u,c);return zo(function A_e(t){return t&&qf(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(ou())})).pipe(xl())));return se(s).pipe(xl())}(t,i.path,n),function N_e(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return se(!0);const i=r.map(s=>Aq(()=>{const o=jf(e)??n,a=Sl(s,o);return zo(function w_e(t){return t&&qf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ou())}));return se(i).pipe(xl())}(t,i.route,n))),ou(i=>!0!==i,!0))}(r,s,t,e):se(a)),Pe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Nn(u=>{if(s.guardsResult=u.guardsResult,cu(u.guardsResult))throw tz(0,u.guardsResult);const c=new Wme(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),qo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),Lb(u=>{if(u.guards.canActivateChecks.length)return se(u).pipe(Nn(c=>{const l=new Kme(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),zi(c=>{let l=!1;return se(c).pipe(function Z_e(t,e){return Dn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let s=0;return hn(i).pipe(Rf(o=>function eye(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!pz(i)&&(s[Pf]=i.title),function tye(t,e,n,r){const i=function nye(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return se({});const s={};return hn(i).pipe(Dn(o=>function rye(t,e,n,r){const i=jf(e)??r,s=Sl(t,i);return zo(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ou(),Nn(a=>{s[o]=a}))),yb(1),function mme(t){return Pe(()=>t)}(s),au(o=>oz(o)?qi:xf(o)))}(s,t,e,r).pipe(Pe(o=>(t._resolvedData=o,t.data=Xq(t,n).resolve,i&&pz(i)&&(t.data[Pf]=i.title),null)))}(o.route,r,t,e)),Nn(()=>s++),yb(1),Dn(o=>s===i.length?se(n):qi))})}(n.paramsInheritanceStrategy,this.environmentInjector),Nn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",2)}}))}),Nn(c=>{const l=new Qme(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),Lb(u=>{const c=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(Nn(h=>{l.component=h}),Pe(()=>{})));for(const h of l.children)d.push(...c(h));return d};return gb(c(u.targetSnapshot.root)).pipe(Ky(),su(1))}),Lb(()=>this.afterPreactivation()),Pe(u=>{const c=function o_e(t,e,n){const r=Bf(t,e._root,n?n._root:void 0);return new Qq(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:c},s}),Nn(()=>{this.events.next(new Cb)}),((t,e,n,r)=>Pe(i=>(new m_e(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),su(1),Nn({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ho(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function _me(t){return nn((e,n)=>{qr(t).subscribe(Ht(n,()=>n.complete(),fw)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Nn(u=>{throw u}))),vb(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),au(u=>{if(a=!0,rz(u))this.events.next(new Vf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function c_e(t){return rz(t)&&cu(t.url)}(u)?this.events.next(new bb(u.url)):s.resolve(!1);else{this.events.next(new nv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(c){s.reject(c)}}return qi}))}))}cancelNavigationTransition(n,r,i){const s=new Vf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mz(t){return t!==Lf}let _z=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ge);return r}getResolvedTitleForRoute(n){return n.data[Pf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return $(oye)},providedIn:"root"})}return t})(),oye=(()=>{class t extends _z{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(h5))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aye=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return $(cye)},providedIn:"root"})}return t})();class uye{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let cye=(()=>{class t extends uye{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=kn(t)))(i||t)}}();static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lv=new W("",{providedIn:"root",factory:()=>({})});let lye=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return $(dye)},providedIn:"root"})}return t})(),dye=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(zf||{});function yz(t,e){t.events.pipe(qo(n=>n instanceof Ho||n instanceof Vf||n instanceof nv||n instanceof Cl),Pe(n=>n instanceof Ho||n instanceof Cl?zf.COMPLETE:n instanceof Vf&&(0===n.code||1===n.code)?zf.REDIRECTING:zf.FAILED),qo(n=>n!==zf.REDIRECTING),su(1)).subscribe(()=>{e()})}function hye(t){throw t}function fye(t,e,n){return e.parse("/")}const pye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Or=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=$(qG),this.isNgZoneEnabled=!1,this._events=new wi,this.options=$(lv,{optional:!0})||{},this.pendingTasks=$(zG),this.errorHandler=this.options.errorHandler||hye,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||fye,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=$(lye),this.routeReuseStrategy=$(aye),this.titleStrategy=$(_z),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=$(Pl,{optional:!0})?.flat()??[],this.navigationTransitions=$(cv),this.urlSerializer=$(Nf),this.location=$(TC),this.componentInputBindingEnabled=!!$(iv,{optional:!0}),this.eventsSubscription=new br,this.isNgZoneEnabled=$(qe)instanceof qe&&qe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Al,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yq(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(vz(r)&&this._events.next(r));if(r instanceof tv)mz(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Cl)this.rawUrlTree=i.rawUrl;else if(r instanceof Hq){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Cb)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Vf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof bb){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mz(i.source)};this.scheduleNavigation(s,Lf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof nv&&this.restoreHistory(i,!0),r instanceof Ho&&(this.navigated=!0),vz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Lf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Mb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=Uq(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return Bq(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=cu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Lf,null,r)}navigate(n,r={skipLocationChange:!1}){return function mye(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new R(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...pye}:!1===r?{...gye}:r,cu(n))return Rq(this.currentUrlTree,n,i);const s=this.parseUrl(n);return Rq(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return yz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vz(t){return!(t instanceof Cb||t instanceof bb)}class Iz{}let vye=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(qo(n=>n instanceof Ho),Rf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=q0(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return hn(i).pipe(Ic())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):se(null);const s=i.pipe(Dn(o=>null===o?se(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?hn([s,this.loader.loadComponent(r)]).pipe(Ic()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Or),Z(HG),Z(fi),Z(Iz),Z(Vb))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Bb=new W("");let Ez=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof tv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ho?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Cl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Wq&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wq(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function FB(){throw new Error("invalid")}()};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function Ks(t,e){return{\u0275kind:t,\u0275providers:e}}function wz(){const t=$(kr);return e=>{const n=t.get(yl);if(e!==n.components[0])return;const r=t.get(Or),i=t.get(Az);1===t.get(jb)&&r.initialNavigation(),t.get(Cz,null,ye.Optional)?.setUpPreloading(),t.get(Bb,null,ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Az=new W("",{factory:()=>new wi}),jb=new W("",{providedIn:"root",factory:()=>1}),Cz=new W("");function wye(t){return Ks(0,[{provide:Cz,useExisting:vye},{provide:Iz,useExisting:t}])}const bz=new W("ROUTER_FORROOT_GUARD"),Cye=[TC,{provide:Nf,useClass:Ib},Or,Uf,{provide:Dl,useFactory:function Tz(t){return t.routerState.root},deps:[Or]},Vb,[]];function bye(){return new ZG("Router",Or)}let Dz=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Cye,[],{provide:Pl,multi:!0,useValue:n},{provide:bz,useFactory:Rye,deps:[[Or,new fn,new y_]]},{provide:lv,useValue:r||{}},r?.useHash?{provide:nu,useClass:Lhe}:{provide:nu,useClass:x$},{provide:Bb,useFactory:()=>{const t=$(tpe),e=$(qe),n=$(lv),r=$(cv),i=$(Nf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ez(i,r,t,e,n)}},r?.preloadingStrategy?wye(r.preloadingStrategy).\u0275providers:[],{provide:ZG,multi:!0,useFactory:bye},r?.initialNavigation?Pye(r):[],r?.bindToComponentInputs?Ks(8,[ez,{provide:iv,useExisting:ez}]).\u0275providers:[],[{provide:Sz,useFactory:wz},{provide:hC,multi:!0,useExisting:Sz}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Pl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Z(bz,8))};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({})}return t})();function Rye(t){return"guarded"}function Pye(t){return["disabled"===t.initialNavigation?Ks(3,[{provide:iC,multi:!0,useFactory:()=>{const e=$(Or);return()=>{e.setUpLocationChangeListener()}}},{provide:jb,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ks(2,[{provide:jb,useValue:0},{provide:iC,multi:!0,deps:[kr],useFactory:e=>{const n=e.get(Ohe,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Or),s=e.get(Az);yz(i,()=>{r(!0)}),e.get(cv).afterPreactivation=()=>(r(!0),s.closed?se(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Sz=new W("");function xz(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){xz(s,r,i,o,a,"next",u)}function a(u){xz(s,r,i,o,a,"throw",u)}o(void 0)})}}const Rz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},$b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new Fye;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dv=function(t){return function(t){const e=Rz(t);return $b.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Hf=function(t){try{return $b.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},hv=()=>{try{return function Uye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hf(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},kz=()=>{var t;return null===(t=hv())||void 0===t?void 0:t.config},Nz=t=>{var e;return null===(e=hv())||void 0===e?void 0:e[`_${t}`]};class fv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function pv(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Oz(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lu(){try{return"object"==typeof indexedDB}catch{return!1}}function Wf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function qb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jr.prototype.create)}}class Jr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Kye(t,e){return t.replace(Qye,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Yn(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Qye=/\{\$([^}]+)}/g;function zb(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Lz(s)&&Lz(o)){if(!zb(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lz(t){return null!==t&&"object"==typeof t}function Kf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vz(t,e){const n=new Yye(t,e);return n.subscribe.bind(n)}class Yye{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Xye(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=Hb),void 0===i.error&&(i.error=Hb),void 0===i.complete&&(i.complete=Hb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hb(){}const Jye=1e3,Zye=2,eve=144e5,tve=.5;function Kb(t,e=Jye,n=Zye){const r=e*Math.pow(n,t),i=Math.round(tve*r*(Math.random()-.5)*2);return Math.min(eve,r+i)}function Lt(t){return t&&t._delegate?t._delegate:t}class Kt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const du="[DEFAULT]";class rve{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function sve(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:du})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=du){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=du){return this.instances.has(e)}getOptions(e=du){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===du?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=du){return this.component?this.component.multipleInstances?e:du:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ove{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rve(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Qb=[];var pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{});const Uz={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},ave=pe.INFO,uve={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},cve=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=uve[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Wo{constructor(e){this.name=e,this._logLevel=ave,this._logHandler=cve,this._userLogHandler=null,Qb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Uz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const lve=(t,e)=>e.some(n=>t instanceof n);let Bz,jz;const Gz=new WeakMap,Yb=new WeakMap,$z=new WeakMap,Xb=new WeakMap,Jb=new WeakMap;let Zb={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Yb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$z.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ko(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function _ve(t){return"function"==typeof t?function mve(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hve(){return jz||(jz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(eD(this),e),Ko(Gz.get(this))}:function(...e){return Ko(t.apply(eD(this),e))}:function(e,...n){const r=t.call(eD(this),e,...n);return $z.set(r,e.sort?e.sort():[e]),Ko(r)}}(t):(t instanceof IDBTransaction&&function pve(t){if(Yb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yb.set(t,e)}(t),lve(t,function dve(){return Bz||(Bz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Zb):t)}function Ko(t){if(t instanceof IDBRequest)return function fve(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ko(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gz.set(n,t)}).catch(()=>{}),Jb.set(e,t),e}(t);if(Xb.has(t))return Xb.get(t);const e=_ve(t);return e!==t&&(Xb.set(t,e),Jb.set(e,t)),e}const eD=t=>Jb.get(t),vve=["get","getKey","getAll","getAllKeys","count"],Ive=["put","add","delete","clear"],tD=new Map;function qz(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(tD.get(e))return tD.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ive.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vve.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return tD.set(e,s),s}!function gve(t){Zb=t(Zb)}(t=>({...t,get:(e,n,r)=>qz(e,n)||t.get(e,n,r),has:(e,n)=>!!qz(e,n)||t.has(e,n)}));class Eve{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Tve(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const nD="@firebase/app",hu=new Wo("@firebase/app"),mv="[DEFAULT]",Kve={[nD]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fu=new Map,_v=new Map;function Qve(t,e){try{t.container.addComponent(e)}catch(n){hu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function an(t){const e=t.name;if(_v.has(e))return hu.debug(`There were multiple attempts to register component ${e}.`),!1;_v.set(e,t);for(const n of fu.values())Qve(n,t);return!0}function yv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Qs=new Jr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xve{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}const os="9.23.0";function Wz(){return Array.from(fu.values())}function dt(t,e,n){var r;let i=null!==(r=Kve[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void hu.warn(a.join(" "))}an(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Zve="firebase-heartbeat-database",eIe=1,Qf="firebase-heartbeat-store";let iD=null;function Kz(){return iD||(iD=function yve(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ko(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ko(o.result),u.oldVersion,u.newVersion,Ko(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Zve,eIe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Qf)}}).catch(t=>{throw Qs.create("idb-open",{originalErrorMessage:t.message})})),iD}function sD(){return(sD=m(function*(t){try{return yield(yield Kz()).transaction(Qf).objectStore(Qf).get(Yz(t))}catch(e){if(e instanceof Yn)hu.warn(e.message);else{const n=Qs.create("idb-get",{originalErrorMessage:e?.message});hu.warn(n.message)}}})).apply(this,arguments)}function Qz(t,e){return oD.apply(this,arguments)}function oD(){return(oD=m(function*(t,e){try{const r=(yield Kz()).transaction(Qf,"readwrite");yield r.objectStore(Qf).put(e,Yz(t)),yield r.done}catch(n){if(n instanceof Yn)hu.warn(n.message);else{const r=Qs.create("idb-set",{originalErrorMessage:n?.message});hu.warn(r.message)}}})).apply(this,arguments)}function Yz(t){return`${t.name}!${t.options.appId}`}class iIe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oIe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xz();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=Xz(),{heartbeatsToSend:r,unsentEntries:i}=function sIe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Jz(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jz(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=dv(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function Xz(){return(new Date).toISOString().substring(0,10)}class oIe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!lu()&&Wf().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function tIe(t){return sD.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Qz(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Qz(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Jz(t){return dv(JSON.stringify({version:2,heartbeats:t})).length}!function aIe(t){an(new Kt("platform-logger",e=>new Eve(e),"PRIVATE")),an(new Kt("heartbeat",e=>new iIe(e),"PRIVATE")),dt(nD,"0.9.13",t),dt(nD,"0.9.13","esm2017"),dt("fire-js","")}(""),dt("firebase","9.23.0","app");const lIe=(t,e)=>e.some(n=>t instanceof n);let Zz,eH;const tH=new WeakMap,aD=new WeakMap,nH=new WeakMap,uD=new WeakMap,cD=new WeakMap;let lD={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return aD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||nH.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function _Ie(t){return"function"==typeof t?function mIe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hIe(){return eH||(eH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(dD(this),e),Qo(tH.get(this))}:function(...e){return Qo(t.apply(dD(this),e))}:function(e,...n){const r=t.call(dD(this),e,...n);return nH.set(r,e.sort?e.sort():[e]),Qo(r)}}(t):(t instanceof IDBTransaction&&function pIe(t){if(aD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});aD.set(t,e)}(t),lIe(t,function dIe(){return Zz||(Zz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,lD):t)}function Qo(t){if(t instanceof IDBRequest)return function fIe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tH.set(n,t)}).catch(()=>{}),cD.set(e,t),e}(t);if(uD.has(t))return uD.get(t);const e=_Ie(t);return e!==t&&(uD.set(t,e),cD.set(e,t)),e}const dD=t=>cD.get(t),vIe=["get","getKey","getAll","getAllKeys","count"],IIe=["put","add","delete","clear"],hD=new Map;function rH(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(hD.get(e))return hD.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=IIe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vIe.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return hD.set(e,s),s}!function gIe(t){lD=t(lD)}(t=>({...t,get:(e,n,r)=>rH(e,n)||t.get(e,n,r),has:(e,n)=>!!rH(e,n)||t.has(e,n)}));const iH="@firebase/installations",fD="0.6.4",sH=1e4,oH=`w:${fD}`,aH="FIS_v2",EIe="https://firebaseinstallations.googleapis.com/v1",TIe=36e5,Ys=new Jr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function uH(t){return t instanceof Yn&&t.code.includes("request-failed")}function pD({projectId:t}){return`${EIe}/projects/${t}/installations`}function cH(t){return{token:t.token,requestStatus:2,expiresIn:bIe(t.expiresIn),creationTime:Date.now()}}function gD(t,e){return mD.apply(this,arguments)}function mD(){return(mD=m(function*(t,e){const r=(yield e.json()).error;return Ys.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function lH({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _D(t){return yD.apply(this,arguments)}function yD(){return(yD=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function bIe(t){return Number(t.replace("s","000"))}function vD(){return(vD=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=pD(t),i=lH(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:aH,appId:t.appId,sdkVersion:oH})},u=yield _D(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:cH(c.authToken)}}throw yield gD("Create Installation",u)})).apply(this,arguments)}function hH(t){return new Promise(e=>{setTimeout(e,t)})}const RIe=/^[cdef][\w-]{21}$/,ID="";function PIe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function kIe(t){return function xIe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return RIe.test(n)?n:ID}catch{return ID}}function kl(t){return`${t.appName}!${t.appId}`}const Nl=new Map;function fH(t,e){const n=kl(t);pH(n,e),function OIe(t,e){const n=function gH(){return!pu&&"BroadcastChannel"in self&&(pu=new BroadcastChannel("[Firebase] FID Change"),pu.onmessage=t=>{pH(t.data.key,t.data.fid)}),pu}();n&&n.postMessage({key:t,fid:e}),function mH(){0===Nl.size&&pu&&(pu.close(),pu=null)}()}(n,e)}function pH(t,e){const n=Nl.get(t);if(n)for(const r of n)r(e)}let pu=null;const FIe="firebase-installations-database",LIe=1,gu="firebase-installations-store";let ED=null;function TD(){return ED||(ED=function yIe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Qo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qo(o.result),u.oldVersion,u.newVersion,Qo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(FIe,LIe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(gu)}})),ED}function vv(t,e){return wD.apply(this,arguments)}function wD(){return(wD=m(function*(t,e){const n=kl(t),i=(yield TD()).transaction(gu,"readwrite"),s=i.objectStore(gu),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&fH(t,e.fid),e})).apply(this,arguments)}function AD(t){return CD.apply(this,arguments)}function CD(){return(CD=m(function*(t){const e=kl(t),r=(yield TD()).transaction(gu,"readwrite");yield r.objectStore(gu).delete(e),yield r.done})).apply(this,arguments)}function Yf(t,e){return bD.apply(this,arguments)}function bD(){return(bD=m(function*(t,e){const n=kl(t),i=(yield TD()).transaction(gu,"readwrite"),s=i.objectStore(gu),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&fH(t,a.fid),a})).apply(this,arguments)}function DD(t){return SD.apply(this,arguments)}function SD(){return SD=m(function*(t){let e;const n=yield Yf(t.appConfig,r=>{const i=function VIe(t){return yH(t||{fid:PIe(),registrationStatus:0})}(r),s=function UIe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ys.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function BIe(t,e){return xD.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:jIe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ID?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),SD.apply(this,arguments)}function xD(){return xD=m(function*(t,e){try{const n=yield function SIe(t,e){return vD.apply(this,arguments)}(t,e);return vv(t.appConfig,n)}catch(n){throw uH(n)&&409===n.customData.serverCode?yield AD(t.appConfig):yield vv(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),xD.apply(this,arguments)}function jIe(t){return RD.apply(this,arguments)}function RD(){return(RD=m(function*(t){let e=yield _H(t.appConfig);for(;1===e.registrationStatus;)yield hH(100),e=yield _H(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield DD(t);return r||n}return e})).apply(this,arguments)}function _H(t){return Yf(t,e=>{if(!e)throw Ys.create("installation-not-found");return yH(e)})}function yH(t){return function GIe(t){return 1===t.registrationStatus&&t.registrationTime+sH<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function PD(){return(PD=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function qIe(t,{fid:e}){return`${pD(t)}/${e}/authTokens:generate`}(t,n),i=function dH(t,{refreshToken:e}){const n=lH(t);return n.append("Authorization",function DIe(t){return`${aH} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:oH,appId:t.appId}})},u=yield _D(()=>fetch(r,a));if(u.ok)return cH(yield u.json());throw yield gD("Generate Auth Token",u)})).apply(this,arguments)}function kD(t){return ND.apply(this,arguments)}function ND(){return ND=m(function*(t,e=!1){let n;const r=yield Yf(t.appConfig,s=>{if(!IH(s))throw Ys.create("not-registered");const o=s.authToken;if(!e&&function WIe(t){return 2===t.requestStatus&&!function KIe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TIe}(t)}(o))return s;if(1===o.requestStatus)return n=function zIe(t,e){return MD.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ys.create("app-offline");const a=function QIe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function HIe(t,e){return OD.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),ND.apply(this,arguments)}function MD(){return(MD=m(function*(t,e){let n=yield vH(t.appConfig);for(;1===n.authToken.requestStatus;)yield hH(100),n=yield vH(t.appConfig);const r=n.authToken;return 0===r.requestStatus?kD(t,e):r})).apply(this,arguments)}function vH(t){return Yf(t,e=>{if(!IH(e))throw Ys.create("not-registered");return function YIe(t){return 1===t.requestStatus&&t.requestTime+sH<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function OD(){return OD=m(function*(t,e){try{const n=yield function $Ie(t,e){return PD.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield vv(t.appConfig,r),n}catch(n){if(!uH(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield vv(t.appConfig,r)}else yield AD(t.appConfig);throw n}}),OD.apply(this,arguments)}function IH(t){return void 0!==t&&2===t.registrationStatus}function FD(){return(FD=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield DD(e);return r?r.catch(console.error):kD(e).catch(console.error),n.fid})).apply(this,arguments)}function LD(){return LD=m(function*(t,e=!1){const n=t;return yield function ZIe(t){return VD.apply(this,arguments)}(n),(yield kD(n,e)).token}),LD.apply(this,arguments)}function VD(){return(VD=m(function*(t){const{registrationPromise:e}=yield DD(t);e&&(yield e)})).apply(this,arguments)}function jD(t){return Ys.create("missing-app-config-values",{valueName:t})}const EH="installations",iEe=t=>{const e=t.getProvider("app").getImmediate(),n=function nEe(t){if(!t||!t.options)throw jD("App Configuration");if(!t.name)throw jD("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jD(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:yv(e,"heartbeat"),_delete:()=>Promise.resolve()}},sEe=t=>{const n=yv(t.getProvider("app").getImmediate(),EH).getImmediate();return{getId:()=>function XIe(t){return FD.apply(this,arguments)}(n),getToken:i=>function JIe(t){return LD.apply(this,arguments)}(n,i)}};(function oEe(){an(new Kt(EH,iEe,"PUBLIC")),an(new Kt("installations-internal",sEe,"PRIVATE"))})(),dt(iH,fD),dt(iH,fD,"esm2017");const GD="@firebase/remote-config",Fr=new Jr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _Ee{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function yEe(t=navigator){return t.languages&&t.languages[0]||t.language}class vEe{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:yEe()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const I=new Error("The operation was aborted.");I.name="AbortError",y(I)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(v){let y="fetch-client-network";throw"AbortError"===v?.name&&(y="fetch-timeout"),Fr.create(y,{originalErrorMessage:v?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,_;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw Fr.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=v.entries,_=v.state}if("INSTANCE_STATE_UNSPECIFIED"===_?f=500:"NO_CHANGE"===_?f=304:("NO_TEMPLATE"===_||"EMPTY_CONFIG"===_)&&(g={}),304!==f&&200!==f)throw Fr.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class TEe{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function IEe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Fr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function EEe(t){if(!(t instanceof Yn&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+Kb(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class CEe{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ev(t,e){const n=t.target.error||void 0;return Fr.create(e,{originalErrorMessage:n&&n?.message})}const mu="app_namespace_store";class xEe{constructor(e,n,r,i=function SEe(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Ev(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mu,{keyPath:"compositeKey"})}}catch(n){e(Fr.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([mu],"readonly").objectStore(mu),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(Ev(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Fr.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([mu],"readwrite").objectStore(mu),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(Ev(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Fr.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([mu],"readwrite").objectStore(mu),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(Ev(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Fr.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class REe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function kEe(){return WD.apply(this,arguments)}function WD(){return(WD=m(function*(){if(!lu())return!1;try{return yield Wf()}catch{return!1}})).apply(this,arguments)}!function PEe(){an(new Kt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fr.create("registration-window");if(!lu())throw Fr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Fr.create("registration-project-id");if(!o)throw Fr.create("registration-api-key");if(!a)throw Fr.create("registration-app-id");const u=new xEe(a,r.name,n=n||"firebase"),c=new REe(u),l=new Wo(GD);l.logLevel=pe.ERROR;const d=new vEe(i,os,n,s,o,a),h=new TEe(d,u),f=new _Ee(h,u,c,l),p=new CEe(r,f,c,u,l);return function pEe(t){const e=Lt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),dt(GD,"0.4.4"),dt(GD,"0.4.4","esm2017")}();const NEe=(t,e)=>e.some(n=>t instanceof n);let CH,bH;const DH=new WeakMap,KD=new WeakMap,SH=new WeakMap,QD=new WeakMap,YD=new WeakMap;let XD={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return KD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||SH.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function BEe(t){return"function"==typeof t?function UEe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function OEe(){return bH||(bH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(JD(this),e),Xs(DH.get(this))}:function(...e){return Xs(t.apply(JD(this),e))}:function(e,...n){const r=t.call(JD(this),e,...n);return SH.set(r,e.sort?e.sort():[e]),Xs(r)}}(t):(t instanceof IDBTransaction&&function LEe(t){if(KD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});KD.set(t,e)}(t),NEe(t,function MEe(){return CH||(CH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,XD):t)}function Xs(t){if(t instanceof IDBRequest)return function FEe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DH.set(n,t)}).catch(()=>{}),YD.set(e,t),e}(t);if(QD.has(t))return QD.get(t);const e=BEe(t);return e!==t&&(QD.set(t,e),YD.set(e,t)),e}const JD=t=>YD.get(t);function xH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Xs(o.result),u.oldVersion,u.newVersion,Xs(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function ZD(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Xs(n).then(()=>{})}const jEe=["get","getKey","getAll","getAllKeys","count"],GEe=["put","add","delete","clear"],eS=new Map;function RH(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(eS.get(e))return eS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GEe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!jEe.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return eS.set(e,s),s}!function VEe(t){XD=t(XD)}(t=>({...t,get:(e,n,r)=>RH(e,n)||t.get(e,n,r),has:(e,n)=>!!RH(e,n)||t.has(e,n)}));const $Ee="/firebase-messaging-sw.js",qEe="/firebase-cloud-messaging-push-scope",PH="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zEe="https://fcmregistrations.googleapis.com/v1",kH="google.c.a.c_id",HEe="google.c.a.c_l",WEe="google.c.a.ts";var Tv=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Tv||{});function Js(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function YEe(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const tS="fcm_token_details_db",XEe=5,NH="fcm_token_object_Store";function nS(){return nS=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(tS))return null;let e=null;return(yield xH(tS,XEe,{upgrade:(r=m(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(NH))return;const c=a.objectStore(NH),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Js(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Js(d.auth),p256dh:Js(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Js(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Js(d.auth),p256dh:Js(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Js(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield ZD(tS),yield ZD("fcm_vapid_details_db"),yield ZD("undefined"),function ZEe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),nS.apply(this,arguments)}const eTe="firebase-messaging-database",tTe=1,_u="firebase-messaging-store";let rS=null;function iS(){return rS||(rS=xH(eTe,tTe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(_u)}})),rS}function MH(t){return sS.apply(this,arguments)}function sS(){return sS=m(function*(t){const e=cS(t),r=yield(yield iS()).transaction(_u).objectStore(_u).get(e);if(r)return r;{const i=yield function JEe(t){return nS.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield oS(t,i),i}}),sS.apply(this,arguments)}function oS(t,e){return aS.apply(this,arguments)}function aS(){return(aS=m(function*(t,e){const n=cS(t),i=(yield iS()).transaction(_u,"readwrite");return yield i.objectStore(_u).put(e,n),yield i.done,e})).apply(this,arguments)}function uS(){return(uS=m(function*(t){const e=cS(t),r=(yield iS()).transaction(_u,"readwrite");yield r.objectStore(_u).delete(e),yield r.done})).apply(this,arguments)}function cS({appConfig:t}){return t.appId}const Mn=new Jr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function iTe(t,e){return lS.apply(this,arguments)}function lS(){return(lS=m(function*(t,e){const n=yield pS(t),r=FH(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(fS(t.appConfig),i)).json()}catch(o){throw Mn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Mn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Mn.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function dS(){return(dS=m(function*(t,e){const n=yield pS(t),r=FH(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${fS(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Mn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Mn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Mn.create("token-update-no-token");return s.token})).apply(this,arguments)}function OH(t,e){return hS.apply(this,arguments)}function hS(){return(hS=m(function*(t,e){const r={method:"DELETE",headers:yield pS(t)};try{const s=yield(yield fetch(`${fS(t.appConfig)}/${e}`,r)).json();if(s.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Mn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function fS({projectId:t}){return`${zEe}/projects/${t}/registrations`}function pS(t){return gS.apply(this,arguments)}function gS(){return(gS=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function FH({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==PH&&(i.web.applicationPubKey=r),i}const oTe=6048e5;function mS(){return mS=m(function*(t){const e=yield function cTe(t,e){return IS.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Js(e.getKey("auth")),p256dh:Js(e.getKey("p256dh"))},r=yield MH(t.firebaseDependencies);if(r){if(function lTe(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+oTe?function uTe(t,e){return yS.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield OH(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return VH(t.firebaseDependencies,n)}return VH(t.firebaseDependencies,n)}),mS.apply(this,arguments)}function _S(){return _S=m(function*(t){const e=yield MH(t.firebaseDependencies);e&&(yield OH(t.firebaseDependencies,e.token),yield function nTe(t){return uS.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),_S.apply(this,arguments)}function yS(){return yS=m(function*(t,e){try{const n=yield function sTe(t,e){return dS.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield oS(t.firebaseDependencies,r),n}catch(n){throw yield function LH(t){return _S.apply(this,arguments)}(t),n}}),yS.apply(this,arguments)}function VH(t,e){return vS.apply(this,arguments)}function vS(){return(vS=m(function*(t,e){const r={token:yield iTe(t,e),createTime:Date.now(),subscriptionOptions:e};return yield oS(t,r),r.token})).apply(this,arguments)}function IS(){return(IS=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:YEe(e)})})).apply(this,arguments)}function UH(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function dTe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function hTe(t,e){e.data&&(t.data=e.data)}(e,t),function fTe(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function BH(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function ES(t){return Mn.create("missing-app-config-values",{valueName:t})}BH("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),BH("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mTe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function gTe(t){if(!t||!t.options)throw ES("App Configuration Object");if(!t.name)throw ES("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ES(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function TS(){return(TS=m(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register($Ee,{scope:qEe}),t.swRegistration.update().catch(()=>{})}catch(e){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function wS(){return(wS=m(function*(t,e){if(!e&&!t.swRegistration&&(yield function jH(t){return TS.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function AS(){return(AS=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=PH)})).apply(this,arguments)}function GH(t,e){return CS.apply(this,arguments)}function CS(){return CS=m(function*(t,e){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield function yTe(t,e){return AS.apply(this,arguments)}(t,e?.vapidKey),yield function _Te(t,e){return wS.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function aTe(t){return mS.apply(this,arguments)}(t)}),CS.apply(this,arguments)}function bS(){return(bS=m(function*(t,e,n){const r=function ITe(t){switch(t){case Tv.NOTIFICATION_CLICKED:return"notification_open";case Tv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[kH],message_name:n[HEe],message_time:n[WEe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function DS(){return DS=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Tv.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(UH(n)):t.onMessageHandler.next(UH(n)));const r=n.data;(function pTe(t){return"object"==typeof t&&!!t&&kH in t})(r)&&"1"===r["google.c.a.e"]&&(yield function vTe(t,e,n){return bS.apply(this,arguments)}(t,n.messageType,r))}),DS.apply(this,arguments)}const $H="@firebase/messaging",TTe=t=>{const e=new mTe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function ETe(t,e){return DS.apply(this,arguments)}(e,n)),e},wTe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>GH(e,r)}};function zH(){return SS.apply(this,arguments)}function SS(){return(SS=m(function*(){try{yield Wf()}catch{return!1}return typeof window<"u"&&lu()&&qb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function DTe(t,e){return RS.apply(this,arguments)}function RS(){return(RS=m(function*(t,e){return GH(t=Lt(t),e)})).apply(this,arguments)}function STe(t,e){return function bTe(t,e){if(!navigator)throw Mn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}(t=Lt(t),e)}!function ATe(){an(new Kt("messaging",TTe,"PUBLIC")),an(new Kt("messaging-internal",wTe,"PRIVATE")),dt($H,"0.12.4"),dt($H,"0.12.4","esm2017")}();const wv="analytics",xTe="firebase_id",RTe="origin",PTe=6e4,kTe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",PS="https://www.googletagmanager.com/gtag/js",gn=new Wo("@firebase/analytics"),yr=new Jr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function MTe(t){if(!t.startsWith(PS)){const e=yr.create("invalid-gtag-resource",{gtagURL:t});return gn.warn(e.message),""}return t}function HH(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kS(){return(kS=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield HH(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){gn.error(a)}t("config",i,s)})).apply(this,arguments)}function NS(){return(NS=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield HH(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){gn.error(s)}})).apply(this,arguments)}const $Te=30,WH=new class zTe{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function HTe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function MS(){return(MS=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:HTe(r)},s=kTe.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function OS(){return(OS=m(function*(t,e=WH,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw yr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw yr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new XTe;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:PTe),KH({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function KH(t,e,n){return FS.apply(this,arguments)}function FS(){return FS=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=WH){var s;const{appId:o,measurementId:a}=t;try{yield function QTe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function WTe(t){return MS.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function YTe(t){if(!(t instanceof Yn&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?Kb(n,i.intervalMillis,$Te):Kb(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),gn.debug(`Calling attemptFetch again in ${l} millis`),KH(t,d,r,i)}}),FS.apply(this,arguments)}class XTe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let LS,qS;function VS(){return(VS=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function zS(){return(zS=m(function*(){if(!lu())return gn.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Wf()}catch(t){return gn.warn(yr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function HS(){return HS=m(function*(t,e,n,r,i,s,o){var a;const u=function KTe(t){return OS.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&gn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>gn.error(f)),e.push(u);const c=function iwe(){return zS.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function GTe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(PS)&&n.src.includes(t))return n;return null})(s)||function FTe(t,e){const n=function OTe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:MTe}),r=document.createElement("script"),i=`${PS}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),qS&&(i("consent","default",qS),function QH(t){qS=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[RTe]="firebase",h.update=!0,null!=d&&(h[xTe]=d),i("config",l.measurementId,h),LS&&(i("set",LS),function YH(t){LS=t}(void 0)),l.measurementId}),HS.apply(this,arguments)}class owe{constructor(e){this.app=e}_delete(){return delete as[this.app.options.appId],Promise.resolve()}}let as={},XH=[];const JH={};let e9,us,Av="dataLayer",WS=!1;function uwe(t,e,n){!function awe(){const t=[];if(pv()&&t.push("This is a browser extension environment."),qb()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yr.create("invalid-analytics-context",{errorInfo:e});gn.warn(n.message)}}();const r=t.options.appId;if(!r)throw yr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw yr.create("no-api-key");gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=as[r])throw yr.create("already-exists",{id:r});if(!WS){!function LTe(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Av);const{wrappedGtag:s,gtagCore:o}=function jTe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function BTe(t,e,n,r){function s(){return s=m(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function UTe(t,e,n,r,i){return NS.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function VTe(t,e,n,r,i,s){return kS.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){gn.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(as,XH,JH,Av,"gtag");us=s,e9=o,WS=!0}return as[r]=function swe(t,e,n,r,i,s,o){return HS.apply(this,arguments)}(t,XH,JH,e,e9,Av,n),new owe(t)}function lwe(){return KS.apply(this,arguments)}function KS(){return(KS=m(function*(){if(pv()||!qb()||!lu())return!1;try{return yield Wf()}catch{return!1}})).apply(this,arguments)}const t9="@firebase/analytics";!function hwe(){an(new Kt(wv,(e,{options:n})=>uwe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),an(new Kt("analytics-internal",function t(e){try{const n=e.getProvider(wv).getImmediate();return{logEvent:(r,i,s)=>function dwe(t,e,n,r){t=Lt(t),function JTe(t,e,n,r,i){return VS.apply(this,arguments)}(us,as[t.app.options.appId],e,n,r).catch(i=>gn.error(i))}(n,r,i,s)}}catch(n){throw yr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),dt(t9,"0.10.0"),dt(t9,"0.10.0","esm2017")}();class fwe extends br{constructor(e,n){super()}schedule(e,n=0){return this}}const Cv={setInterval(t,e,...n){const{delegate:r}=Cv;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Cv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class r9 extends fwe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Cv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Cv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,yc(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const i9={now:()=>(i9.delegate||Date).now(),delegate:void 0};class Xf{constructor(e,n=Xf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Xf.now=i9.now;class s9 extends Xf{constructor(e,n=Xf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const mwe=new class gwe extends s9{}(class pwe extends r9{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),_we=new s9(r9),ywe=new Jc("7.6.1"),YS="__angularfire_symbol__analyticsIsSupportedValue",XS="__angularfire_symbol__analyticsIsSupported",JS="__angularfire_symbol__remoteConfigIsSupportedValue",ZS="__angularfire_symbol__remoteConfigIsSupported",ex="__angularfire_symbol__messagingIsSupportedValue",tx="__angularfire_symbol__messagingIsSupported";globalThis[XS]||(globalThis[XS]=lwe().then(t=>globalThis[YS]=t).catch(()=>globalThis[YS]=!1)),globalThis[tx]||(globalThis[tx]=zH().then(t=>globalThis[ex]=t).catch(()=>globalThis[ex]=!1)),globalThis[ZS]||(globalThis[ZS]=kEe().then(t=>globalThis[JS]=t).catch(()=>globalThis[JS]=!1));const Zf=(t,e)=>{const n=e?[e]:Wz(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Ml(){}class a9{constructor(e,n=mwe){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class vwe{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ml,{},Ml,Ml)),n.pipe(Nn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Iwe=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new a9(Zone.current)),this.insideAngular=n.run(()=>new a9(Zone.current,_we)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(Z(qe))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function yu(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function vu(t){return yu().ngZone.run(()=>t())}function Twe(t){return yu(),function wwe(t){return function(n){return(n=n.lift(new vwe(t.ngZone))).pipe(zm(t.outsideAngular),qm(t.insideAngular))}}(yu())(t)}const Awe=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),vu(()=>t.apply(void 0,r))},vr=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=vu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ml,{},Ml,Ml)))),r[s]=Awe(r[s],n));const i=function Ewe(t){return yu().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof ut){const s=yu();return i.pipe(zm(s.outsideAngular),qm(s.insideAngular))}return vu(()=>i)}return i instanceof ut?i.pipe(Twe):i instanceof Promise?vu(()=>new Promise((s,o)=>i.then(a=>vu(()=>s(a)),a=>vu(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:vu(()=>i)};class u9{constructor(){return Wz()}}const Swe=function h9(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},f9=new Jr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bv=new Wo("@firebase/auth");function Dv(t,...e){bv.logLevel<=pe.ERROR&&bv.error(`Auth (${os}): ${t}`,...e)}function Lr(t,...e){throw ix(t,...e)}function cs(t,...e){return ix(t,...e)}function ix(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return f9.create(t,...e)}function F(t,e,...n){if(!t)throw ix(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dv(e),new Error(e)}function Xo(t,e){t||ls(e)}function g9(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class tp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xo(n>e,"Short delay should be less than long delay!"),this.isMobile=Mz()||Oz()}get(){return function Rwe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function sx(){return"http:"===g9()||"https:"===g9()}()||pv()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class m9{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nwe=new tp(3e4,6e4);function ht(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function vt(t,e,n,r){return ax.apply(this,arguments)}function ax(){return(ax=m(function*(t,e,n,r,i={}){return _9(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Kf(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),m9.fetch()(y9(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function _9(t,e,n){return ux.apply(this,arguments)}function ux(){return(ux=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kwe),e);try{const i=new Mwe(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw np(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw np(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw np(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw np(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function p9(t,e,n){const r=Object.assign(Object.assign({},Swe()),{[e]:n});return new Jr("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);Lr(t,l)}}catch(i){if(i instanceof Yn)throw i;Lr(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function cx(){return(cx=m(function*(t,e,n,r,i={}){const s=yield vt(t,e,n,r,i);return"mfaPendingCredential"in s&&Lr(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function y9(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function ox(t,e){Xo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class Mwe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),Nwe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function np(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cs(t,e,r);return i.customData._tokenResponse=n,i}function hx(){return(hx=m(function*(t,e){return vt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function px(){return(px=m(function*(t,e){return vt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function rp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gx(){return(gx=m(function*(t,e=!1){const n=Lt(t),r=yield n.getIdToken(e),i=Sv(r);F(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rp(mx(i.auth_time)),issuedAtTime:rp(mx(i.iat)),expirationTime:rp(mx(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function mx(t){return 1e3*Number(t)}function Sv(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Dv("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hf(n);return i?JSON.parse(i):(Dv("Failed to decode base64 JWT payload"),null)}catch(i){return Dv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eo(t,e){return _x.apply(this,arguments)}function _x(){return(_x=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Yn&&function jwe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Gwe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class I9{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rp(this.lastLoginAt),this.creationTime=rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ip(t){return yx.apply(this,arguments)}function yx(){return yx=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield eo(t,function Vwe(t,e){return px.apply(this,arguments)}(n,{idToken:r}));F(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function zwe(t){return t.map(e=>{var{providerId:n}=e,r=vc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function qwe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new I9(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),yx.apply(this,arguments)}function vx(){return(vx=m(function*(t){const e=Lt(t);yield ip(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Ix(){return(Ix=m(function*(t,e){const n=yield _9(t,{},m(function*(){const r=Kf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=y9(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",m9.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class sp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Bwe(t){const e=Sv(t);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return F(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Hwe(t,e){return Ix.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new sp;return r&&(F("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(F("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(F("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sp,this.toJSON())}_performRefresh(){return ls("not implemented")}}function Jo(t,e){F("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Iu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gwe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new I9(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield eo(n,n.stsTokenManager.getToken(n.auth,e));return F(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Uwe(t){return gx.apply(this,arguments)}(this,e)}reload(){return function $we(t){return vx.apply(this,arguments)}(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Iu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield ip(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield eo(e,function Fwe(t,e){return hx.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:I,emailVerified:C,isAnonymous:k,providerData:M,stsTokenManager:ee}=n;F(I&&ee,e,"internal-error");const Ae=sp.fromJSON(this.name,ee);F("string"==typeof I,e,"internal-error"),Jo(d,e.name),Jo(h,e.name),F("boolean"==typeof C,e,"internal-error"),F("boolean"==typeof k,e,"internal-error"),Jo(f,e.name),Jo(p,e.name),Jo(g,e.name),Jo(_,e.name),Jo(v,e.name),Jo(y,e.name);const tn=new Iu({uid:I,auth:e,email:h,emailVerified:C,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Ae,createdAt:v,lastLoginAt:y});return M&&Array.isArray(M)&&(tn.providerData=M.map(Ua=>Object.assign({},Ua))),_&&(tn._redirectEventId=_),tn}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new sp;i.updateFromServerResponse(n);const s=new Iu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ip(s),s})()}}const E9=new Map;function to(t){Xo(t instanceof Function,"Expected a class definition");let e=E9.get(t);return e?(Xo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E9.set(t,e),e)}const T9=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function xv(t,e,n){return`firebase:${t}:${e}:${n}`}class Fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xv(this.userKey,i.apiKey,s),this.fullPersistenceKey=xv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Iu._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new Fl(to(T9),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||to(T9);const o=xv(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=Iu._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Fl(s,e,r)):new Fl(s,e,r)})()}}function w9(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function b9(t=Dt()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function A9(t=Dt()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function S9(t=Dt()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function x9(t=Dt()){return/webos/i.test(t)}(e))return"Webos";if(function Ex(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function C9(t=Dt()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function D9(t=Dt()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function R9(t,e=[]){let n;switch(t){case"Browser":n=w9(Dt());break;case"Worker":n=`${w9(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${os}/${r}`}class Qwe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Tx(){return(Tx=m(function*(t,e={}){return vt(t,"GET","/v2/passwordPolicy",ht(t,e))})).apply(this,arguments)}class Jwe{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(n=u.meetsMinPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(s=u.containsUppercaseLetter)||void 0===s||s),u.isValid&&(u.isValid=null===(o=u.containsNumericCharacter)||void 0===o||o),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Zwe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P9(this),this.idTokenSubscription=new P9(this),this.beforeStateQueue=new Qwe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f9,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=to(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Fl.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return F(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield ip(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Pwe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?Lt(e):null;return r&&F(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&F(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(to(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return m(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return m(function*(){const n=yield function Ywe(t){return Tx.apply(this,arguments)}(e),r=new Jwe(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&to(e)||n._popupRedirectResolver;F(r,n,"argument-error"),n.redirectPersistenceManager=yield Fl.create(n,[to(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(F(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof n){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}{const u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return m(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function xwe(t,...e){bv.logLevel<=pe.WARN&&bv.warn(`Auth (${os}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class P9{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vz(n=>this.observer=n)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class lAe{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}function no(t,e){return jx.apply(this,arguments)}function jx(){return(jx=m(function*(t,e){return function Zs(t,e,n,r){return cx.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",ht(t,e))})).apply(this,arguments)}class Ll extends lAe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=vc(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ll(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return no(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,no(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,no(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kf(n)}return e}}class ea{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class U9 extends ea{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let B9=(()=>{class t extends U9{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Ll._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();function W9(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}(function k9(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new tp(3e4,6e4),new tp(2e3,1e4),new tp(3e4,6e4),new tp(5e3,15e3),encodeURIComponent("fac");var d7="@firebase/auth";class Q0e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function p7(t){return new ut(function(e){return{unsubscribe:W9(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}Nz("authIdTokenMaxAge"),function X0e(t){an(new Kt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;F(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R9(t)},c=new Zwe(r,i,s,u);return function oAe(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(to);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),an(new Kt("auth-internal",e=>{const n=function Qt(t){return Lt(t)}(e.getProvider("auth").getImmediate());return new Q0e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(d7,"1.3.0",function Y0e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),dt(d7,"1.3.0","esm2017")}("Browser");const tCe=function g7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},m7=new Jr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gv=new Wo("@firebase/auth");function $v(t,...e){Gv.logLevel<=pe.ERROR&&Gv.error(`Auth (${os}): ${t}`,...e)}function Vr(t,...e){throw fP(t,...e)}function Zr(t,...e){return fP(t,...e)}function _7(t,e,n){const r=Object.assign(Object.assign({},tCe()),{[e]:n});return new Jr("auth","Firebase",r).create(e,{appName:t.name})}function fP(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m7.create(t,...e)}function O(t,e,...n){if(!t)throw fP(e,...n)}function ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $v(e),new Error(e)}function ro(t,e){t||ds(e)}function y7(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class lp{constructor(e,n){this.shortDelay=e,this.longDelay=n,ro(n>e,"Short delay should be less than long delay!"),this.isMobile=Mz()||Oz()}get(){return function rCe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function pP(){return"http:"===y7()||"https:"===y7()}()||pv()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class v7{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sCe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oCe=new lp(3e4,6e4);function It(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function St(t,e,n,r){return mP.apply(this,arguments)}function mP(){return(mP=m(function*(t,e,n,r,i={}){return I7(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Kf(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),v7.fetch()(E7(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function I7(t,e,n){return _P.apply(this,arguments)}function _P(){return(_P=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sCe),e);try{const i=new aCe(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw dp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw dp(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw dp(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw dp(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _7(t,l,c);Vr(t,l)}}catch(i){if(i instanceof Yn)throw i;Vr(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function yP(){return(yP=m(function*(t,e,n,r,i={}){const s=yield St(t,e,n,r,i);return"mfaPendingCredential"in s&&Vr(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function E7(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function gP(t,e){ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class aCe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),oCe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function vP(){return(vP=m(function*(t,e){return St(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function EP(){return(EP=m(function*(t,e){return St(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function hp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function TP(){return(TP=m(function*(t,e=!1){const n=Lt(t),r=yield n.getIdToken(e),i=qv(r);O(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:hp(wP(i.auth_time)),issuedAtTime:hp(wP(i.iat)),expirationTime:hp(wP(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function wP(t){return 1e3*Number(t)}function qv(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return $v("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hf(n);return i?JSON.parse(i):($v("Failed to decode base64 JWT payload"),null)}catch(i){return $v("Caught error parsing JWT payload as JSON",i?.toString()),null}}function so(t,e){return AP.apply(this,arguments)}function AP(){return(AP=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Yn&&function fCe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class pCe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class T7{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hp(this.lastLoginAt),this.creationTime=hp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fp(t){return CP.apply(this,arguments)}function CP(){return CP=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield so(t,function lCe(t,e){return EP.apply(this,arguments)}(n,{idToken:r}));O(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function _Ce(t){return t.map(e=>{var{providerId:n}=e,r=vc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function mCe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new T7(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),CP.apply(this,arguments)}function bP(){return(bP=m(function*(t){const e=Lt(t);yield fp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function DP(){return(DP=m(function*(t,e){const n=yield I7(t,{},m(function*(){const r=Kf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=E7(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",v7.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class pp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function hCe(t){const e=qv(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return O(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function yCe(t,e){return DP.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pp;return r&&(O("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(O("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(O("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pp,this.toJSON())}_performRefresh(){return ds("not implemented")}}function ta(t,e){O("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class wu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pCe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new T7(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield so(n,n.stsTokenManager.getToken(n.auth,e));return O(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function dCe(t){return TP.apply(this,arguments)}(this,e)}reload(){return function gCe(t){return bP.apply(this,arguments)}(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield fp(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield so(e,function uCe(t,e){return vP.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:I,emailVerified:C,isAnonymous:k,providerData:M,stsTokenManager:ee}=n;O(I&&ee,e,"internal-error");const Ae=pp.fromJSON(this.name,ee);O("string"==typeof I,e,"internal-error"),ta(d,e.name),ta(h,e.name),O("boolean"==typeof C,e,"internal-error"),O("boolean"==typeof k,e,"internal-error"),ta(f,e.name),ta(p,e.name),ta(g,e.name),ta(_,e.name),ta(v,e.name),ta(y,e.name);const tn=new wu({uid:I,auth:e,email:h,emailVerified:C,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Ae,createdAt:v,lastLoginAt:y});return M&&Array.isArray(M)&&(tn.providerData=M.map(Ua=>Object.assign({},Ua))),_&&(tn._redirectEventId=_),tn}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new pp;i.updateFromServerResponse(n);const s=new wu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield fp(s),s})()}}const w7=new Map;function oo(t){ro(t instanceof Function,"Expected a class definition");let e=w7.get(t);return e?(ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w7.set(t,e),e)}const A7=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function zv(t,e,n){return`firebase:${t}:${e}:${n}`}class Bl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zv(this.userKey,i.apiKey,s),this.fullPersistenceKey=zv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?wu._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new Bl(oo(A7),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||oo(A7);const o=zv(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=wu._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Bl(s,e,r)):new Bl(s,e,r)})()}}function C7(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function S7(t=Dt()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function b7(t=Dt()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function R7(t=Dt()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function P7(t=Dt()){return/webos/i.test(t)}(e))return"Webos";if(function SP(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function D7(t=Dt()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function x7(t=Dt()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function k7(t,e=[]){let n;switch(t){case"Browser":n=C7(Dt());break;case"Worker":n=`${C7(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${os}/${r}`}function N7(t,e){return RP.apply(this,arguments)}function RP(){return(RP=m(function*(t,e){return St(t,"GET","/v2/recaptchaConfig",It(t,e))})).apply(this,arguments)}function O7(t){return void 0!==t&&void 0!==t.enterprise}class F7{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}class V7{constructor(e){this.type="recaptcha-enterprise",this.auth=mn(e)}verify(e="verify",n=!1){var r=this;return m(function*(){function s(){return s=m(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=m(function*(c,l){N7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new F7(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;O7(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&O7(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));(function PP(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function TCe(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}class bCe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class DCe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U7(this),this.idTokenSubscription=new U7(this),this.beforeStateQueue=new bCe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=oo(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Bl.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return O(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield fp(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function iCe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?Lt(e):null;return r&&O(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&O(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(oo(e))}))}initializeRecaptchaConfig(){var e=this;return m(function*(){const n=yield N7(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new F7(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new V7(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&oo(e)||n._popupRedirectResolver;O(r,n,"argument-error"),n.redirectPersistenceManager=yield Bl.create(n,[oo(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return O(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return m(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function nCe(t,...e){Gv.logLevel<=pe.WARN&&Gv.warn(`Auth (${os}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function mn(t){return Lt(t)}class U7{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vz(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class NCe{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,n){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}function ao(t,e){return KP.apply(this,arguments)}function KP(){return(KP=m(function*(t,e){return function io(t,e,n,r){return yP.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",It(t,e))})).apply(this,arguments)}class Au{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(function*(){const s=yield wu._fromIdTokenResponse(e,r,i),o=z7(r);return new Ii({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=z7(r);return new Ii({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function z7(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Xv extends Yn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xv.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xv(e,n,r,i)}}function H7(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Xv._fromErrorAndOperation(t,s,e,r):s})}function ik(){return(ik=m(function*(t,e,n=!1){const r=yield so(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ii._forOperation(t,"link",r)})).apply(this,arguments)}function ok(){return(ok=m(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield so(t,H7(r,i,e,t),n);O(s.idToken,r,"internal-error");const o=qv(s.idToken);O(o,r,"internal-error");const{sub:a}=o;return O(t.uid===a,r,"user-mismatch"),Ii._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Vr(r,"user-mismatch"),s}})).apply(this,arguments)}function ak(){return(ak=m(function*(t,e,n=!1){const r="signIn",i=yield H7(t,r,e),s=yield Ii._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function cbe(t){return Lt(t).signOut()}(function L7(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new lp(3e4,6e4);class Qk extends NCe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Obe(t){return function Q7(t,e){return ak.apply(this,arguments)}(t.auth,new Qk(t),t.bypassAuthState)}function Fbe(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),function K7(t,e){return ok.apply(this,arguments)}(n,new Qk(t),t.bypassAuthState)}function Lbe(t){return Yk.apply(this,arguments)}function Yk(){return(Yk=m(function*(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),function rk(t,e){return ik.apply(this,arguments)}(n,new Qk(t),t.bypassAuthState)})).apply(this,arguments)}class Vbe{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(c))}catch(l){n.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Obe;case"linkViaPopup":case"linkViaRedirect":return Lbe;case"reauthViaPopup":case"reauthViaRedirect":return Fbe;default:Vr(this.auth,"internal-error")}}resolve(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ube=new lp(2e3,1e4);function Bbe(t,e,n){return Xk.apply(this,arguments)}function Xk(){return(Xk=m(function*(t,e,n){const r=mn(t);!function Ul(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Vr(t,"argument-error"),_7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Au);const i=function bu(t,e){return e?oo(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,n);return new eN(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let eN=(()=>{class t extends Vbe{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return m(function*(){const r=yield n.execute();return O(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return m(function*(){ro(1===n.filter.length,"Popup operations only handle one event");const r=function Zv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(Zr(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,Ube.get())};n()}}return t.currentPopupAction=null,t})();new lp(3e4,6e4),new lp(5e3,15e3),encodeURIComponent("fac");var p6="@firebase/auth";class ADe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Nz("authIdTokenMaxAge"),function bDe(t){an(new Kt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;O(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k7(t)},c=new DCe(r,i,s,u);return function xCe(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(oo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),an(new Kt("auth-internal",e=>{const n=mn(e.getProvider("auth").getImmediate());return new ADe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(p6,"0.23.2",function CDe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),dt(p6,"0.23.2","esm2017")}("Browser");class vp{constructor(e){return e}}class y6{constructor(){return Zf("auth")}}const v6=vr(p7,!0),NDe=vr(Bbe,!0),MDe=vr(cbe,!0),_N=Pe(t=>!!t);let sI=(()=>{class t{constructor(n,r){this.router=n,this.auth=r,this.canActivate=(i,s)=>{const o=i.data.authGuardPipe||(()=>_N);return v6(this.auth).pipe(su(1),o(i,s),Pe(a=>"boolean"==typeof a?a:Array.isArray(a)?this.router.createUrlTree(a):this.router.parseUrl(a)))}}}return t.\u0275fac=function(n){return new(n||t)(Z(Or),Z(vp))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();const yN=new Map,I6={activated:!1,tokenObservers:[]},VDe={initialized:!1,enabled:!1};function xt(t){return yN.get(t)||Object.assign({},I6)}function oI(){return VDe}const vN="https://content-firebaseappcheck.googleapis.com/v1",GDe="exchangeDebugToken",E6={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class qDe{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new fv,yield function zDe(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new fv,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const On=new Jr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function IN(t){if(!xt(t).activated)throw On.create("use-before-activation",{appName:t.name})}function cI(t,e){return TN.apply(this,arguments)}function TN(){return(TN=m(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw On.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw On.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw On.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw On.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function T6(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vN}/projects/${n}/apps/${r}:${GDe}?key=${i}`,body:{debug_token:e}}}const QDe="firebase-app-check-database",YDe=1,Ip="firebase-app-check-store";let lI=null;function wN(){return(wN=m(function*(t,e){const r=(yield function A6(){return lI||(lI=new Promise((t,e)=>{try{const n=indexedDB.open(QDe,YDe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(On.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ip,{keyPath:"compositeKey"})}}catch(n){e(On.create("storage-open",{originalErrorMessage:n?.message}))}}),lI)}()).transaction(Ip,"readwrite"),s=r.objectStore(Ip).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(On.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const Ep=new Wo("@firebase/app-check");function bN(t,e){return lu()?function JDe(t,e){return function C6(t,e){return wN.apply(this,arguments)}(function D6(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Ep.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function SN(){return oI().enabled}function xN(){return RN.apply(this,arguments)}function RN(){return(RN=m(function*(){const t=oI();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const iSe={error:"UNKNOWN_ERROR"};function sSe(t){return $b.encodeString(JSON.stringify(t),!1)}function dI(t){return PN.apply(this,arguments)}function PN(){return(PN=m(function*(t,e=!1){const n=t.app;IN(n);const r=xt(n);let s,i=r.token;if(i&&!Gl(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Gl(u)?i=u:yield bN(n,void 0))}if(!e&&i&&Gl(i))return{token:i.token};let a,o=!1;if(SN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cI(T6(n,yield xN()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield bN(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield xt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Ep.warn(u.message):Ep.error(u),s=u}return i?s?a=Gl(i)?{token:i.token,internalError:s}:P6(s):(a={token:i.token},r.token=i,yield bN(n,i)):a=P6(s),o&&function R6(t,e){const n=xt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function S6(t){return kN.apply(this,arguments)}function kN(){return(kN=m(function*(t){const e=t.app;IN(e);const{provider:n}=xt(e);if(SN()){const r=yield xN(),{token:i}=yield cI(T6(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function MN(t,e){const n=xt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function x6(t){const{app:e}=t,n=xt(e);let r=n.tokenRefresher;r||(r=function oSe(t){const{app:e}=t;return new qDe(m(function*(){let r;if(r=xt(e).token?yield dI(t,!0):yield dI(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},E6.RETRIAL_MIN_WAIT,E6.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Gl(t){return t.expireTimeMillis-Date.now()>0}function P6(t){return{token:sSe(iSe),error:t}}class aSe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xt(this.app);for(const n of e)MN(this.app,n.next);return Promise.resolve()}}const U6="app-check-internal";!function ESe(){an(new Kt("app-check",t=>function uSe(t,e){return new aSe(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(U6).initialize()})),an(new Kt(U6,t=>function cSe(t){return{getToken:e=>dI(t,e),getLimitedUseToken:()=>S6(t),addTokenListener:e=>function NN(t,e,n,r){const{app:i}=t,s=xt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Gl(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),x6(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>x6(t))}(t,"INTERNAL",e),removeTokenListener:e=>MN(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),dt("@firebase/app-check","0.8.0")}();class j6{constructor(){return Zf("app-check")}}typeof window<"u"&&window;var j,bSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={},UN=UN||{},le=bSe||self;function fI(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var BN="closure_uid_"+(1e9*Math.random()>>>0),SSe=0;function xSe(t,e,n){return t.call.apply(t.bind,arguments)}function RSe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Xn(t,e,n){return(Xn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xSe:RSe).apply(null,arguments)}function pI(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _n(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ra(){this.s=this.s,this.o=this.o}ra.prototype.s=!1,ra.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function DSe(t){Object.prototype.hasOwnProperty.call(t,BN)&&t[BN]||(t[BN]=++SSe)}(this)},ra.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const G6=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function jN(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function $6(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(fI(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Jn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Jn.prototype.h=function(){this.defaultPrevented=!0};var kSe=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function wp(t){return/^[\s\xa0]*$/.test(t)}function gI(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function hs(t){return-1!=gI().indexOf(t)}function GN(t){return GN[" "](t),t}GN[" "]=function(){};var qN,t,MSe=hs("Opera"),$l=hs("Trident")||hs("MSIE"),q6=hs("Edge"),$N=q6||$l,z6=hs("Gecko")&&!(-1!=gI().toLowerCase().indexOf("webkit")&&!hs("Edge"))&&!(hs("Trident")||hs("MSIE"))&&!hs("Edge"),OSe=-1!=gI().toLowerCase().indexOf("webkit")&&!hs("Edge");function H6(){var t=le.document;return t?t.documentMode:void 0}e:{var zN="",HN=(t=gI(),z6?/rv:([^\);]+)(\)|;)/.exec(t):q6?/Edge\/([\d\.]+)/.exec(t):$l?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):OSe?/WebKit\/(\S+)/.exec(t):MSe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(HN&&(zN=HN?HN[1]:""),$l){var WN=H6();if(null!=WN&&WN>parseFloat(zN)){qN=String(WN);break e}}qN=zN}var FSe=le.document&&$l&&(H6()||parseInt(qN,10))||void 0;function Ap(t,e){if(Jn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z6){e:{try{GN(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:LSe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ap.$.h.call(this)}}_n(Ap,Jn);var LSe={2:"touch",3:"pen",4:"mouse"};Ap.prototype.h=function(){Ap.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cp="closure_listenable_"+(1e6*Math.random()|0),VSe=0;function USe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++VSe,this.fa=this.ia=!1}function mI(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function QN(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function K6(t){const e={};for(const n in t)e[n]=t[n];return e}const Q6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y6(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<Q6.length;s++)n=Q6[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _I(t){this.src=t,this.g={},this.h=0}function YN(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=G6(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mI(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function XN(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}_I.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=XN(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new USe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var JN="closure_lm_"+(1e6*Math.random()|0),ZN={};function X6(t,e,n,r,i){if(r&&r.once)return Z6(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)X6(t,e[s],n,r,i);return null}return n=r1(n),t&&t[Cp]?t.O(e,n,Tp(r)?!!r.capture:!!r,i):J6(t,e,n,!1,r,i)}function J6(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Tp(i)?!!i.capture:!!i,a=t1(t);if(a||(t[JN]=a=new _I(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function jSe(){const e=GSe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)kSe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tW(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Z6(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Z6(t,e[s],n,r,i);return null}return n=r1(n),t&&t[Cp]?t.P(e,n,Tp(r)?!!r.capture:!!r,i):J6(t,e,n,!0,r,i)}function eW(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)eW(t,e[s],n,r,i);else r=Tp(r)?!!r.capture:!!r,n=r1(n),t&&t[Cp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=XN(s=t.g[e],n,r,i))&&(mI(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=t1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=XN(e,n,r,i)),(n=-1<t?e[t]:null)&&e1(n))}function e1(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Cp])YN(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tW(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=t1(e))?(YN(n,t),0==n.h&&(n.src=null,e[JN]=null)):mI(t)}}}function tW(t){return t in ZN?ZN[t]:ZN[t]="on"+t}function GSe(t,e){if(t.fa)t=!0;else{e=new Ap(e,this);var n=t.listener,r=t.la||t.src;t.ia&&e1(t),t=n.call(r,e)}return t}function t1(t){return(t=t[JN])instanceof _I?t:null}var n1="__closure_events_fn_"+(1e9*Math.random()>>>0);function r1(t){return"function"==typeof t?t:(t[n1]||(t[n1]=function(e){return t.handleEvent(e)}),t[n1])}function yn(){ra.call(this),this.i=new _I(this),this.S=this,this.J=null}function Fn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Jn(e,t);else if(e instanceof Jn)e.target=e.target||t;else{var i=e;Y6(e=new Jn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=yI(o,r,!0,e)&&i}if(i=yI(o=e.g=t,r,!0,e)&&i,i=yI(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=yI(o=e.g=n[s],r,!1,e)&&i}function yI(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&YN(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_n(yn,ra),yn.prototype[Cp]=!0,yn.prototype.removeEventListener=function(t,e,n,r){eW(this,t,e,n,r)},yn.prototype.N=function(){if(yn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mI(n[r]);delete t.g[e],t.h--}}this.J=null},yn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},yn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var i1=le.JSON.stringify;function qSe(){var t=s1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var nW=new class $Se{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new HSe,t=>t.reset());class HSe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function WSe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function KSe(t){le.setTimeout(()=>{throw t},0)}let bp,Dp=!1,s1=new class zSe{constructor(){this.h=this.g=null}add(e,n){const r=nW.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},rW=()=>{const t=le.Promise.resolve(void 0);bp=()=>{t.then(QSe)}};var QSe=()=>{for(var t;t=qSe();){try{t.h.call(t.g)}catch(n){KSe(n)}var e=nW;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Dp=!1};function vI(t,e){yn.call(this),this.h=t||1,this.g=e||le,this.j=Xn(this.qb,this),this.l=Date.now()}function o1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function a1(t,e,n){if("function"==typeof t)n&&(t=Xn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Xn(t.handleEvent,t)}return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function iW(t){t.g=a1(()=>{t.g=null,t.i&&(t.i=!1,iW(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}_n(vI,yn),(j=vI.prototype).ga=!1,j.T=null,j.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fn(this,"tick"),this.ga&&(o1(this),this.start()))}},j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},j.N=function(){vI.$.N.call(this),o1(this),delete this.g};class YSe extends ra{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iW(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sp(t){ra.call(this),this.h=t,this.g={}}_n(Sp,ra);var sW=[];function oW(t,e,n,r){Array.isArray(n)||(n&&(sW[0]=n.toString()),n=sW);for(var i=0;i<n.length;i++){var s=X6(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function aW(t){QN(t.g,function(e,n){this.g.hasOwnProperty(n)&&e1(e)},t),t.g={}}function II(){this.g=!0}function ql(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function exe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return i1(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Sp.prototype.N=function(){Sp.$.N.call(this),aW(this)},Sp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},II.prototype.Ea=function(){this.g=!1},II.prototype.info=function(){};var Du={},uW=null;function EI(){return uW=uW||new yn}function cW(t){Jn.call(this,Du.Ta,t)}function xp(t){const e=EI();Fn(e,new cW(e))}function lW(t,e){Jn.call(this,Du.STAT_EVENT,t),this.stat=e}function Ir(t){const e=EI();Fn(e,new lW(e,t))}function dW(t,e){Jn.call(this,Du.Ua,t),this.size=e}function Rp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}Du.Ta="serverreachability",_n(cW,Jn),Du.STAT_EVENT="statevent",_n(lW,Jn),Du.Ua="timingevent",_n(dW,Jn);var TI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hW={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function u1(){}function pW(){}u1.prototype.h=null;var d1,Pp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function c1(){Jn.call(this,"d")}function l1(){Jn.call(this,"c")}function wI(){}function kp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Sp(this),this.P=txe,this.V=new vI(t=$N?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gW}function gW(){this.i=null,this.g="",this.h=!1}_n(c1,Jn),_n(l1,Jn),_n(wI,u1),wI.prototype.g=function(){return new XMLHttpRequest},wI.prototype.i=function(){return{}},d1=new wI;var txe=45e3,h1={},AI={};function f1(t,e,n){t.L=1,t.v=SI(uo(e)),t.s=n,t.S=!0,mW(t,null)}function mW(t,e){t.G=Date.now(),Np(t),t.A=uo(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),bW(n.i,"t",r),t.C=0,n=t.l.J,t.h=new gW,t.g=YW(t.l,n?e:null,!t.s),0<t.O&&(t.M=new YSe(Xn(t.Pa,t,t.g),t.O)),oW(t.U,t.g,"readystatechange",t.nb),e=t.I?K6(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),xp(),function XSe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function _W(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function yW(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=nxe(t,n),i==AI){4==e&&(t.o=4,Ir(14),r=!1),ql(t.j,t.m,null,"[Incomplete Response]");break}if(i==h1){t.o=4,Ir(15),ql(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ql(t.j,t.m,i,null),p1(t,i)}_W(t)&&i!=AI&&i!=h1&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ir(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),E1(e),e.M=!0,Ir(11))):(ql(t.j,t.m,n,"[Invalid Chunked Response]"),Su(t),Mp(t))}function nxe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?AI:(n=Number(e.substring(n,r)),isNaN(n)?h1:(r+=1)+n>e.length?AI:(e=e.slice(r,r+n),t.C=r+n,e))}function Np(t){t.Y=Date.now()+t.P,vW(t,t.P)}function vW(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Rp(Xn(t.lb,t),e)}function CI(t){t.B&&(le.clearTimeout(t.B),t.B=null)}function Mp(t){0==t.l.H||t.J||HW(t.l,t)}function Su(t){CI(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,o1(t.V),aW(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function p1(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||g1(n.i,t)))if(!t.K&&g1(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;MI(n),kI(n)}I1(n),Ir(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Rp(Xn(n.ib,n),6e3));if(1>=xW(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ru(n,11)}else if((t.K||n.g==t)&&MI(n),!wp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(m1(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,nt(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=QW(r,r.J?r.pa:null,r.Y),o.K){RW(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(CI(a),Np(a)),r.g=o}else qW(r);0<n.j.length&&NI(n)}else"stop"!=c[0]&&"close"!=c[0]||Ru(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ru(n,7):v1(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}xp()}catch{}}function IW(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(fI(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function ixe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fI(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function rxe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(fI(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(j=kp.prototype).setTimeout=function(t){this.P=t},j.nb=function(t){t=t.target;const e=this.M;e&&3==fs(t)?e.l():this.Pa(t)},j.Pa=function(t){try{if(t==this.g)e:{const l=fs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||$N||this.g&&(this.h.h||this.g.ja()||VW(this.g)))){this.J||4!=l||7==e||xp(),CI(this);var n=this.g.da();this.ca=n;t:if(_W(this)){var r=VW(this.g);t="";var i=r.length,s=4==fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Su(this),Mp(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function JSe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wp(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ir(12),Su(this),Mp(this);break e}ql(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,p1(this,n)}this.S?(yW(this,l,o),$N&&this.i&&3==l&&(oW(this.U,this.V,"tick",this.mb),this.V.start())):(ql(this.j,this.m,o,null),p1(this,o)),4==l&&Su(this),this.i&&!this.J&&(4==l?HW(this.l,this):(this.i=!1,Np(this)))}else(function Txe(t){const e={};t=(t.g&&2<=fs(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(wp(t[r]))continue;var n=WSe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function BSe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ir(12)):(this.o=0,Ir(13)),Su(this),Mp(this)}}}catch{}},j.mb=function(){if(this.g){var t=fs(this.g),e=this.g.ja();this.C<e.length&&(CI(this),yW(this,t,e),this.i&&4!=t&&Np(this))}},j.cancel=function(){this.J=!0,Su(this)},j.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function ZSe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(xp(),Ir(17)),Su(this),this.o=2,Mp(this)):vW(this,this.Y-t)};var EW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xu){this.h=t.h,bI(this,t.j),this.s=t.s,this.g=t.g,DI(this,t.m),this.l=t.l;var e=t.i,n=new Lp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),TW(this,n),this.o=t.o}else t&&(e=String(t).match(EW))?(this.h=!1,bI(this,e[1]||"",!0),this.s=Op(e[2]||""),this.g=Op(e[3]||"",!0),DI(this,e[4]),this.l=Op(e[5]||"",!0),TW(this,e[6]||"",!0),this.o=Op(e[7]||"")):(this.h=!1,this.i=new Lp(null,this.h))}function uo(t){return new xu(t)}function bI(t,e,n){t.j=n?Op(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function DI(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function TW(t,e,n){e instanceof Lp?(t.i=e,function dxe(t,e){e&&!t.j&&(ia(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(AW(this,r),bW(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Fp(e,cxe)),t.i=new Lp(e,t.h))}function nt(t,e,n){t.i.set(e,n)}function SI(t){return nt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Op(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,oxe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oxe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fp(e,wW,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fp(e,wW,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fp(n,"/"==n.charAt(0)?uxe:axe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fp(n,lxe)),t.join("")};var wW=/[#\/\?@]/g,axe=/[#\?:]/g,uxe=/[#\?]/g,cxe=/[#\?@]/g,lxe=/#/g;function Lp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ia(t){t.g||(t.g=new Map,t.h=0,t.i&&function sxe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function AW(t,e){ia(t),e=zl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function CW(t,e){return ia(t),e=zl(t,e),t.g.has(e)}function bW(t,e,n){AW(t,e),0<n.length&&(t.i=null,t.g.set(zl(t,e),jN(n)),t.h+=n.length)}function zl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function DW(t){this.l=t||fxe,t=le.PerformanceNavigationTiming?0<(t=le.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(j=Lp.prototype).add=function(t,e){ia(this),this.i=null,t=zl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},j.forEach=function(t,e){ia(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},j.ta=function(){ia(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},j.Z=function(t){ia(this);let e=[];if("string"==typeof t)CW(this,t)&&(e=e.concat(this.g.get(zl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},j.set=function(t,e){return ia(this),this.i=null,CW(this,t=zl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},j.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var fxe=10;function SW(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xW(t){return t.h?1:t.g?t.g.size:0}function g1(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function m1(t,e){t.g?t.g.add(e):t.h=e}function RW(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function PW(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return jN(t.i)}DW.prototype.cancel=function(){if(this.i=PW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var pxe=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function gxe(){this.g=new pxe}function mxe(t,e,n){const r=n||"";try{IW(t,function(i,s){let o=i;Tp(i)&&(o=i1(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xI(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Vp(t){this.l=t.ec||null,this.j=t.ob||!1}function RI(t,e){yn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=_1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n(Vp,u1),Vp.prototype.g=function(){return new RI(this.l,this.j)},Vp.prototype.i=function(t){return function(){return t}}({}),_n(RI,yn);var _1=0;function kW(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Up(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Bp(t)}function Bp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(j=RI.prototype).open=function(t,e){if(this.readyState!=_1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Bp(this)},j.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Up(this)),this.readyState=_1},j.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Bp(this)),this.g&&(this.readyState=3,Bp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kW(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},j.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Up(this):Bp(this),3==this.readyState&&kW(this)}},j.Za=function(t){this.g&&(this.response=this.responseText=t,Up(this))},j.Ya=function(t){this.g&&(this.response=t,Up(this))},j.ka=function(){this.g&&Up(this)},j.setRequestHeader=function(t,e){this.v.append(t,e)},j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(RI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var yxe=le.JSON.parse;function Rt(t){yn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=NW,this.L=this.M=!1}_n(Rt,yn);var NW="",vxe=/^https?$/i,Ixe=["POST","PUT"];function MW(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,OW(t),PI(t)}function OW(t){t.F||(t.F=!0,Fn(t,"complete"),Fn(t,"error"))}function FW(t){if(t.h&&typeof UN<"u"&&(!t.C[1]||4!=fs(t)||2!=t.da()))if(t.v&&4==fs(t))a1(t.La,0,t);else if(Fn(t,"readystatechange"),4==fs(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(EW)[1]||null;!i&&le.self&&le.self.location&&(i=le.self.location.protocol.slice(0,-1)),r=!vxe.test(i?i.toLowerCase():"")}n=r}if(n)Fn(t,"complete"),Fn(t,"success");else{t.m=6;try{var s=2<fs(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",OW(t)}}finally{PI(t)}}}function PI(t,e){if(t.g){LW(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Fn(t,"ready");try{n.onreadystatechange=r}catch{}}}function LW(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}function fs(t){return t.g?t.g.readyState:0}function VW(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case NW:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function UW(t){let e="";return QN(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function y1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=UW(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):nt(t,e,n))}function jp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function BW(t){this.Ga=0,this.j=[],this.l=new II,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jp("baseRetryDelayMs",5e3,t),this.hb=jp("retryDelaySeedMs",1e4,t),this.eb=jp("forwardChannelMaxRetries",2,t),this.xa=jp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new DW(t&&t.concurrentRequestLimit),this.Ja=new gxe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function v1(t){if(jW(t),3==t.H){var e=t.W++,n=uo(t.I);if(nt(n,"SID",t.K),nt(n,"RID",e),nt(n,"TYPE","terminate"),Gp(t,n),(e=new kp(t,t.l,e)).L=2,e.v=SI(uo(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&((new Image).src=e.v,n=!0),n||(e.g=YW(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Np(e)}KW(t)}function kI(t){t.g&&(E1(t),t.g.cancel(),t.g=null)}function jW(t){kI(t),t.u&&(le.clearTimeout(t.u),t.u=null),MI(t),t.i.cancel(),t.m&&("number"==typeof t.m&&le.clearTimeout(t.m),t.m=null)}function NI(t){if(!SW(t.i)&&!t.m){t.m=!0;var e=t.Na;bp||rW(),Dp||(bp(),Dp=!0),s1.add(e,t),t.C=0}}function GW(t,e){var n;n=e?e.m:t.W++;const r=uo(t.I);nt(r,"SID",t.K),nt(r,"RID",n),nt(r,"AID",t.V),Gp(t,r),t.o&&t.s&&y1(r,t.o,t.s),n=new kp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$W(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),m1(t.i,n),f1(n,r,e)}function Gp(t,e){t.na&&QN(t.na,function(n,r){nt(e,r,n)}),t.h&&IW({},function(n,r){nt(e,r,n)})}function $W(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Xn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{mxe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function qW(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;bp||rW(),Dp||(bp(),Dp=!0),s1.add(e,t),t.A=0}}function I1(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Rp(Xn(t.Ma,t),WW(t,t.A)),t.A++,0))}function E1(t){null!=t.B&&(le.clearTimeout(t.B),t.B=null)}function zW(t){t.g=new kp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=uo(t.wa);nt(e,"RID","rpc"),nt(e,"SID",t.K),nt(e,"AID",t.V),nt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&nt(e,"TO",t.qa),nt(e,"TYPE","xmlhttp"),Gp(t,e),t.o&&t.s&&y1(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=SI(uo(e)),n.s=null,n.S=!0,mW(n,t)}function MI(t){null!=t.v&&(le.clearTimeout(t.v),t.v=null)}function HW(t,e){var n=null;if(t.g==e){MI(t),E1(t),t.g=null;var r=2}else{if(!g1(t.i,e))return;n=e.F,RW(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Fn(r=EI(),new dW(r,n)),NI(t)}else qW(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function wxe(t,e){return!(xW(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Rp(Xn(t.Na,t,e),WW(t,t.C)),t.C++,0)))}(t,e)||2==r&&I1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ru(t,5);break;case 4:Ru(t,10);break;case 3:Ru(t,6);break;default:Ru(t,2)}}function WW(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ru(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Xn(t.pb,t);n||(n=new xu("//www.google.com/images/cleardot.gif"),le.location&&"http"==le.location.protocol||bI(n,"https"),SI(n)),function _xe(t,e){const n=new II;if(le.Image){const r=new Image;r.onload=pI(xI,n,r,"TestLoadImage: loaded",!0,e),r.onerror=pI(xI,n,r,"TestLoadImage: error",!1,e),r.onabort=pI(xI,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=pI(xI,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ir(2);t.H=0,t.h&&t.h.za(e),KW(t),jW(t)}function KW(t){if(t.H=0,t.ma=[],t.h){const e=PW(t.i);(0!=e.length||0!=t.j.length)&&($6(t.ma,e),$6(t.ma,t.j),t.i.i.length=0,jN(t.j),t.j.length=0),t.h.ya()}}function QW(t,e,n){var r=n instanceof xu?uo(n):new xu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),DI(r,r.m);else{var i=le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new xu(null);r&&bI(s,r),e&&(s.g=e),i&&DI(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&nt(r,n,e),nt(r,"VER",t.ra),Gp(t,r),r}function YW(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rt(n&&t.Ha&&!t.va?new Vp({ob:!0}):t.va)).Oa(t.J),e}function XW(){}function OI(){if($l&&!(10<=Number(FSe)))throw Error("Environmental error: no available transport.")}function ei(t,e){yn.call(this),this.g=new BW(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!wp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Hl(this)}function JW(t){c1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ZW(){l1.call(this),this.status=1}function Hl(t){this.g=t}function Fi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function T1(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Ue(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(j=Rt.prototype).Oa=function(t){this.M=t},j.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():d1.g(),this.C=function fW(t){return t.h||(t.h=t.i())}(this.u?this.u:d1),this.g.onreadystatechange=Xn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void MW(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=le.FormData&&t instanceof le.FormData,!(0<=G6(Ixe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LW(this),0<this.B&&((this.L=function Exe(t){return $l&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xn(this.ua,this)):this.A=a1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){MW(this,s)}},j.ua=function(){typeof UN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fn(this,"timeout"),this.abort(8))},j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Fn(this,"complete"),Fn(this,"abort"),PI(this))},j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),PI(this,!0)),Rt.$.N.call(this)},j.La=function(){this.s||(this.G||this.v||this.l?FW(this):this.kb())},j.kb=function(){FW(this)},j.isActive=function(){return!!this.g},j.da=function(){try{return 2<fs(this)?this.g.status:-1}catch{return-1}},j.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},j.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yxe(e)}},j.Ia=function(){return this.m},j.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(j=BW.prototype).ra=8,j.H=1,j.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new kp(this,this.l,t);let s=this.s;if(this.U&&(s?(s=K6(s),Y6(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$W(this,i,e),nt(n=uo(this.I),"RID",t),nt(n,"CVER",22),this.F&&nt(n,"X-HTTP-Session-Id",this.F),Gp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(UW(s)))+"&"+e:this.o&&y1(n,this.o,s)),m1(this.i,i),this.bb&&nt(n,"TYPE","init"),this.P?(nt(n,"$req",e),nt(n,"SID","null"),i.aa=!0,f1(i,n,null)):f1(i,n,e),this.H=2}}else 3==this.H&&(t?GW(this,t):0==this.j.length||SW(this.i)||GW(this))},j.Ma=function(){if(this.u=null,zW(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Rp(Xn(this.jb,this),t)}},j.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ir(10),kI(this),zW(this))},j.ib=function(){null!=this.v&&(this.v=null,kI(this),I1(this),Ir(19))},j.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ir(2)):(this.l.info("Failed to ping google.com"),Ir(1))},j.isActive=function(){return!!this.h&&this.h.isActive(this)},(j=XW.prototype).Ba=function(){},j.Aa=function(){},j.za=function(){},j.ya=function(){},j.isActive=function(){return!0},j.Va=function(){},OI.prototype.g=function(t,e){return new ei(t,e)},_n(ei,yn),ei.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ir(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=QW(t,null,t.Y),NI(t)},ei.prototype.close=function(){v1(this.g)},ei.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=i1(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&NI(e)},ei.prototype.N=function(){this.g.h=null,delete this.j,v1(this.g),delete this.g,ei.$.N.call(this)},_n(JW,c1),_n(ZW,l1),_n(Hl,XW),Hl.prototype.Ba=function(){Fn(this.g,"a")},Hl.prototype.Aa=function(t){Fn(this.g,new JW(t))},Hl.prototype.za=function(t){Fn(this.g,new ZW)},Hl.prototype.ya=function(){Fn(this.g,"b")},_n(Fi,function Axe(){this.blockSize=-1}),Fi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Fi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)T1(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){T1(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){T1(this,r),i=0;break}}this.h=i,this.i+=e},Fi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Cxe={};function w1(t){return-128<=t&&128>t?function NSe(t,e){var n=Cxe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Ue([0|e],0>e?-1:0)}):new Ue([0|t],0>t?-1:0)}function ps(t){if(isNaN(t)||!isFinite(t))return Wl;if(0>t)return Ln(ps(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=A1;return new Ue(e,0)}var A1=4294967296,Wl=w1(0),C1=w1(1),tK=w1(16777216);function co(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ei(t){return-1==t.h}function Ln(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ue(n,~t.h).add(C1)}function FI(t,e){return t.add(Ln(e))}function LI(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function $p(t,e){this.g=t,this.h=e}function VI(t,e){if(co(e))throw Error("division by zero");if(co(t))return new $p(Wl,Wl);if(Ei(t))return e=VI(Ln(t),e),new $p(Ln(e.g),Ln(e.h));if(Ei(e))return e=VI(t,Ln(e)),new $p(Ln(e.g),e.h);if(30<t.g.length){if(Ei(t)||Ei(e))throw Error("slowDivide_ only works with positive integers.");for(var n=C1,r=e;0>=r.X(t);)n=nK(n),r=nK(r);var i=Kl(n,1),s=Kl(r,1);for(r=Kl(r,2),n=Kl(n,2);!co(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Kl(r,1),n=Kl(n,1)}return e=FI(t,i.R(e)),new $p(i,e)}for(i=Wl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ps(n)).R(e);Ei(o)||0<o.X(t);)o=(s=ps(n-=r)).R(e);co(s)&&(s=C1),i=i.add(s),t=FI(t,o)}return new $p(i,t)}function nK(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ue(n,t.h)}function Kl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ue(i,t.h)}(j=Ue.prototype).ea=function(){if(Ei(this))return-Ln(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:A1+r)*e,e*=A1}return t},j.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(co(this))return"0";if(Ei(this))return"-"+Ln(this).toString(t);for(var e=ps(Math.pow(t,6)),n=this,r="";;){var i=VI(n,e).g,s=((0<(n=FI(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(co(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},j.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},j.X=function(t){return Ei(t=FI(this,t))?-1:co(t)?0:1},j.abs=function(){return Ei(this)?Ln(this):this},j.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Ue(n,-2147483648&n[n.length-1]?-1:0)},j.R=function(t){if(co(this)||co(t))return Wl;if(Ei(this))return Ei(t)?Ln(this).R(Ln(t)):Ln(Ln(this).R(t));if(Ei(t))return Ln(this.R(Ln(t)));if(0>this.X(tK)&&0>t.X(tK))return ps(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,LI(n,2*r+2*i),n[2*r+2*i+1]+=s*u,LI(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,LI(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,LI(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ue(n,0)},j.gb=function(t){return VI(this,t).h},j.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ue(n,this.h&t.h)},j.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ue(n,this.h|t.h)},j.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ue(n,this.h^t.h)},OI.prototype.createWebChannel=OI.prototype.g,ei.prototype.send=ei.prototype.u,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,TI.NO_ERROR=0,TI.TIMEOUT=8,TI.HTTP_ERROR=6,hW.COMPLETE="complete",pW.EventType=Pp,Pp.OPEN="a",Pp.CLOSE="b",Pp.ERROR="c",Pp.MESSAGE="d",yn.prototype.listen=yn.prototype.O,Rt.prototype.listenOnce=Rt.prototype.P,Rt.prototype.getLastError=Rt.prototype.Sa,Rt.prototype.getLastErrorCode=Rt.prototype.Ia,Rt.prototype.getStatus=Rt.prototype.da,Rt.prototype.getResponseJson=Rt.prototype.Wa,Rt.prototype.getResponseText=Rt.prototype.ja,Rt.prototype.send=Rt.prototype.ha,Rt.prototype.setWithCredentials=Rt.prototype.Oa,Fi.prototype.digest=Fi.prototype.l,Fi.prototype.reset=Fi.prototype.reset,Fi.prototype.update=Fi.prototype.j,Ue.prototype.add=Ue.prototype.add,Ue.prototype.multiply=Ue.prototype.R,Ue.prototype.modulo=Ue.prototype.gb,Ue.prototype.compare=Ue.prototype.X,Ue.prototype.toNumber=Ue.prototype.ea,Ue.prototype.toString=Ue.prototype.toString,Ue.prototype.getBits=Ue.prototype.D,Ue.fromNumber=ps,Ue.fromString=function eK(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Ln(eK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ps(Math.pow(e,8)),r=Wl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ps(Math.pow(e,s)),r=r.R(s).add(ps(o))):r=(r=r.R(n)).add(ps(o))}return r};var bxe=Oi.createWebChannelTransport=function(){return new OI},Dxe=Oi.getStatEventTarget=function(){return EI()},b1=Oi.ErrorCode=TI,Sxe=Oi.EventType=hW,xxe=Oi.Event=Du,rK=Oi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},UI=(Oi.FetchXmlHttpFactory=Vp,Oi.WebChannel=pW),Rxe=Oi.XhrIo=Rt,Pxe=Oi.Md5=Fi,Ql=Oi.Integer=Ue;const iK="@firebase/firestore";class vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Yl="10.5.0";const sa=new Wo("@firebase/firestore");function Xl(){return sa.logLevel}function S(t,...e){if(sa.logLevel<=pe.DEBUG){const n=e.map(D1);sa.debug(`Firestore (${Yl}): ${t}`,...n)}}function Vt(t,...e){if(sa.logLevel<=pe.ERROR){const n=e.map(D1);sa.error(`Firestore (${Yl}): ${t}`,...n)}}function ti(t,...e){if(sa.logLevel<=pe.WARN){const n=e.map(D1);sa.warn(`Firestore (${Yl}): ${t}`,...n)}}function D1(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function z(t="Unexpected state"){const e=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: `+t;throw Vt(e),new Error(e)}function K(t,e){t||z()}function L(t,e){return t}const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class sK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kxe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class Mxe{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new un;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new un,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new un)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K("string"==typeof r.accessToken),new sK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new vn(e)}}class Oxe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fxe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Oxe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,S("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K("string"==typeof n.token),this.R=n.token,new oK(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Vxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class aK{static V(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Vxe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Et(0,0))}static max(){return new Y(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qp{constructor(e,n,r){void 0===n?n=0:n>e.length&&z(),void 0===r?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===qp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends qp{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const Uxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends qp{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return Uxe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new x(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new x(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new x(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new x(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}class V{constructor(e){this.path=e}static fromPath(e){return new V(De.fromString(e))}static fromName(e){return new V(De.fromString(e).popFirst(5))}static empty(){return new V(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===De.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new De(e.slice()))}}function lK(t){return new ni(t.readTime,t.key,-1)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(Y.min(),V.empty(),-1)}static max(){return new ni(Y.max(),V.empty(),-1)}}function x1(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=V.comparator(t.documentKey,e.documentKey),0!==n?n:oe(t.largestBatchId,e.largestBatchId))}const dK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gxe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oa(t){return R1.apply(this,arguments)}function R1(){return R1=m(function*(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==dK)throw t;S("LocalStore","Unexpectedly lost primary lease")}),R1.apply(this,arguments)}class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(i=>i?E.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new E((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new E((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function aa(t){return"IndexedDbTransactionError"===t.name}let ri=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this._e&&this._e(n),n}}return t.ae=-1,t})();function Hp(t){return null==t}function Wp(t){return 0===t&&1/t==-1/0}function IK(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class Ze{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new GI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new GI(this.root,e,this.comparator,!1)}getReverseIterator(){return new GI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new GI(this.root,e,this.comparator,!0)}}class GI{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=i??Vn.EMPTY,this.right=s??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1,Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class He{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new TK(this.data.getIterator())}getIteratorFrom(e){return new TK(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class TK{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ur{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Ur([])}unionWith(e){let n=new He(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class wK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wK("Invalid base64 string: "+s):s}}(e);return new cn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const dRe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(t){if(K(!!t),"string"==typeof t){let e=0;const n=dRe.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lo(t){return"string"==typeof t?cn.fromBase64String(t):cn.fromUint8Array(t)}function $I(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qI(t){const e=t.mapValue.fields.__previous_value__;return $I(e)?qI(e):e}function Kp(t){const e=ca(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}class hRe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Mu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}const la={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function da(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$I(t)?4:DK(t)?9007199254740991:10:z()}function ms(t,e){if(t===e)return!0;const n=da(t);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kp(t).isEqual(Kp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ca(i.timestampValue),a=ca(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,lo(t.bytesValue).isEqual(lo(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Pt(i.geoPointValue.latitude)===Pt(s.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pt(i.integerValue)===Pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Pt(i.doubleValue),a=Pt(s.doubleValue);return o===a?Wp(o)===Wp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IK(o)!==IK(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!ms(o[u],a[u])))return!1;return!0}(t,e);default:return z()}var s}function Qp(t,e){return void 0!==(t.values||[]).find(n=>ms(n,e))}function ha(t,e){if(t===e)return 0;const n=da(t),r=da(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Pt(s.integerValue||s.doubleValue),u=Pt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return AK(t.timestampValue,e.timestampValue);case 4:return AK(Kp(t),Kp(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=lo(s),u=lo(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=oe(a[c],u[c]);if(0!==l)return l}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Pt(s.latitude),Pt(o.latitude));return 0!==a?a:oe(Pt(s.longitude),Pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=ha(a[c],u[c]);if(l)return l}return oe(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===la.mapValue&&o===la.mapValue)return 0;if(s===la.mapValue)return 1;if(o===la.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=oe(u[d],l[d]);if(0!==h)return h;const f=ha(a[u[d]],c[l[d]]);if(0!==f)return f}return oe(u.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function AK(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oe(t,e);const n=ca(t),r=ca(e),i=oe(n.seconds,r.seconds);return 0!==i?i:oe(n.nanos,r.nanos)}function nd(t){return N1(t)}function N1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ca(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lo(t.bytesValue).toBase64():"referenceValue"in t?V.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=N1(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${N1(n.fields[o])}`;return i+"}"}(t.mapValue):z()}function M1(t){return!!t&&"integerValue"in t}function Yp(t){return!!t&&"arrayValue"in t}function CK(t){return!!t&&"nullValue"in t}function bK(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function WI(t){return!!t&&"mapValue"in t}function Xp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ua(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DK(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!WI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xp(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());WI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];WI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ua(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Un(Xp(this.value))}}class rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,Y.min(),Y.min(),Y.min(),Un.empty(),0)}static newFoundDocument(e,n,r,i){return new rt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new rt(e,2,n,Y.min(),Y.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,Y.min(),Y.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fa{constructor(e,n){this.position=e,this.inclusive=n}}function PK(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?V.comparator(V.fromName(o.referenceValue),n.key):ha(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function kK(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ms(t.position[n],e.position[n]))return!1;return!0}class Jp{constructor(e,n="asc"){this.field=e,this.dir=n}}function gRe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class NK{}class Ie extends NK{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new mRe(e,n,r):"array-contains"===n?new vRe(e,r):"in"===n?new UK(e,r):"not-in"===n?new IRe(e,r):"array-contains-any"===n?new ERe(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new _Re(e,r):new yRe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ha(n,this.value)):null!==n&&da(this.value)===da(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends NK{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Be(e,n)}matches(e){return rd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function rd(t){return"and"===t.op}function F1(t){return function MK(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}(t)&&rd(t)}function L1(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+nd(t.value);if(F1(t))return t.filters.map(e=>L1(e)).join(",");{const e=t.filters.map(n=>L1(n)).join(",");return`${t.op}(${e})`}}function OK(t,e){return t instanceof Ie?(r=t,(i=e)instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&ms(r.value,i.value)):t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&OK(o,i.filters[a]),!0)}(t,e):void z();var r,i}function LK(t){return t instanceof Ie?`${(n=t).field.canonicalString()} ${n.op} ${nd(n.value)}`:t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(LK).join(" ,")+"}"}(t):"Filter";var n}class mRe extends Ie{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){const n=V.comparator(e.key,this.key);return this.matchesComparison(n)}}class _Re extends Ie{constructor(e,n){super(e,"in",n),this.keys=VK(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yRe extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=VK(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VK(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}class vRe extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&Qp(n.arrayValue,this.value)}}class UK extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Qp(this.value.arrayValue,n)}}class IRe extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Qp(this.value.arrayValue,n)}}class ERe extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qp(this.value.arrayValue,r))}}class TRe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function V1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new TRe(t,e,n,r,i,s,o)}function Fu(t){const e=L(t);if(null===e.le){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>L1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Hp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nd(r)).join(",")),e.le=n}return e.le}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gRe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OK(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kK(t.startAt,e.startAt)&&kK(t.endAt,e.endAt)}function KI(t){return V.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class ho{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Ie=null}}function id(t){return new ho(t)}function $K(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function sd(t){const e=L(t);if(null===e.he){e.he=[];const n=new Set;for(const s of e.explicitOrderBy)e.he.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new He(ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.he.push(new Jp(s,r))}),n.has(ft.keyField().canonicalString())||e.he.push(new Jp(ft.keyField(),r))}return e.he}function Er(t){const e=L(t);return e.Pe||(e.Pe=function qK(t,e){if("F"===t.limitType)return V1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Jp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return V1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,sd(t))),e.Pe}function YI(t,e,n){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eg(t,e){return Zp(Er(t),Er(e))&&t.limitType===e.limitType}function zK(t){return`${Fu(Er(t))}|lt:${t.limitType}`}function od(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LK(i)).join(", ")}]`),Hp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nd(i)).join(",")),`Target(${r})`}(Er(t))}; limitType=${t.limitType})`}function tg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):V.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of sd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const c=PK(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,sd(r),i)||r.endAt&&!function(o,a,u){const c=PK(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,sd(r),i)));var r,i}function WK(t){return(e,n)=>{let r=!1;for(const i of sd(t)){const s=wRe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function wRe(t,e,n){const r=t.field.isKeyField()?V.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return null!==u&&null!==c?ha(u,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function EK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const ARe=new Ze(V.comparator);function Br(){return ARe}const KK=new Ze(V.comparator);function ng(...t){let e=KK;for(const n of t)e=e.insert(n.key,n);return e}function QK(t){let e=KK;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return rg()}function YK(){return rg()}function rg(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}new Ze(V.comparator);const bRe=new He(V.comparator);function me(...t){let e=bRe;for(const n of t)e=e.add(n);return e}const DRe=new He(oe);class XI{constructor(){this._=void 0}}function SRe(t,e,n){return t instanceof ad?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$I(s)&&(s=qI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Lu?t8(t,e):t instanceof Vu?n8(t,e):function(i,s){const o=function e8(t,e){return t instanceof ud?M1(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}(i,s),a=r8(o)+r8(i.Te);return M1(o)&&M1(i.Te)?function JK(t){return{integerValue:""+t}}(a):function XK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wp(e)?"-0":e}}(i.serializer,a)}(t,e)}function xRe(t,e,n){return t instanceof Lu?t8(t,e):t instanceof Vu?n8(t,e):n}class ad extends XI{}class Lu extends XI{constructor(e){super(),this.elements=e}}function t8(t,e){const n=i8(e);for(const r of t.elements)n.some(i=>ms(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vu extends XI{constructor(e){super(),this.elements=e}}function n8(t,e){let n=i8(e);for(const r of t.elements)n=n.filter(i=>!ms(i,r));return{arrayValue:{values:n}}}class ud extends XI{constructor(e,n){super(),this.serializer=e,this.Te=n}}function r8(t){return Pt(t.integerValue||t.doubleValue)}function i8(t){return Yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function JI(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class G1{}function s8(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ld(t.key,pt.none()):new cd(t.key,t.data,pt.none());{const n=t.data,r=Un.empty();let i=new He(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new po(t.key,r,new Ur(i.toArray()),pt.none())}}function kRe(t,e,n){t instanceof cd?function(i,s,o){const a=i.value.clone(),u=u8(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof po?function(i,s,o){if(!JI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=u8(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(a8(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function sg(t,e,n,r){return t instanceof cd?function(s,o,a,u){if(!JI(s.precondition,o))return a;const c=s.value.clone(),l=c8(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof po?function(s,o,a,u){if(!JI(s.precondition,o))return a;const c=c8(s.fieldTransforms,u,o),l=o.data;return l.setAll(a8(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):(a=n,JI(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function o8(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Jl(r,i,(s,o)=>function RRe(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Lu&&i instanceof Lu||r instanceof Vu&&i instanceof Vu?Jl(r.elements,i.elements,ms):r instanceof ud&&i instanceof ud?ms(r.Te,i.Te):r instanceof ad&&i instanceof ad);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class cd extends G1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class po extends G1{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a8(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function u8(t,e,n){const r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xRe(o,a,n[i]))}return r}function c8(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,SRe(s,o,e))}return r}class ld extends G1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kRe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YK();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=s8(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>o8(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>o8(n,r))}}class H1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ORe{constructor(e,n){this.count=e,this.unchangedNames=n}}var Jt,Se;function d8(t){if(void 0===t)return Vt("GRPC error has no .code"),A.UNKNOWN;switch(t){case Jt.OK:return A.OK;case Jt.CANCELLED:return A.CANCELLED;case Jt.UNKNOWN:return A.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return A.INTERNAL;case Jt.UNAVAILABLE:return A.UNAVAILABLE;case Jt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Jt.NOT_FOUND:return A.NOT_FOUND;case Jt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Jt.ABORTED:return A.ABORTED;case Jt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Jt.DATA_LOSS:return A.DATA_LOSS;default:return z()}}(Se=Jt||(Jt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";const FRe=new Ql([4294967295,4294967295],0);function f8(t){const e=function h8(){return new TextEncoder}().encode(t),n=new Pxe;return n.update(e),new Uint8Array(n.digest())}function p8(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ql([n,r],0),new Ql([i,s],0)]}class W1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new og(`Invalid padding: ${n}`);if(r<0)throw new og(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new og(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new og(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ql.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(Ql.fromNumber(r)));return 1===i.compare(FRe)&&(i=new Ql([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const n=f8(e),[r,i]=p8(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new W1(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ee)return;const n=f8(e),[r,i]=p8(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class og extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ag{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ug.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ag(Y.min(),i,new Ze(oe),Br(),me())}}class ug{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ug(r,n,me(),me(),me())}}class eE{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}}class g8{constructor(e,n){this.targetId=e,this.ge=n}}class m8{constructor(e,n,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _8{constructor(){this.pe=0,this.ye=v8(),this.we=cn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get Ce(){return this.be}ve(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=me(),n=me(),r=me();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new ug(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=v8()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1}Le(){this.be=!0,this.Se=!0}}class LRe{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Br(),this.Ke=y8(),this.$e=new Ze(oe)}Ue(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.We(n,e.fe):this.Ge(n,e.key,e.fe);for(const n of e.removedTargetIds)this.Ge(n,e.key,e.fe)}ze(e){this.forEachTarget(e,n=>{const r=this.je(n);switch(e.state){case 0:this.He(n)&&r.ve(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.ve(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.He(n)&&(r.Le(),r.ve(e.resumeToken));break;case 4:this.He(n)&&(this.Je(n),r.ve(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.He(i)&&n(i)})}Ye(e){const n=e.targetId,r=e.ge.count,i=this.Ze(n);if(i){const s=i.target;if(KI(s))if(0===r){const o=new V(s.path);this.Ge(n,o,rt.newNoDocument(o,Y.min()))}else K(1===r);else{const o=this.Xe(n);if(o!==r){const a=this.et(e),u=a?this.tt(a,e,o):1;0!==u&&(this.Je(n),this.$e=this.$e.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}et(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=lo(r).toUint8Array()}catch(u){if(u instanceof wK)return ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new W1(o,i,s)}catch(u){return ti(u instanceof og?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ee?null:a}tt(e,n,r){return n.ge.count===r-this.it(e,n.targetId)?0:2}it(e,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ke.rt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ge(n,s,null),i++)}),i}st(e){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Ze(o);if(a){if(s.current&&KI(a.target)){const u=new V(a.target.path);null!==this.Qe.get(u)||this.ot(o,u)||this.Ge(o,u,rt.newNoDocument(u,e))}s.Ce&&(n.set(o,s.Fe()),s.Me())}});let r=me();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Ze(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new ag(e,n,this.$e,this.Qe,r);return this.Qe=Br(),this.Ke=y8(),this.$e=new Ze(oe),i}We(e,n){if(!this.He(e))return;const r=this.ot(e,n.key)?2:0;this.je(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.Ke=this.Ke.insert(n.key,this._t(n.key).add(e))}Ge(e,n,r){if(!this.He(e))return;const i=this.je(e);this.ot(e,n)?i.xe(n,1):i.Oe(n),this.Ke=this.Ke.insert(n,this._t(n).delete(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}Xe(e){const n=this.je(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.je(e).Ne()}je(e){let n=this.qe.get(e);return n||(n=new _8,this.qe.set(e,n)),n}_t(e){let n=this.Ke.get(e);return n||(n=new He(oe),this.Ke=this.Ke.insert(e,n)),n}He(e){const n=null!==this.Ze(e);return n||S("WatchChangeAggregator","Detected inactive target",e),n}Ze(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.ut(e)}Je(e){this.qe.set(e,new _8),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.Ge(e,n,null)})}ot(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function y8(){return new Ze(V.comparator)}function v8(){return new Ze(V.comparator)}const VRe={asc:"ASCENDING",desc:"DESCENDING"},URe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BRe={and:"AND",or:"OR"};class jRe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K1(t,e){return t.useProto3Json||Hp(e)?e:{value:e}}function Ut(t){return K(!!t),Y.fromTimestamp(function(n){const r=ca(n);return new Et(r.seconds,r.nanos)}(t))}function E8(t){const e=De.fromString(t);return K(R8(e)),e}function ys(t,e){const n=E8(e);if(n.get(1)!==t.databaseId.projectId)throw new x(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(w8(n))}function Y1(t,e){return function Q1(t,e){return(r=t,new De(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}(t.databaseId,e)}function lg(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w8(t){return K(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function b8(t,e){return{documents:[Y1(t,e.path)]}}function J1(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Y1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Y1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return x8(Be.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:pa((d=c).field),direction:WRe(d.dir)};var d})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=K1(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function D8(t){let e=function T8(t){const e=E8(t);return 4===e.length?De.emptyPath():w8(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){K(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){const h=S8(d);return h instanceof Be&&F1(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(h=>{return new Jp(hd((p=h).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;n.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Hp(h)?null:h}(n.limit));let u=null;var d;n.startAt&&(u=new fa((d=n.startAt).values||[],!!d.before));let c=null;return n.endAt&&(c=function(d){return new fa(d.values||[],!d.before)}(n.endAt)),function GK(t,e,n,r,i,s,o,a){return new ho(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function S8(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hd(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hd(n.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hd(n.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hd(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):void 0!==t.fieldFilter?Ie.create(hd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Be.create(n.compositeFilter.filters.map(r=>S8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z();var n}function WRe(t){return VRe[t]}function KRe(t){return URe[t]}function QRe(t){return BRe[t]}function pa(t){return{fieldPath:t.canonicalString()}}function hd(t){return ft.fromServerFormat(t.fieldPath)}function x8(t){return t instanceof Ie?function(n){if("=="===n.op){if(bK(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NAN"}};if(CK(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(bK(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NAN"}};if(CK(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(n.field),op:KRe(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(i=>x8(i));return 1===r.length?r[0]:{compositeFilter:{op:QRe(n.op),filters:r}}}(t):z()}function R8(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class go{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=cn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class P8{constructor(e){this.ct=e}}function Z1(t){const e=D8({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?YI(e,e.limit,"L"):e}class Gu{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Wp(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(lo(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?DK(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):z()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),V.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Gu.bt=new Gu;class iPe{constructor(){this._n=new sM}addToCollectionParentIndex(e,n){return this._n.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}deleteAllFieldIndexes(e){return E.resolve()}createTargetIndexes(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(ni.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class sM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(De.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(De.comparator)).toArray()}}new Uint8Array(0);class er{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class qu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new qu(0)}static Bn(){return new qu(-1)}}class lPe{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fPe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class iQ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&sg(r.mutation,i,Ur.empty(),Et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ng();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Br();const o=rg(),a=rg();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof po)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),sg(l.mutation,c,l.mutation.getFieldMask(),Et.now())):o.set(c.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new fPe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rg();let i=new Ze((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Ur.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||me()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=YK();l.forEach(h=>{if(!s.has(h)){const f=s8(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return V.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function U1(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):E.resolve(_s());let a=-1,u=s;return o.next(c=>E.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?E.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,me())).next(l=>({batchId:a,changes:QK(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=ng();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ng();return this.indexManager.getCollectionParents(e,s).next(a=>E.forEach(a,u=>{const c=(d=n,h=u.child(s),new ho(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const l=c.getKey();null===o.get(l)&&(o=o.insert(l,rt.newInvalidDocument(l)))});let a=ng();return o.forEach((u,c)=>{const l=s.get(u);void 0!==l&&sg(l.mutation,c,Ur.empty(),Et.now()),tg(n,c)&&(a=a.insert(u,c))}),a})}}class pPe{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return E.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:Ut(i.createTime)}),E.resolve();var i}getNamedQuery(e,n){return E.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:Z1(i.bundledQuery),readTime:Ut(i.readTime)}),E.resolve();var i}}class gPe{constructor(){this.overlays=new Ze(V.comparator),this.hr=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return E.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const i=_s(),s=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return E.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=_s(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=_s(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return E.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new H1(n,r));let s=this.hr.get(n);void 0===s&&(s=me(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}class oM{constructor(){this.Pr=new He(En.Ir),this.Tr=new He(En.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new En(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new En(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new V(new De([])),r=new En(n,e),i=new En(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new V(new De([])),r=new En(n,e),i=new En(n,e+1);let s=me();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new En(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class En{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return V.comparator(e.key,n.key)||oe(e.pr,n.pr)}static Er(e,n){return oe(e.pr,n.pr)||V.comparator(e.key,n.key)}}class mPe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new He(En.Ir)}checkEmpty(e){return E.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++;const o=new q1(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new En(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),s=i<0?0:i;return E.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new En(n,0),i=new En(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),E.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(oe);return n.forEach(i=>{const s=new En(i,0),o=new En(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),E.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;V.isDocumentKey(s)||(s=s.child(""));const o=new En(new V(s),0);let a=new He(oe);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},o),E.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){K(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return E.forEach(n.mutations,i=>{const s=new En(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new En(n,0),i=this.wr.firstAfterOrEqual(r);return E.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return E.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class _Pe{constructor(e){this.vr=e,this.docs=new Ze(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rt.newInvalidDocument(i))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Br();const o=n.path,a=new V(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||x1(lK(l),r)<=0||(i.has(l.key)||tg(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return E.resolve(s)}getAllFromCollectionGroup(e,n,r,i){z()}Fr(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yPe(this)}getSize(e){return E.resolve(this.size)}}class yPe extends lPe{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class vPe{constructor(e){this.persistence=e,this.Mr=new fo(n=>Fu(n),Zp),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oM,this.targetCount=0,this.Br=qu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),E.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new qu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.qn(n),E.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),E.waitFor(s).next(()=>i)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),E.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.Nr.containsKey(n))}}class aM{constructor(e,n){this.Lr={},this.overlays={},this.kr=new ri(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new vPe(this),this.indexManager=new iPe,this.remoteDocumentCache=new _Pe(r=>this.referenceDelegate.Kr(r)),this.serializer=new P8(n),this.$r=new pPe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gPe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new mPe(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){S("MemoryPersistence","Starting transaction:",e);const i=new IPe(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return E.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class IPe extends Gxe{constructor(e){super(),this.currentSequenceNumber=e}}class uE{constructor(e){this.persistence=e,this.zr=new oM,this.jr=null}static Hr(e){return new uE(e)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),E.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Jr,r=>{const i=V.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return E.or([()=>E.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class dM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dM(e,n.fromCache,r,i)}}class TPe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oQ{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=8}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new TPe;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Xl()<=pe.DEBUG&&S("QueryEngine","SDK will not create cache indexes for query:",od(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),E.resolve()):(Xl()<=pe.DEBUG&&S("QueryEngine","Query:",od(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Xl()<=pe.DEBUG&&S("QueryEngine","The SDK decides to create cache indexes for query:",od(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(n))):E.resolve())}ji(e,n){if($K(n))return E.resolve(null);let r=Er(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=YI(n,null,"F"),r=Er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,a);return this.Xi(n,c,o,u.readTime)?this.ji(e,YI(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return $K(n)||i.isEqual(Y.min())?E.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?E.resolve(null):(Xl()<=pe.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),od(n)),this.es(e,o,n,function cK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new Et(n+1,0):new Et(n,r));return new ni(i,V.empty(),e)}(i,-1)).next(a=>a))})}Zi(e,n){let r=new He(WK(e));return n.forEach((i,s)=>{tg(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Xl()<=pe.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",od(n)),this.zi.getDocumentsMatchingQuery(e,n,ni.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class wPe{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ze(oe),this.rs=new fo(s=>Fu(s),Zp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iQ(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function uQ(t,e){return hM.apply(this,arguments)}function hM(){return hM=m(function*(t,e){const n=L(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=me();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}),hM.apply(this,arguments)}function cQ(t){const e=L(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function yd(t,e,n){return fM.apply(this,arguments)}function fM(){return fM=m(function*(t,e,n){const r=L(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!aa(o))throw o;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),fM.apply(this,arguments)}function dE(t,e,n){const r=L(t);let i=Y.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){const d=L(u),h=d.rs.get(l);return void 0!==h?E.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,o,Er(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:me())).next(a=>(function fQ(t,e,n){let r=t.ss.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}(r,function HK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,hs:s})))}class yM{constructor(){this.activeTargetIds=function j1(){return DRe}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mQ{constructor(){this.no=new yM,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new yM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xPe{io(e){}shutdown(){}}class _Q{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pE=null;function IM(){return null===pE?pE=268435456+Math.round(2147483648*Math.random()):pE++,"0x"+pE.toString(16)}const RPe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PPe{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const tr="WebChannelConnection";class kPe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=IM(),u=this.bo(n,r);S("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,u,c,i).then(l=>(S("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ti("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Yl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){return`${this.fo}/v1/${r}:${RPe[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=IM();return new Promise((o,a)=>{const u=new Rxe;u.setWithCredentials(!0),u.listenOnce(Sxe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case b1.NO_ERROR:const l=u.getResponseJson();S(tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case b1.TIMEOUT:S(tr,`RPC '${e}' ${s} timed out`),a(new x(A.DEADLINE_EXCEEDED,"Request time out"));break;case b1.HTTP_ERROR:const d=u.getStatus();if(S(tr,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(v)>=0?v:A.UNKNOWN}(f.status);a(new x(p,f.message))}else a(new x(A.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new x(A.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{S(tr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);S(tr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=IM(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bxe(),a=Dxe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");S(tr,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new PPe({lo:_=>{f?S(tr,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(S(tr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),S(tr,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),g=(_,v,y)=>{_.listen(v,I=>{try{y(I)}catch(C){setTimeout(()=>{throw C},0)}})};return g(d,UI.EventType.OPEN,()=>{f||S(tr,`RPC '${e}' stream ${i} transport opened.`)}),g(d,UI.EventType.CLOSE,()=>{f||(f=!0,S(tr,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),g(d,UI.EventType.ERROR,_=>{f||(f=!0,ti(tr,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new x(A.UNAVAILABLE,"The operation could not be completed")))}),g(d,UI.EventType.MESSAGE,_=>{var v;if(!f){const y=_.data[0];K(!!y);const C=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(C){S(tr,`RPC '${e}' stream ${i} received error:`,C);const k=C.status;let M=function(tn){const Ua=Jt[tn];if(void 0!==Ua)return d8(Ua)}(k),ee=C.message;void 0===M&&(M=A.INTERNAL,ee="Unknown error status: "+k+" with message "+C.message),f=!0,p.Vo(new x(M,ee)),d.close()}else S(tr,`RPC '${e}' stream ${i} received:`,y),p.mo(y)}}),g(a,xxe.STAT_EVENT,_=>{_.stat===rK.PROXY?S(tr,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===rK.NOPROXY&&S(tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function gE(){return typeof document<"u"?document:null}function vg(t){return new jRe(t,!0)}class EM{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class NPe{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new EM(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return m(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return m(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return m(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Vt(n.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new x(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo(m(function*(){e.state=0,e.start()}))}__(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MPe extends NPe{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function qRe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:z(),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(K(void 0===l||"string"==typeof l),cn.fromBase64String(l||"")):(K(void 0===l||l instanceof Uint8Array),cn.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=void 0===c.code?A.UNKNOWN:d8(c.code);return new x(l,c.message||"")}(o);n=new m8(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ys(t,r.document.name),s=Ut(r.document.updateTime),o=r.document.createTime?Ut(r.document.createTime):Y.min(),a=new Un({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,s,o,a);n=new eE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ys(t,r.document),s=r.readTime?Ut(r.readTime):Y.min(),o=rt.newNoDocument(i,s);n=new eE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ys(t,r.document);n=new eE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return z();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new ORe(i,s);n=new g8(r.targetId,o)}}var c;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Ut(o.readTime):Y.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=lg(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=KI(u)?{documents:b8(s,u)}:{query:J1(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=function I8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}(s,o.resumeToken);const c=K1(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=function dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(s,o.snapshotVersion.toTimestamp());const c=K1(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function HRe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=lg(this.serializer),n.removeTarget=e,this.t_(n)}}class FPe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new x(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.So(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(A.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(A.UNKNOWN,s.toString())})}terminate(){this.A_=!0}}class VPe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Vt(n),this.g_=!1):S("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class UPe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget(m(function*(){var u;ya(o)&&(S("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(l){const d=L(l);d.v_.add(4),yield vd(d),d.x_.set("Unknown"),d.v_.delete(4),yield Ig(d)}),function c(l){return u.apply(this,arguments)})(o))}))}),this.x_=new VPe(r,i)}}function Ig(t){return wM.apply(this,arguments)}function wM(){return wM=m(function*(t){if(ya(t))for(const e of t.F_)yield e(!0)}),wM.apply(this,arguments)}function vd(t){return AM.apply(this,arguments)}function AM(){return AM=m(function*(t){for(const e of t.F_)yield e(!1)}),AM.apply(this,arguments)}function mE(t,e){const n=L(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),DM(n)?bM(n):Ed(n).Jo()&&CM(n,e))}function Eg(t,e){const n=L(t),r=Ed(n);n.C_.delete(e),r.Jo()&&vQ(n,e),0===n.C_.size&&(r.Jo()?r.Xo():ya(n)&&n.x_.set("Unknown"))}function CM(t,e){if(t.O_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ed(t).c_(e)}function vQ(t,e){t.O_.Ne(e),Ed(t).l_(e)}function bM(t){t.O_=new LRe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.C_.get(e)||null,rt:()=>t.datastore.serializer.databaseId}),Ed(t).start(),t.x_.p_()}function DM(t){return ya(t)&&!Ed(t).Ho()&&t.C_.size>0}function ya(t){return 0===L(t).v_.size}function IQ(t){t.O_=void 0}function BPe(t){return SM.apply(this,arguments)}function SM(){return SM=m(function*(t){t.C_.forEach((e,n)=>{CM(t,e)})}),SM.apply(this,arguments)}function jPe(t,e){return xM.apply(this,arguments)}function xM(){return xM=m(function*(t,e){IQ(t),DM(t)?(t.x_.S_(e),bM(t)):t.x_.set("Unknown")}),xM.apply(this,arguments)}function GPe(t,e,n){return RM.apply(this,arguments)}function RM(){return RM=m(function*(t,e,n){if(t.x_.set("Online"),e instanceof m8&&2===e.state&&e.cause)try{yield(r=m(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _E(t,r)}else if(e instanceof eE?t.O_.Ue(e):e instanceof g8?t.O_.Ye(e):t.O_.ze(e),!n.isEqual(Y.min()))try{const r=yield cQ(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.st(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=s.C_.get(c);l&&s.C_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const l=s.C_.get(u);if(!l)return;s.C_.set(u,l.withResumeToken(cn.EMPTY_BYTE_STRING,l.snapshotVersion)),vQ(s,u);const d=new go(l.target,u,c,l.sequenceNumber);CM(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){S("RemoteStore","Failed to raise snapshot:",r),yield _E(t,r)}var r}),RM.apply(this,arguments)}function _E(t,e,n){return PM.apply(this,arguments)}function PM(){return PM=m(function*(t,e,n){if(!aa(e))throw e;t.v_.add(1),yield vd(t),t.x_.set("Offline"),n||(n=()=>cQ(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){S("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Ig(t)}))}),PM.apply(this,arguments)}function AQ(t,e){return LM.apply(this,arguments)}function LM(){return LM=m(function*(t,e){const n=L(t);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=ya(n);n.v_.add(3),yield vd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Ig(n)}),LM.apply(this,arguments)}function UM(){return UM=m(function*(t,e){const n=L(t);e?(n.v_.delete(2),yield Ig(n)):e||(n.v_.add(2),yield vd(n),n.x_.set("Unknown"))}),UM.apply(this,arguments)}function Ed(t){return t.N_||(t.N_=function(n,r,i){const s=L(n);return s.R_(),new MPe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:BPe.bind(null,t),To:jPe.bind(null,t),u_:GPe.bind(null,t)}),t.F_.push(function(){var e=m(function*(n){n?(t.N_.Zo(),DM(t)?bM(t):t.x_.set("Unknown")):(yield t.N_.stop(),IQ(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}class BM{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new BM(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Td(t,e){if(Vt("AsyncQueue",`${e}: ${t}`),aa(t))return new x(A.UNAVAILABLE,`${e}: ${t}`);throw t}class wd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=ng(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new wd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class CQ{constructor(){this.L_=new Ze(V.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(n):1===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):z():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ad{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ad(e,n,wd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class QPe{constructor(){this.q_=void 0,this.listeners=[]}}class YPe{constructor(){this.queries=new fo(e=>zK(e),eg),this.onlineState="Unknown",this.Q_=new Set}}function GM(){return GM=m(function*(t,e){const n=L(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new QPe),i)try{s.q_=yield n.onListen(r)}catch(o){const a=Td(o,`Initialization of query '${od(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.K_(n.onlineState),s.q_&&e.U_(s.q_)&&zM(n)}),GM.apply(this,arguments)}function qM(){return qM=m(function*(t,e){const n=L(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),qM.apply(this,arguments)}function XPe(t,e){const n=L(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.U_(i)&&(r=!0);o.q_=i}}r&&zM(n)}function JPe(t,e,n){const r=L(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function zM(t){t.Q_.forEach(e=>{e.next()})}class HM{constructor(e,n,r){this.query=e,this.W_=n,this.G_=!1,this.z_=null,this.onlineState="Unknown",this.options=r||{}}U_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.G_?this.j_(e)&&(this.W_.next(e),n=!0):this.H_(e,this.onlineState)&&(this.J_(e),n=!0),this.z_=e,n}onError(e){this.W_.error(e)}K_(e){this.onlineState=e;let n=!1;return this.z_&&!this.G_&&this.H_(this.z_,e)&&(this.J_(this.z_),n=!0),n}H_(e,n){return!e.fromCache||(!this.options.Y_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}j_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.z_&&this.z_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}J_(e){e=Ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.G_=!0,this.W_.next(e)}}class SQ{constructor(e){this.key=e}}class xQ{constructor(e){this.key=e}}class RQ{constructor(e,n){this.query=e,this.sa=n,this.oa=null,this.hasCachedResults=!1,this.current=!1,this._a=me(),this.mutatedKeys=me(),this.aa=WK(e),this.ua=new wd(this.aa)}get ca(){return this.sa}la(e,n){const r=n?n.ha:new CQ,i=n?n.ua:this.ua;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=tg(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.Pa(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.aa(f,u)>0||c&&this.aa(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ua:o,ha:r,Xi:a,mutatedKeys:s}}Pa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ua;this.ua=e.ua,this.mutatedKeys=e.mutatedKeys;const s=e.ha.k_();s.sort((c,l)=>function(h,f){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(h)-p(f)}(c.type,l.type)||this.aa(c.doc,l.doc)),this.Ia(r);const o=n?this.Ta():[],a=0===this._a.size&&this.current?1:0,u=a!==this.oa;return this.oa=a,0!==s.length||u?{snapshot:new Ad(this.query,e.ua,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}K_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ua:this.ua,ha:new CQ,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Ea:[]}}da(e){return!this.sa.has(e)&&!!this.ua.has(e)&&!this.ua.get(e).hasLocalMutations}Ia(e){e&&(e.addedDocuments.forEach(n=>this.sa=this.sa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.sa=this.sa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this._a;this._a=me(),this.ua.forEach(r=>{this.da(r.key)&&(this._a=this._a.add(r.key))});const n=[];return e.forEach(r=>{this._a.has(r)||n.push(new xQ(r))}),this._a.forEach(r=>{e.has(r)||n.push(new SQ(r))}),n}Aa(e){this.sa=e.hs,this._a=me();const n=this.la(e.documents);return this.applyChanges(n,!0)}Ra(){return Ad.fromInitialDocuments(this.query,this.ua,this.mutatedKeys,0===this.oa,this.hasCachedResults)}}class tke{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nke{constructor(e){this.key=e,this.Va=!1}}class rke{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ma={},this.fa=new fo(a=>zK(a),eg),this.ga=new Map,this.pa=new Set,this.ya=new Ze(V.comparator),this.wa=new Map,this.Sa=new oM,this.ba={},this.Da=new Map,this.Ca=qu.Bn(),this.onlineState="Unknown",this.va=void 0}get isPrimaryClient(){return!0===this.va}}function ike(t,e){return WM.apply(this,arguments)}function WM(){return WM=m(function*(t,e){const n=function mO(t){const e=L(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PQ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fke.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ake.bind(null,e),e.ma.u_=XPe.bind(null,e.eventManager),e.ma.Ma=JPe.bind(null,e.eventManager),e}(t);let r,i;const s=n.fa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ra();else{const o=yield function _d(t,e){const n=L(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,E.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new go(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}(n.localStore,Er(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function KM(t,e,n,r,i){return QM.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&mE(n.remoteStore,o)}return i}),WM.apply(this,arguments)}function QM(){return QM=m(function*(t,e,n,r,i){t.Fa=(d,h,f)=>{return(p=m(function*(_,v,y,I){let C=v.view.la(y);C.Xi&&(C=yield dE(_.localStore,v.query,!1).then(({documents:ee})=>v.view.la(ee,C)));const k=I&&I.targetChanges.get(v.targetId),M=v.view.applyChanges(C,_.isPrimaryClient,k);return sO(_,v.targetId,M.Ea),M.snapshot}),function g(_,v,y,I){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield dE(t.localStore,e,!0),o=new RQ(e,s.hs),a=o.la(s.documents),u=ug.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);sO(t,n,c.Ea);const l=new tke(e,n,o);return t.fa.set(e,l),t.ga.has(n)?t.ga.get(n).push(e):t.ga.set(n,[e]),c.snapshot}),QM.apply(this,arguments)}function ske(t,e){return YM.apply(this,arguments)}function YM(){return YM=m(function*(t,e){const n=L(t),r=n.fa.get(e),i=n.ga.get(r.targetId);if(i.length>1)return n.ga.set(r.targetId,i.filter(s=>!eg(s,e))),void n.fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Eg(n.remoteStore,r.targetId),Cd(n,r.targetId)}).catch(oa))):(Cd(n,r.targetId),yield yd(n.localStore,r.targetId,!0))}),YM.apply(this,arguments)}function PQ(t,e){return JM.apply(this,arguments)}function JM(){return JM=m(function*(t,e){const n=L(t);try{const r=yield function CPe(t,e){const n=L(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var g,_,v;null!==e.targetMismatches.get(d)?f=f.withResumeToken(cn.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),_=f,v=l,(0===(g=h).resumeToken.approximateByteSize()||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8||v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(s,f))});let u=Br(),c=me();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function lQ(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Br();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}(s,o,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(Y.min())){const l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return E.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.wa.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Va=!0:i.modifiedDocuments.size>0?K(o.Va):i.removedDocuments.size>0&&(K(o.Va),o.Va=!1))}),yield mo(n,r,e)}catch(r){yield oa(r)}}),JM.apply(this,arguments)}function kQ(t,e,n){const r=L(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.fa.forEach((s,o)=>{const a=o.view.K_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=L(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.listeners)h.K_(a)&&(c=!0)}),c&&zM(u)}(r.eventManager,e),i.length&&r.ma.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ake(t,e,n){return ZM.apply(this,arguments)}function ZM(){return ZM=m(function*(t,e,n){const r=L(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.wa.get(e),s=i&&i.key;if(s){let o=new Ze(V.comparator);o=o.insert(s,rt.newNoDocument(s,Y.min()));const a=me().add(s),u=new ag(Y.min(),new Map,new Ze(oe),o,a);yield PQ(r,u),r.ya=r.ya.remove(s),r.wa.delete(e),oO(r)}else yield yd(r.localStore,e,!1).then(()=>Cd(r,e,n)).catch(oa)}),ZM.apply(this,arguments)}function Cd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ga.get(e))t.fa.delete(r),n&&t.ma.Ma(r,n);t.ga.delete(e),t.isPrimaryClient&&t.Sa.Vr(e).forEach(r=>{t.Sa.containsKey(r)||NQ(t,r)})}function NQ(t,e){t.pa.delete(e.path.canonicalString());const n=t.ya.get(e);null!==n&&(Eg(t.remoteStore,n),t.ya=t.ya.remove(e),t.wa.delete(n),oO(t))}function sO(t,e,n){for(const r of n)r instanceof SQ?(t.Sa.addReference(r.key,e),dke(t,r)):r instanceof xQ?(S("SyncEngine","Document no longer in limbo: "+r.key),t.Sa.removeReference(r.key,e),t.Sa.containsKey(r.key)||NQ(t,r.key)):z()}function dke(t,e){const n=e.key,r=n.path.canonicalString();t.ya.get(n)||t.pa.has(r)||(S("SyncEngine","New document in limbo: "+n),t.pa.add(r),oO(t))}function oO(t){for(;t.pa.size>0&&t.ya.size<t.maxConcurrentLimboResolutions;){const e=t.pa.values().next().value;t.pa.delete(e);const n=new V(De.fromString(e)),r=t.Ca.next();t.wa.set(r,new nke(n)),t.ya=t.ya.insert(n,r),mE(t.remoteStore,new go(Er(id(n.path)),r,"TargetPurposeLimboResolution",ri.ae))}}function mo(t,e,n){return aO.apply(this,arguments)}function aO(){return aO=m(function*(t,e,n){const r=L(t),i=[],s=[],o=[];var a;r.fa.isEmpty()||(r.fa.forEach((a,u)=>{o.push(r.Fa(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=dM.Ki(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.ma.u_(i),yield(a=m(function*(c,l){const d=L(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(l,f=>E.forEach(f.qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>E.forEach(f.Qi,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!aa(h))throw h;S("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.ns.get(f),_=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.ns=d.ns.insert(f,_)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,s))}),aO.apply(this,arguments)}function hke(t,e){return uO.apply(this,arguments)}function uO(){return uO=m(function*(t,e){const n=L(t);if(!n.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const r=yield uQ(n.localStore,e);n.currentUser=e,(s=n).Da.forEach(a=>{a.forEach(u=>{u.reject(new x(A.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Da.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mo(n,r.us)}var s}),uO.apply(this,arguments)}function fke(t,e){const n=L(t),r=n.wa.get(e);if(r&&r.Va)return me().add(r.key);{let i=me();const s=n.ga.get(e);if(!s)return i;for(const o of s){const a=n.fa.get(o);i=i.unionWith(a.view.ca)}return i}}class yE{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.serializer=vg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function aQ(t,e,n,r){return new wPe(t,e,n,r)}(this.persistence,new oQ,e.initialUser,this.serializer)}createPersistence(e){return new aM(uE.Hr,this.serializer)}createSharedClientState(e){return new mQ}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bd{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kQ(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hke.bind(null,r.syncEngine),yield function VM(t,e){return UM.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new YPe}createDatastore(e){const n=vg(e.databaseInfo.databaseId),r=new kPe(e.databaseInfo);return new FPe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>kQ(this.syncEngine,n,0),a=_Q.C()?new _Q:new xPe,new UPe(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){const d=new rke(i,s,o,a,u,c);return l&&(d.va=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(r){const i=L(r);S("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield vd(i),i.M_.shutdown(),i.x_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Na(this.observer.next,e)}error(e){this.observer.error?this.Na(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString())}Ba(){this.muted=!0}Na(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class bke{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=aK.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){S("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Td(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function IE(t,e){return yO.apply(this,arguments)}function yO(){return yO=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield uQ(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),yO.apply(this,arguments)}function vO(t,e){return IO.apply(this,arguments)}function IO(){return IO=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function EO(t){return TO.apply(this,arguments)}(t);S("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>AQ(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>AQ(e.remoteStore,s)),t._onlineComponents=e}),IO.apply(this,arguments)}function TO(){return TO=m(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield IE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function UQ(t){return"FirebaseError"===t.name?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),yield IE(t,new yE)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield IE(t,new yE);return t._offlineComponents}),TO.apply(this,arguments)}function wO(){return wO=m(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield vO(t,t._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield vO(t,new bd))),t._onlineComponents}),wO.apply(this,arguments)}function Sd(t){return CO.apply(this,arguments)}function CO(){return CO=m(function*(t){const e=yield function EE(t){return wO.apply(this,arguments)}(t),n=e.eventManager;return n.onListen=ike.bind(null,e.syncEngine),n.onUnlisten=ske.bind(null,e.syncEngine),n}),CO.apply(this,arguments)}function zQ(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const HQ=new Map;function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function TE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":z()}(t);throw new x(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class YQ{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new x(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new x(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Lke(t,e,n,r){if(!0===e&&!0===r)throw new x(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zQ(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YQ({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new x(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YQ(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new kxe;switch(r.type){case"firstParty":return new Fxe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=HQ.get(n);r&&(S("ComponentProvider","Removing Datastore"),HQ.delete(n),r.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bn(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class vs extends Bn{constructor(e,n,r){super(e,n,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new V(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}class Bke{constructor(){this.Ya=Promise.resolve(),this.Za=[],this.Xa=!1,this.eu=[],this.tu=null,this.nu=!1,this.ru=!1,this.iu=[],this.jo=new EM(this,"async_queue_retry"),this.su=()=>{const n=gE();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=gE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.su)}get isShuttingDown(){return this.Xa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ou(),this._u(e)}enterRestrictedMode(e){if(!this.Xa){this.Xa=!0,this.ru=e||!1;const n=gE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.su)}}enqueue(e){if(this.ou(),this.Xa)return new Promise(()=>{});const n=new un;return this._u(()=>this.Xa&&this.ru?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Za.push(e),this.au()))}au(){var e=this;return m(function*(){if(0!==e.Za.length){try{yield e.Za[0](),e.Za.shift(),e.jo.reset()}catch(n){if(!aa(n))throw n;S("AsyncQueue","Operation failed with retryable error: "+n)}e.Za.length>0&&e.jo.qo(()=>e.au())}})()}_u(e){const n=this.Ya.then(()=>(this.nu=!0,e().catch(r=>{throw this.tu=r,this.nu=!1,Vt("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.nu=!1,r))));return this.Ya=n,n}enqueueAfterDelay(e,n,r){this.ou(),this.iu.indexOf(e)>-1&&(n=0);const i=BM.createAndSchedule(this,e,n,r,s=>this.uu(s));return this.eu.push(i),i}ou(){this.tu&&z()}verifyOperationInProgress(){}cu(){var e=this;return m(function*(){let n;do{n=e.Ya,yield n}while(n!==e.Ya)})()}lu(e){for(const n of this.eu)if(n.timerId===e)return!0;return!1}hu(e){return this.cu().then(()=>{this.eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.eu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.cu()})}Pu(e){this.iu.push(e)}uu(e){const n=this.eu.indexOf(e);this.eu.splice(n,1)}}function DO(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class et extends Tg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Bke,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JQ(this),this._firestoreClient.terminate()}}function JQ(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new hRe(t._databaseId,u,t._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,zQ(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;t._firestoreClient=new bke(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(cn.fromBase64String(e))}catch(n){throw new x(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hu(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new x(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class SO{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}const Qke=new RegExp("[~\\*/\\[\\]]");function CE(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new x(A.INVALID_ARGUMENT,a+t+u)}class kO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yke(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Yke extends kO{data(){return super.data()}}function bE(t,e){return"string"==typeof e?function AE(t,e,n){if(e.search(Qke)>=0)throw CE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xd(...e.split("."))._internalPath}catch{throw CE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof xd?e._internalPath:e._delegate._internalPath}class Jke{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ua(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new SO(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qI(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kp(e));default:return null}}convertTimestamp(e){const n=ca(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);K(R8(r));const i=new Mu(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||Vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kd extends kO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new RE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class RE extends kd{data(e={}){return super.data(e)}}class Nd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ku(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new RE(this._firestore,this._userDataWriter,r.key,r,new Ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new RE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ku(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new RE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ku(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:eNe(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function eNe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class Ia extends Jke{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}!function(e,n=!0){Yl=os,an(new Kt("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new et(new Mxe(r.getProvider("auth-internal")),new Lxe(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new x(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),dt(iK,"4.3.0",e),dt(iK,"4.3.0","esm2017")}();var NE=function(){return NE=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},NE.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var pNe={includeMetadataChanges:!1};function VO(t,e){return void 0===e&&(e=pNe),new ut(function(n){var r=function tNe(t,...e){var n,r,i;t=Lt(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||DO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(DO(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof Bt)c=Ee(t.firestore,et),l=id(t._key.path),u={next:d=>{e[o]&&e[o](function OO(t,e,n){const r=n.docs.get(e._key),i=new Ia(t);return new kd(t,i,e._key,r,new Ku(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ee(t,Bn);c=Ee(d.firestore,et),l=d._query;const h=new Ia(c);u={next:f=>{e[o]&&e[o](new Nd(c,h,d,f))},error:e[o+1],complete:e[o+2]},function dY(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new x(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(h,f,p,g){const _=new vE(g),v=new HM(f,_,p);return h.asyncQueue.enqueueAndForget(m(function*(){return function jM(t,e){return GM.apply(this,arguments)}(yield Sd(h),v)})),()=>{_.Ba(),h.asyncQueue.enqueueAndForget(m(function*(){return function $M(t,e){return qM.apply(this,arguments)}(yield Sd(h),v)}))}}(function jt(t){return t._firestoreClient||JQ(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function ENe(t,e){return void 0===e&&(e={}),function INe(t){return VO(t,{includeMetadataChanges:!0}).pipe(Pe(function(e){return e.docs}))}(t).pipe(Pe(function(n){return n.map(function(r){return function IY(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?NE(NE({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}var G,wNe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vi={},jO=jO||{},de=wNe||self;function ME(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Sg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var GO="closure_uid_"+(1e9*Math.random()>>>0),CNe=0;function bNe(t,e,n){return t.call.apply(t.bind,arguments)}function DNe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function nr(t,e,n){return(nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bNe:DNe).apply(null,arguments)}function OE(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Tn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ea(){this.s=this.s,this.o=this.o}Ea.prototype.s=!1,Ea.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ANe(t){Object.prototype.hasOwnProperty.call(t,GO)&&t[GO]||(t[GO]=++CNe)}(this)},Ea.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const AY=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $O(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CY(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ME(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function rr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}rr.prototype.h=function(){this.defaultPrevented=!0};var xNe=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{de.addEventListener("test",()=>{},e),de.removeEventListener("test",()=>{},e)}catch{}return t}();function xg(t){return/^[\s\xa0]*$/.test(t)}function FE(){var t=de.navigator;return t&&(t=t.userAgent)?t:""}function Is(t){return-1!=FE().indexOf(t)}function qO(t){return qO[" "](t),t}qO[" "]=function(){};var HO,PNe=Is("Opera"),Md=Is("Trident")||Is("MSIE"),bY=Is("Edge"),zO=bY||Md,DY=Is("Gecko")&&!(-1!=FE().toLowerCase().indexOf("webkit")&&!Is("Edge"))&&!(Is("Trident")||Is("MSIE"))&&!Is("Edge"),kNe=-1!=FE().toLowerCase().indexOf("webkit")&&!Is("Edge");function SY(){var t=de.document;return t?t.documentMode:void 0}e:{var WO="",KO=function(){var t=FE();return DY?/rv:([^\);]+)(\)|;)/.exec(t):bY?/Edge\/([\d\.]+)/.exec(t):Md?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):kNe?/WebKit\/(\S+)/.exec(t):PNe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(KO&&(WO=KO?KO[1]:""),Md){var QO=SY();if(null!=QO&&QO>parseFloat(WO)){HO=String(QO);break e}}HO=WO}var NNe=de.document&&Md&&(SY()||parseInt(HO,10))||void 0;function Rg(t,e){if(rr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(DY){e:{try{qO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:MNe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rg.$.h.call(this)}}Tn(Rg,rr);var MNe={2:"touch",3:"pen",4:"mouse"};Rg.prototype.h=function(){Rg.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Pg="closure_listenable_"+(1e6*Math.random()|0),ONe=0;function FNe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++ONe,this.fa=this.ia=!1}function LE(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function XO(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function RY(t){const e={};for(const n in t)e[n]=t[n];return e}const PY="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kY(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<PY.length;s++)n=PY[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function VE(t){this.src=t,this.g={},this.h=0}function JO(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=AY(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(LE(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ZO(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}VE.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ZO(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new FNe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var eF="closure_lm_"+(1e6*Math.random()|0),tF={};function NY(t,e,n,r,i){if(r&&r.once)return OY(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)NY(t,e[s],n,r,i);return null}return n=sF(n),t&&t[Pg]?t.O(e,n,Sg(r)?!!r.capture:!!r,i):MY(t,e,n,!1,r,i)}function MY(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Sg(i)?!!i.capture:!!i,a=rF(t);if(a||(t[eF]=a=new VE(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function VNe(){const e=UNe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xNe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(LY(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function OY(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)OY(t,e[s],n,r,i);return null}return n=sF(n),t&&t[Pg]?t.P(e,n,Sg(r)?!!r.capture:!!r,i):MY(t,e,n,!0,r,i)}function FY(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)FY(t,e[s],n,r,i);else r=Sg(r)?!!r.capture:!!r,n=sF(n),t&&t[Pg]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ZO(s=t.g[e],n,r,i))&&(LE(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=rF(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ZO(e,n,r,i)),(n=-1<t?e[t]:null)&&nF(n))}function nF(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Pg])JO(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(LY(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rF(e))?(JO(n,t),0==n.h&&(n.src=null,e[eF]=null)):LE(t)}}}function LY(t){return t in tF?tF[t]:tF[t]="on"+t}function UNe(t,e){if(t.fa)t=!0;else{e=new Rg(e,this);var n=t.listener,r=t.la||t.src;t.ia&&nF(t),t=n.call(r,e)}return t}function rF(t){return(t=t[eF])instanceof VE?t:null}var iF="__closure_events_fn_"+(1e9*Math.random()>>>0);function sF(t){return"function"==typeof t?t:(t[iF]||(t[iF]=function(e){return t.handleEvent(e)}),t[iF])}function wn(){Ea.call(this),this.i=new VE(this),this.S=this,this.J=null}function jn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new rr(e,t);else if(e instanceof rr)e.target=e.target||t;else{var i=e;kY(e=new rr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=UE(o,r,!0,e)&&i}if(i=UE(o=e.g=t,r,!0,e)&&i,i=UE(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=UE(o=e.g=n[s],r,!1,e)&&i}function UE(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&JO(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Tn(wn,Ea),wn.prototype[Pg]=!0,wn.prototype.removeEventListener=function(t,e,n,r){FY(this,t,e,n,r)},wn.prototype.N=function(){if(wn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)LE(n[r]);delete t.g[e],t.h--}}this.J=null},wn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},wn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var oF=de.JSON.stringify;function jNe(){var t=aF;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var VY=new class BNe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new $Ne,t=>t.reset());class $Ne{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qNe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function zNe(t){de.setTimeout(()=>{throw t},0)}let kg,Ng=!1,aF=new class GNe{constructor(){this.h=this.g=null}add(e,n){const r=VY.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},UY=()=>{const t=de.Promise.resolve(void 0);kg=()=>{t.then(HNe)}};var HNe=()=>{for(var t;t=jNe();){try{t.h.call(t.g)}catch(n){zNe(n)}var e=VY;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ng=!1};function BE(t,e){wn.call(this),this.h=t||1,this.g=e||de,this.j=nr(this.qb,this),this.l=Date.now()}function uF(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function cF(t,e,n){if("function"==typeof t)n&&(t=nr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=nr(t.handleEvent,t)}return 2147483647<Number(e)?-1:de.setTimeout(t,e||0)}function BY(t){t.g=cF(()=>{t.g=null,t.i&&(t.i=!1,BY(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Tn(BE,wn),(G=BE.prototype).ga=!1,G.T=null,G.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jn(this,"tick"),this.ga&&(uF(this),this.start()))}},G.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},G.N=function(){BE.$.N.call(this),uF(this),delete this.g};class WNe extends Ea{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:BY(this)}N(){super.N(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mg(t){Ea.call(this),this.h=t,this.g={}}Tn(Mg,Ea);var jY=[];function GY(t,e,n,r){Array.isArray(n)||(n&&(jY[0]=n.toString()),n=jY);for(var i=0;i<n.length;i++){var s=NY(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $Y(t){XO(t.g,function(e,n){this.g.hasOwnProperty(n)&&nF(e)},t),t.g={}}function jE(){this.g=!0}function Od(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function XNe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return oF(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Mg.prototype.N=function(){Mg.$.N.call(this),$Y(this)},Mg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jE.prototype.Ea=function(){this.g=!1},jE.prototype.info=function(){};var Qu={},qY=null;function GE(){return qY=qY||new wn}function zY(t){rr.call(this,Qu.Ta,t)}function Og(t){const e=GE();jn(e,new zY(e))}function HY(t,e){rr.call(this,Qu.STAT_EVENT,t),this.stat=e}function Tr(t){const e=GE();jn(e,new HY(e,t))}function WY(t,e){rr.call(this,Qu.Ua,t),this.size=e}function Fg(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){t()},e)}Qu.Ta="serverreachability",Tn(zY,rr),Qu.STAT_EVENT="statevent",Tn(HY,rr),Qu.Ua="timingevent",Tn(WY,rr);var $E={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},KY={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function lF(){}function YY(){}lF.prototype.h=null;var fF,Lg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dF(){rr.call(this,"d")}function hF(){rr.call(this,"c")}function qE(){}function Vg(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Mg(this),this.P=JNe,this.V=new BE(t=zO?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new XY}function XY(){this.i=null,this.g="",this.h=!1}Tn(dF,rr),Tn(hF,rr),Tn(qE,lF),qE.prototype.g=function(){return new XMLHttpRequest},qE.prototype.i=function(){return{}},fF=new qE;var JNe=45e3,pF={},zE={};function gF(t,e,n){t.L=1,t.v=QE(_o(e)),t.s=n,t.S=!0,JY(t,null)}function JY(t,e){t.G=Date.now(),Ug(t),t.A=_o(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),uX(n.i,"t",r),t.C=0,n=t.l.J,t.h=new XY,t.g=kX(t.l,n?e:null,!t.s),0<t.O&&(t.M=new WNe(nr(t.Pa,t,t.g),t.O)),GY(t.U,t.g,"readystatechange",t.nb),e=t.I?RY(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Og(),function KNe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function ZY(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function eX(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=ZNe(t,n),i==zE){4==e&&(t.o=4,Tr(14),r=!1),Od(t.j,t.m,null,"[Incomplete Response]");break}if(i==pF){t.o=4,Tr(15),Od(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Od(t.j,t.m,i,null),mF(t,i)}ZY(t)&&i!=zE&&i!=pF&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Tr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wF(e),e.M=!0,Tr(11))):(Od(t.j,t.m,n,"[Invalid Chunked Response]"),Yu(t),Bg(t))}function ZNe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?zE:(n=Number(e.substring(n,r)),isNaN(n)?pF:(r+=1)+n>e.length?zE:(e=e.slice(r,r+n),t.C=r+n,e))}function Ug(t){t.Y=Date.now()+t.P,tX(t,t.P)}function tX(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Fg(nr(t.lb,t),e)}function HE(t){t.B&&(de.clearTimeout(t.B),t.B=null)}function Bg(t){0==t.l.H||t.J||SX(t.l,t)}function Yu(t){HE(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,uF(t.V),$Y(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mF(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||_F(n.i,t)))if(!t.K&&_F(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;tT(n),ZE(n)}TF(n),Tr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Fg(nr(n.ib,n),6e3));if(1>=dX(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ju(n,11)}else if((t.K||n.g==t)&&tT(n),!xg(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yF(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,it(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=PX(r,r.J?r.pa:null,r.Y),o.K){hX(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(HE(a),Ug(a)),r.g=o}else bX(r);0<n.j.length&&eT(n)}else"stop"!=c[0]&&"close"!=c[0]||Ju(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ju(n,7):EF(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Og()}catch{}}function nX(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ME(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function t1e(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ME(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function e1e(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ME(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(G=Vg.prototype).setTimeout=function(t){this.P=t},G.nb=function(t){t=t.target;const e=this.M;e&&3==Es(t)?e.l():this.Pa(t)},G.Pa=function(t){try{if(t==this.g)e:{const l=Es(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||zO||this.g&&(this.h.h||this.g.ja()||IX(this.g)))){this.J||4!=l||7==e||Og(),HE(this);var n=this.g.da();this.ca=n;t:if(ZY(this)){var r=IX(this.g);t="";var i=r.length,s=4==Es(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yu(this),Bg(this);var o="";break t}this.h.i=new de.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function QNe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xg(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Tr(12),Yu(this),Bg(this);break e}Od(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mF(this,n)}this.S?(eX(this,l,o),zO&&this.i&&3==l&&(GY(this.U,this.V,"tick",this.mb),this.V.start())):(Od(this.j,this.m,o,null),mF(this,o)),4==l&&Yu(this),this.i&&!this.J&&(4==l?SX(this.l,this):(this.i=!1,Ug(this)))}else(function v1e(t){const e={};t=(t.g&&2<=Es(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(xg(t[r]))continue;var n=qNe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function LNe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Tr(12)):(this.o=0,Tr(13)),Yu(this),Bg(this)}}}catch{}},G.mb=function(){if(this.g){var t=Es(this.g),e=this.g.ja();this.C<e.length&&(HE(this),eX(this,t,e),this.i&&4!=t&&Ug(this))}},G.cancel=function(){this.J=!0,Yu(this)},G.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function YNe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Og(),Tr(17)),Yu(this),this.o=2,Bg(this)):tX(this,this.Y-t)};var rX=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Xu){this.h=t.h,WE(this,t.j),this.s=t.s,this.g=t.g,KE(this,t.m),this.l=t.l;var e=t.i,n=new $g;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iX(this,n),this.o=t.o}else t&&(e=String(t).match(rX))?(this.h=!1,WE(this,e[1]||"",!0),this.s=jg(e[2]||""),this.g=jg(e[3]||"",!0),KE(this,e[4]),this.l=jg(e[5]||"",!0),iX(this,e[6]||"",!0),this.o=jg(e[7]||"")):(this.h=!1,this.i=new $g(null,this.h))}function _o(t){return new Xu(t)}function WE(t,e,n){t.j=n?jg(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function KE(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iX(t,e,n){e instanceof $g?(t.i=e,function u1e(t,e){e&&!t.j&&(Ta(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(oX(this,r),uX(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Gg(e,o1e)),t.i=new $g(e,t.h))}function it(t,e,n){t.i.set(e,n)}function QE(t){return it(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jg(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,r1e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function r1e(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Gg(e,sX,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Gg(e,sX,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gg(n,"/"==n.charAt(0)?s1e:i1e,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Gg(n,a1e)),t.join("")};var sX=/[#\/\?@]/g,i1e=/[#\?:]/g,s1e=/[#\?]/g,o1e=/[#\?@]/g,a1e=/#/g;function $g(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ta(t){t.g||(t.g=new Map,t.h=0,t.i&&function n1e(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function oX(t,e){Ta(t),e=Fd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function aX(t,e){return Ta(t),e=Fd(t,e),t.g.has(e)}function uX(t,e,n){oX(t,e),0<n.length&&(t.i=null,t.g.set(Fd(t,e),$O(n)),t.h+=n.length)}function Fd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function cX(t){this.l=t||l1e,t=de.PerformanceNavigationTiming?0<(t=de.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(de.g&&de.g.Ka&&de.g.Ka()&&de.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(G=$g.prototype).add=function(t,e){Ta(this),this.i=null,t=Fd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},G.forEach=function(t,e){Ta(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},G.ta=function(){Ta(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},G.Z=function(t){Ta(this);let e=[];if("string"==typeof t)aX(this,t)&&(e=e.concat(this.g.get(Fd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},G.set=function(t,e){return Ta(this),this.i=null,aX(this,t=Fd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},G.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},G.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var l1e=10;function lX(t){return!!t.h||!!t.g&&t.g.size>=t.j}function dX(t){return t.h?1:t.g?t.g.size:0}function _F(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function yF(t,e){t.g?t.g.add(e):t.h=e}function hX(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function fX(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return $O(t.i)}cX.prototype.cancel=function(){if(this.i=fX(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var d1e=class{stringify(t){return de.JSON.stringify(t,void 0)}parse(t){return de.JSON.parse(t,void 0)}};function h1e(){this.g=new d1e}function f1e(t,e,n){const r=n||"";try{nX(t,function(i,s){let o=i;Sg(i)&&(o=oF(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function YE(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qg(t){this.l=t.fc||null,this.j=t.ob||!1}function XE(t,e){wn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vF,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tn(qg,lF),qg.prototype.g=function(){return new XE(this.l,this.j)},qg.prototype.i=function(t){return function(){return t}}({}),Tn(XE,wn);var vF=0;function pX(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function zg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hg(t)}function Hg(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(G=XE.prototype).open=function(t,e){if(this.readyState!=vF)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hg(this)},G.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||de).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zg(this)),this.readyState=vF},G.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hg(this)),this.g&&(this.readyState=3,Hg(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pX(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},G.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zg(this):Hg(this),3==this.readyState&&pX(this)}},G.Za=function(t){this.g&&(this.response=this.responseText=t,zg(this))},G.Ya=function(t){this.g&&(this.response=t,zg(this))},G.ka=function(){this.g&&zg(this)},G.setRequestHeader=function(t,e){this.v.append(t,e)},G.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},G.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(XE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var g1e=de.JSON.parse;function kt(t){wn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gX,this.L=this.M=!1}Tn(kt,wn);var gX="",m1e=/^https?$/i,_1e=["POST","PUT"];function mX(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_X(t),JE(t)}function _X(t){t.F||(t.F=!0,jn(t,"complete"),jn(t,"error"))}function yX(t){if(t.h&&typeof jO<"u"&&(!t.C[1]||4!=Es(t)||2!=t.da()))if(t.v&&4==Es(t))cF(t.La,0,t);else if(jn(t,"readystatechange"),4==Es(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(rX)[1]||null;!i&&de.self&&de.self.location&&(i=de.self.location.protocol.slice(0,-1)),r=!m1e.test(i?i.toLowerCase():"")}n=r}if(n)jn(t,"complete"),jn(t,"success");else{t.m=6;try{var s=2<Es(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",_X(t)}}finally{JE(t)}}}function JE(t,e){if(t.g){vX(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||jn(t,"ready");try{n.onreadystatechange=r}catch{}}}function vX(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(de.clearTimeout(t.A),t.A=null)}function Es(t){return t.g?t.g.readyState:0}function IX(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case gX:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function EX(t){let e="";return XO(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function IF(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=EX(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):it(t,e,n))}function Wg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function TX(t){this.Ga=0,this.j=[],this.l=new jE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wg("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wg("baseRetryDelayMs",5e3,t),this.hb=Wg("retryDelaySeedMs",1e4,t),this.eb=Wg("forwardChannelMaxRetries",2,t),this.xa=Wg("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new cX(t&&t.concurrentRequestLimit),this.Ja=new h1e,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function EF(t){if(wX(t),3==t.H){var e=t.W++,n=_o(t.I);if(it(n,"SID",t.K),it(n,"RID",e),it(n,"TYPE","terminate"),Kg(t,n),(e=new Vg(t,t.l,e)).L=2,e.v=QE(_o(n)),n=!1,de.navigator&&de.navigator.sendBeacon)try{n=de.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&de.Image&&((new Image).src=e.v,n=!0),n||(e.g=kX(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ug(e)}RX(t)}function ZE(t){t.g&&(wF(t),t.g.cancel(),t.g=null)}function wX(t){ZE(t),t.u&&(de.clearTimeout(t.u),t.u=null),tT(t),t.i.cancel(),t.m&&("number"==typeof t.m&&de.clearTimeout(t.m),t.m=null)}function eT(t){if(!lX(t.i)&&!t.m){t.m=!0;var e=t.Na;kg||UY(),Ng||(kg(),Ng=!0),aF.add(e,t),t.C=0}}function AX(t,e){var n;n=e?e.m:t.W++;const r=_o(t.I);it(r,"SID",t.K),it(r,"RID",n),it(r,"AID",t.V),Kg(t,r),t.o&&t.s&&IF(r,t.o,t.s),n=new Vg(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=CX(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yF(t.i,n),gF(n,r,e)}function Kg(t,e){t.na&&XO(t.na,function(n,r){it(e,r,n)}),t.h&&nX({},function(n,r){it(e,r,n)})}function CX(t,e,n){n=Math.min(t.j.length,n);var r=t.h?nr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{f1e(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function bX(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;kg||UY(),Ng||(kg(),Ng=!0),aF.add(e,t),t.A=0}}function TF(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Fg(nr(t.Ma,t),xX(t,t.A)),t.A++,0))}function wF(t){null!=t.B&&(de.clearTimeout(t.B),t.B=null)}function DX(t){t.g=new Vg(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=_o(t.wa);it(e,"RID","rpc"),it(e,"SID",t.K),it(e,"AID",t.V),it(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&it(e,"TO",t.qa),it(e,"TYPE","xmlhttp"),Kg(t,e),t.o&&t.s&&IF(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=QE(_o(e)),n.s=null,n.S=!0,JY(n,t)}function tT(t){null!=t.v&&(de.clearTimeout(t.v),t.v=null)}function SX(t,e){var n=null;if(t.g==e){tT(t),wF(t),t.g=null;var r=2}else{if(!_F(t.i,e))return;n=e.F,hX(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;jn(r=GE(),new WY(r,n)),eT(t)}else bX(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function I1e(t,e){return!(dX(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Fg(nr(t.Na,t,e),xX(t,t.C)),t.C++,0)))}(t,e)||2==r&&TF(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ju(t,5);break;case 4:Ju(t,10);break;case 3:Ju(t,6);break;default:Ju(t,2)}}function xX(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ju(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=nr(t.pb,t);n||(n=new Xu("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||WE(n,"https"),QE(n)),function p1e(t,e){const n=new jE;if(de.Image){const r=new Image;r.onload=OE(YE,n,r,"TestLoadImage: loaded",!0,e),r.onerror=OE(YE,n,r,"TestLoadImage: error",!1,e),r.onabort=OE(YE,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=OE(YE,n,r,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Tr(2);t.H=0,t.h&&t.h.za(e),RX(t),wX(t)}function RX(t){if(t.H=0,t.ma=[],t.h){const e=fX(t.i);(0!=e.length||0!=t.j.length)&&(CY(t.ma,e),CY(t.ma,t.j),t.i.i.length=0,$O(t.j),t.j.length=0),t.h.ya()}}function PX(t,e,n){var r=n instanceof Xu?_o(n):new Xu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),KE(r,r.m);else{var i=de.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Xu(null);r&&WE(s,r),e&&(s.g=e),i&&KE(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&it(r,n,e),it(r,"VER",t.ra),Kg(t,r),r}function kX(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kt(n&&t.Ha&&!t.va?new qg({ob:!0}):t.va)).Oa(t.J),e}function NX(){}function nT(){if(Md&&!(10<=Number(NNe)))throw Error("Environmental error: no available transport.")}function ii(t,e){wn.call(this),this.g=new TX(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xg(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ld(this)}function MX(t){dF.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function OX(){hF.call(this),this.status=1}function Ld(t){this.g=t}function Ui(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function AF(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function je(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(G=kt.prototype).Oa=function(t){this.M=t},G.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fF.g(),this.C=function QY(t){return t.h||(t.h=t.i())}(this.u?this.u:fF),this.g.onreadystatechange=nr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void mX(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=de.FormData&&t instanceof de.FormData,!(0<=AY(_1e,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vX(this),0<this.B&&((this.L=function y1e(t){return Md&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nr(this.ua,this)):this.A=cF(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){mX(this,s)}},G.ua=function(){typeof jO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jn(this,"timeout"),this.abort(8))},G.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,jn(this,"complete"),jn(this,"abort"),JE(this))},G.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),JE(this,!0)),kt.$.N.call(this)},G.La=function(){this.s||(this.G||this.v||this.l?yX(this):this.kb())},G.kb=function(){yX(this)},G.isActive=function(){return!!this.g},G.da=function(){try{return 2<Es(this)?this.g.status:-1}catch{return-1}},G.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},G.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),g1e(e)}},G.Ia=function(){return this.m},G.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(G=TX.prototype).ra=8,G.H=1,G.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Vg(this,this.l,t);let s=this.s;if(this.U&&(s?(s=RY(s),kY(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=CX(this,i,e),it(n=_o(this.I),"RID",t),it(n,"CVER",22),this.F&&it(n,"X-HTTP-Session-Id",this.F),Kg(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(EX(s)))+"&"+e:this.o&&IF(n,this.o,s)),yF(this.i,i),this.bb&&it(n,"TYPE","init"),this.P?(it(n,"$req",e),it(n,"SID","null"),i.aa=!0,gF(i,n,null)):gF(i,n,e),this.H=2}}else 3==this.H&&(t?AX(this,t):0==this.j.length||lX(this.i)||AX(this))},G.Ma=function(){if(this.u=null,DX(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Fg(nr(this.jb,this),t)}},G.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Tr(10),ZE(this),DX(this))},G.ib=function(){null!=this.v&&(this.v=null,ZE(this),TF(this),Tr(19))},G.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Tr(2)):(this.l.info("Failed to ping google.com"),Tr(1))},G.isActive=function(){return!!this.h&&this.h.isActive(this)},(G=NX.prototype).Ba=function(){},G.Aa=function(){},G.za=function(){},G.ya=function(){},G.isActive=function(){return!0},G.Va=function(){},nT.prototype.g=function(t,e){return new ii(t,e)},Tn(ii,wn),ii.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Tr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=PX(t,null,t.Y),eT(t)},ii.prototype.close=function(){EF(this.g)},ii.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=oF(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&eT(e)},ii.prototype.N=function(){this.g.h=null,delete this.j,EF(this.g),delete this.g,ii.$.N.call(this)},Tn(MX,dF),Tn(OX,hF),Tn(Ld,NX),Ld.prototype.Ba=function(){jn(this.g,"a")},Ld.prototype.Aa=function(t){jn(this.g,new MX(t))},Ld.prototype.za=function(t){jn(this.g,new OX)},Ld.prototype.ya=function(){jn(this.g,"b")},Tn(Ui,function E1e(){this.blockSize=-1}),Ui.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ui.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)AF(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){AF(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){AF(this,r),i=0;break}}this.h=i,this.i+=e},Ui.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var T1e={};function CF(t){return-128<=t&&128>t?function RNe(t,e){var n=T1e;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new je([0|e],0>e?-1:0)}):new je([0|t],0>t?-1:0)}function Ts(t){if(isNaN(t)||!isFinite(t))return Vd;if(0>t)return Gn(Ts(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=bF;return new je(e,0)}var bF=4294967296,Vd=CF(0),DF=CF(1),LX=CF(16777216);function yo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ti(t){return-1==t.h}function Gn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new je(n,~t.h).add(DF)}function rT(t,e){return t.add(Gn(e))}function iT(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Qg(t,e){this.g=t,this.h=e}function sT(t,e){if(yo(e))throw Error("division by zero");if(yo(t))return new Qg(Vd,Vd);if(Ti(t))return e=sT(Gn(t),e),new Qg(Gn(e.g),Gn(e.h));if(Ti(e))return e=sT(t,Gn(e)),new Qg(Gn(e.g),e.h);if(30<t.g.length){if(Ti(t)||Ti(e))throw Error("slowDivide_ only works with positive integers.");for(var n=DF,r=e;0>=r.X(t);)n=VX(n),r=VX(r);var i=Ud(n,1),s=Ud(r,1);for(r=Ud(r,2),n=Ud(n,2);!yo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ud(r,1),n=Ud(n,1)}return e=rT(t,i.R(e)),new Qg(i,e)}for(i=Vd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ts(n)).R(e);Ti(o)||0<o.X(t);)o=(s=Ts(n-=r)).R(e);yo(s)&&(s=DF),i=i.add(s),t=rT(t,o)}return new Qg(i,t)}function VX(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new je(n,t.h)}function Ud(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new je(i,t.h)}(G=je.prototype).ea=function(){if(Ti(this))return-Gn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:bF+r)*e,e*=bF}return t},G.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(yo(this))return"0";if(Ti(this))return"-"+Gn(this).toString(t);for(var e=Ts(Math.pow(t,6)),n=this,r="";;){var i=sT(n,e).g,s=((0<(n=rT(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(yo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},G.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},G.X=function(t){return Ti(t=rT(this,t))?-1:yo(t)?0:1},G.abs=function(){return Ti(this)?Gn(this):this},G.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new je(n,-2147483648&n[n.length-1]?-1:0)},G.R=function(t){if(yo(this)||yo(t))return Vd;if(Ti(this))return Ti(t)?Gn(this).R(Gn(t)):Gn(Gn(this).R(t));if(Ti(t))return Gn(this.R(Gn(t)));if(0>this.X(LX)&&0>t.X(LX))return Ts(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,iT(n,2*r+2*i),n[2*r+2*i+1]+=s*u,iT(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,iT(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,iT(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new je(n,0)},G.gb=function(t){return sT(this,t).h},G.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new je(n,this.h&t.h)},G.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new je(n,this.h|t.h)},G.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new je(n,this.h^t.h)},nT.prototype.createWebChannel=nT.prototype.g,ii.prototype.send=ii.prototype.u,ii.prototype.open=ii.prototype.m,ii.prototype.close=ii.prototype.close,$E.NO_ERROR=0,$E.TIMEOUT=8,$E.HTTP_ERROR=6,KY.COMPLETE="complete",YY.EventType=Lg,Lg.OPEN="a",Lg.CLOSE="b",Lg.ERROR="c",Lg.MESSAGE="d",wn.prototype.listen=wn.prototype.O,kt.prototype.listenOnce=kt.prototype.P,kt.prototype.getLastError=kt.prototype.Sa,kt.prototype.getLastErrorCode=kt.prototype.Ia,kt.prototype.getStatus=kt.prototype.da,kt.prototype.getResponseJson=kt.prototype.Wa,kt.prototype.getResponseText=kt.prototype.ja,kt.prototype.send=kt.prototype.ha,kt.prototype.setWithCredentials=kt.prototype.Oa,Ui.prototype.digest=Ui.prototype.l,Ui.prototype.reset=Ui.prototype.reset,Ui.prototype.update=Ui.prototype.j,je.prototype.add=je.prototype.add,je.prototype.multiply=je.prototype.R,je.prototype.modulo=je.prototype.gb,je.prototype.compare=je.prototype.X,je.prototype.toNumber=je.prototype.ea,je.prototype.toString=je.prototype.toString,je.prototype.getBits=je.prototype.D,je.fromNumber=Ts,je.fromString=function FX(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Gn(FX(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ts(Math.pow(e,8)),r=Vd,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ts(Math.pow(e,s)),r=r.R(s).add(Ts(o))):r=(r=r.R(n)).add(Ts(o))}return r};var w1e=Vi.createWebChannelTransport=function(){return new nT},A1e=Vi.getStatEventTarget=function(){return GE()},SF=Vi.ErrorCode=$E,C1e=Vi.EventType=KY,b1e=Vi.Event=Qu,UX=Vi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},D1e=Vi.FetchXmlHttpFactory=qg,oT=Vi.WebChannel=YY,S1e=Vi.XhrIo=kt,x1e=(Vi.Md5=Ui,Vi.Integer=je);const BX="@firebase/firestore";class An{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");let Bd="9.23.0";const wa=new Wo("@firebase/firestore");function xF(){return wa.logLevel}function P(t,...e){if(wa.logLevel<=pe.DEBUG){const n=e.map(RF);wa.debug(`Firestore (${Bd}): ${t}`,...n)}}function Gt(t,...e){if(wa.logLevel<=pe.ERROR){const n=e.map(RF);wa.error(`Firestore (${Bd}): ${t}`,...n)}}function Bi(t,...e){if(wa.logLevel<=pe.WARN){const n=e.map(RF);wa.warn(`Firestore (${Bd}): ${t}`,...n)}}function RF(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function H(t="Unexpected state"){const e=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: `+t;throw Gt(e),new Error(e)}function Q(t,e){t||H()}function B(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ln{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class jX{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R1e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class P1e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k1e{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ln,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ln)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q("string"==typeof r.accessToken),new jX(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(null===e||"string"==typeof e),new An(e)}}class N1e{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class M1e{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new N1e(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GX{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O1e{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q("string"==typeof n.token),this.T=n.token,new GX(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function F1e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class $X{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=F1e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function jd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Tt(0,0))}static max(){return new X(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yg{constructor(e,n,r){void 0===n?n=0:n>e.length&&H(),void 0===r?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Yg.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yg?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends Yg{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const L1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Yg{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return L1e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new D(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}class U{constructor(e){this.path=e}static fromPath(e){return new U(xe.fromString(e))}static fromName(e){return new U(xe.fromString(e).popFirst(5))}static empty(){return new U(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new U(new xe(e.slice()))}}function HX(t){return new si(t.readTime,t.key,-1)}class si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new si(X.min(),U.empty(),-1)}static max(){return new si(X.max(),U.empty(),-1)}}function kF(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=U.comparator(t.documentKey,e.documentKey),0!==n?n:ae(t.largestBatchId,e.largestBatchId))}const WX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B1e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Aa(t){return NF.apply(this,arguments)}function NF(){return NF=m(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==WX)throw t;P("LocalStore","Unexpectedly lost primary lease")}),NF.apply(this,arguments)}class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(i=>i?T.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new T((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new T((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Ca(t){return"IndexedDbTransactionError"===t.name}let oi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function Zg(t){return null==t}function em(t){return 0===t&&1/t==-1/0}function nJ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ba(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dT(this.root,e,this.comparator,!1)}getReverseIterator(){return new dT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dT(this.root,e,this.comparator,!0)}}class dT{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$n.RED,this.left=i??$n.EMPTY,this.right=s??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $n(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return $n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1,$n.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,i){return this}insert(t,e,n){return new $n(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class st{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iJ(this.data.getIterator())}getIteratorFrom(e){return new iJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class iJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new jr([])}unionWith(e){let n=new st($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class sJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sJ("Invalid base64 string: "+i):i}}(e);return new dn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const cMe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(t){if(Q(!!t),"string"==typeof t){let e=0;const n=cMe.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function vo(t){return"string"==typeof t?dn.fromBase64String(t):dn.fromUint8Array(t)}function hT(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fT(t){const e=t.mapValue.fields.__previous_value__;return hT(e)?fT(e):e}function tm(t){const e=Da(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}class lMe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class tc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}const Sa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hT(t)?4:cJ(t)?9007199254740991:10:H()}function As(t,e){if(t===e)return!0;const n=xa(t);if(n!==xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tm(t).isEqual(tm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Da(r.timestampValue),o=Da(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,vo(t.bytesValue).isEqual(vo(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Nt(r.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(r.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Nt(r.integerValue)===Nt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Nt(r.doubleValue),o=Nt(i.doubleValue);return s===o?em(s)===em(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return jd(t.arrayValue.values||[],e.arrayValue.values||[],As);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(nJ(s)!==nJ(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!As(s[a],o[a])))return!1;return!0}(t,e);default:return H()}var i}function nm(t,e){return void 0!==(t.values||[]).find(n=>As(n,e))}function Ra(t,e){if(t===e)return 0;const n=xa(t),r=xa(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Nt(i.integerValue||i.doubleValue),a=Nt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return oJ(t.timestampValue,e.timestampValue);case 4:return oJ(tm(t),tm(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,s){const o=vo(i),a=vo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=ae(o[u],a[u]);if(0!==c)return c}return ae(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ae(Nt(i.latitude),Nt(s.latitude));return 0!==o?o:ae(Nt(i.longitude),Nt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Ra(o[u],a[u]);if(c)return c}return ae(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Sa.mapValue&&s===Sa.mapValue)return 0;if(i===Sa.mapValue)return 1;if(s===Sa.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=ae(a[l],c[l]);if(0!==d)return d;const h=Ra(o[a[l]],u[c[l]]);if(0!==h)return h}return ae(a.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function oJ(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ae(t,e);const n=Da(t),r=Da(e),i=ae(n.seconds,r.seconds);return 0!==i?i:ae(n.nanos,r.nanos)}function $d(t){return FF(t)}function FF(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Da(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?vo(t.bytesValue).toBase64():"referenceValue"in t?U.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=FF(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${FF(r.fields[a])}`;return s+"}"}(t.mapValue):H();var e}function nc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function LF(t){return!!t&&"integerValue"in t}function rm(t){return!!t&&"arrayValue"in t}function mT(t){return!!t&&"mapValue"in t}function im(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ba(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=im(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=im(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cJ(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mT(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=im(n)}setAll(e){let n=$t.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=im(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());mT(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ba(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qn(im(this.value))}}function hJ(t){const e=[];return ba(t.fields,(n,r)=>{const i=new $t([n]);if(mT(r)){const s=hJ(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jr(e)}class ot{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,X.min(),X.min(),X.min(),qn.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,X.min(),X.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,X.min(),X.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pa{constructor(e,n){this.position=e,this.inclusive=n}}function fJ(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?U.comparator(U.fromName(o.referenceValue),n.key):Ra(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function pJ(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!As(t.position[n],e.position[n]))return!1;return!0}class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function fMe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class gJ{}class Te extends gJ{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new pMe(e,n,r):"array-contains"===n?new _Me(e,r):"in"===n?new EJ(e,r):"not-in"===n?new yMe(e,r):"array-contains-any"===n?new vMe(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new gMe(e,r):new mMe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&xa(this.value)===xa(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ge extends gJ{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Ge(e,n)}matches(e){return zd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function zd(t){return"and"===t.op}function UF(t){return function mJ(t){for(const e of t.filters)if(e instanceof Ge)return!1;return!0}(t)&&zd(t)}function BF(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+$d(t.value);if(UF(t))return t.filters.map(e=>BF(e)).join(",");{const e=t.filters.map(n=>BF(n)).join(",");return`${t.op}(${e})`}}function _J(t,e){return t instanceof Te?(n=t,(r=e)instanceof Te&&n.op===r.op&&n.field.isEqual(r.field)&&As(n.value,r.value)):t instanceof Ge?function(n,r){return r instanceof Ge&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&_J(s,r.filters[o]),!0)}(t,e):void H();var n,r}function vJ(t){return t instanceof Te?`${(e=t).field.canonicalString()} ${e.op} ${$d(e.value)}`:t instanceof Ge?function(e){return e.op.toString()+" {"+e.getFilters().map(vJ).join(" ,")+"}"}(t):"Filter";var e}class pMe extends Te{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){const n=U.comparator(e.key,this.key);return this.matchesComparison(n)}}class gMe extends Te{constructor(e,n){super(e,"in",n),this.keys=IJ(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mMe extends Te{constructor(e,n){super(e,"not-in",n),this.keys=IJ(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IJ(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}class _Me extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rm(n)&&nm(n.arrayValue,this.value)}}class EJ extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&nm(this.value.arrayValue,n)}}class yMe extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!nm(this.value.arrayValue,n)}}class vMe extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nm(this.value.arrayValue,r))}}class IMe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function jF(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IMe(t,e,n,r,i,s,o)}function rc(t){const e=B(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>BF(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Zg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$d(r)).join(",")),e.dt=n}return e.dt}function sm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fMe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_J(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pJ(t.startAt,e.startAt)&&pJ(t.endAt,e.endAt)}class Io{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function CJ(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function GF(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vT(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function $F(t){return null!==t.collectionGroup}function ic(t){const e=B(t);if(null===e.wt){e.wt=[];const n=vT(e),r=GF(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new qd(n)),e.wt.push(new qd($t.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new qd($t.keyField(),s))}}}return e.wt}function wr(t){const e=B(t);if(!e._t)if("F"===e.limitType)e._t=jF(e.path,e.collectionGroup,ic(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ic(e))n.push(new qd(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Pa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pa(e.startAt.position,e.startAt.inclusive):null;e._t=jF(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function qF(t,e){e.getFirstInequalityField(),vT(t);const n=t.filters.concat([e]);return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function IT(t,e,n){return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function om(t,e){return sm(wr(t),wr(e))&&t.limitType===e.limitType}function bJ(t){return`${rc(wr(t))}|lt:${t.limitType}`}function zF(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>vJ(r)).join(", ")}]`),Zg(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$d(r)).join(",")),`Target(${n})`}(wr(t))}; limitType=${t.limitType})`}function am(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):U.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ic(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=fJ(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,ic(n),r)||n.endAt&&!function(i,s,o){const a=fJ(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,ic(n),r)));var n,r}function EMe(t,e,n){const r=t.field.isKeyField()?U.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Ra(a,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rJ(this.inner)}size(){return this.innerSize}}const TMe=new tt(U.comparator);function Gr(){return TMe}const xJ=new tt(U.comparator);function um(...t){let e=xJ;for(const n of t)e=e.insert(n.key,n);return e}function RJ(t){let e=xJ;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return cm()}function PJ(){return cm()}function cm(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const wMe=new tt(U.comparator),AMe=new st(U.comparator);function _e(...t){let e=AMe;for(const n of t)e=e.add(n);return e}const CMe=new st(ae);function kJ(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(e)?"-0":e}}function NJ(t){return{integerValue:""+t}}function MJ(t,e){return function QX(t){return"number"==typeof t&&Number.isInteger(t)&&!em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?NJ(e):kJ(t,e)}class ET{constructor(){this._=void 0}}function bMe(t,e,n){return t instanceof Wd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&hT(i)&&(i=fT(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof sc?FJ(t,e):t instanceof oc?LJ(t,e):function(r,i){const s=OJ(r,i),o=VJ(s)+VJ(r.gt);return LF(s)&&LF(r.gt)?NJ(o):kJ(r.serializer,o)}(t,e)}function DMe(t,e,n){return t instanceof sc?FJ(t,e):t instanceof oc?LJ(t,e):n}function OJ(t,e){return t instanceof Kd?LF(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Wd extends ET{}class sc extends ET{constructor(e){super(),this.elements=e}}function FJ(t,e){const n=UJ(e);for(const r of t.elements)n.some(i=>As(i,r))||n.push(r);return{arrayValue:{values:n}}}class oc extends ET{constructor(e){super(),this.elements=e}}function LJ(t,e){let n=UJ(e);for(const r of t.elements)n=n.filter(i=>!As(i,r));return{arrayValue:{values:n}}}class Kd extends ET{constructor(e,n){super(),this.serializer=e,this.gt=n}}function VJ(t){return Nt(t.integerValue||t.doubleValue)}function UJ(t){return rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class lm{constructor(e,n){this.field=e,this.transform=n}}class xMe{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function TT(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class wT{}function BJ(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Yd(t.key,gt.none()):new Qd(t.key,t.data,gt.none());{const n=t.data,r=qn.empty();let i=new st($t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new To(t.key,r,new jr(i.toArray()),gt.none())}}function RMe(t,e,n){t instanceof Qd?function(r,i,s){const o=r.value.clone(),a=$J(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof To?function(r,i,s){if(!TT(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=$J(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(GJ(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function dm(t,e,n,r){return t instanceof Qd?function(i,s,o,a){if(!TT(i.precondition,s))return o;const u=i.value.clone(),c=qJ(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof To?function(i,s,o,a){if(!TT(i.precondition,s))return o;const u=qJ(i.fieldTransforms,a,s),c=s.data;return c.setAll(GJ(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,TT(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function PMe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OJ(r.transform,i||null);null!=s&&(null===n&&(n=qn.empty()),n.set(r.field,s))}return n||null}function jJ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&jd(n,r,(i,s)=>function SMe(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof sc&&r instanceof sc||n instanceof oc&&r instanceof oc?jd(n.elements,r.elements,As):n instanceof Kd&&r instanceof Kd?As(n.gt,r.gt):n instanceof Wd&&r instanceof Wd);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Qd extends wT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class To extends wT{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GJ(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $J(t,e,n){const r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,DMe(o,a,n[i]))}return r}function qJ(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,bMe(s,o,e))}return r}class Yd extends wT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WF extends wT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RMe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PJ();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=BJ(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(n,r)=>jJ(n,r))&&jd(this.baseMutations,e.baseMutations,(n,r)=>jJ(n,r))}}class QF{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=wMe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new QF(e,n,r,i)}}class YF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Zt,Re;(Re=Zt||(Zt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS",new x1e([4294967295,4294967295],0);class UMe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tZ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BMe(t,e){return Xd(t,e.toTimestamp())}function qt(t){return Q(!!t),X.fromTimestamp(function(e){const n=Da(e);return new Tt(n.seconds,n.nanos)}(t))}function eL(t,e){return(n=t,new xe(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function gm(t,e){return eL(t.databaseId,e.path)}function rZ(t){const e=function nZ(t){const e=xe.fromString(t);return Q(function dZ(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?xe.emptyPath():function iZ(t){return Q(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function sZ(t,e,n){return{name:gm(t,e),fields:n.value.mapValue.fields}}function uZ(t){let e=rZ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Q(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=cZ(l);return d instanceof Ge&&UF(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new qd(Jd((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Zg(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new Pa((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new Pa(l.values||[],!l.before)}(n.endAt)),function AJ(t,e,n,r,i,s,o,a){return new Io(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function cZ(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Jd(e.unaryFilter.field);return Te.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Jd(e.unaryFilter.field);return Te.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jd(e.unaryFilter.field);return Te.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Jd(e.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):void 0!==t.fieldFilter?Te.create(Jd((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return Ge.create(e.compositeFilter.filters.map(n=>cZ(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(t):H();var e}function Jd(t){return $t.fromServerFormat(t.fieldPath)}function KMe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}class hZ{constructor(e){this.fe=e}}function iL(t){const e=uZ({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?IT(e,e.limit,"L"):e}class lc{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),em(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(vo(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?cJ(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):H()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),U.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}lc.Ve=new lc;class rOe{constructor(){this.rn=new lL}addToCollectionParentIndex(e,n){return this.rn.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(si.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class lL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(xe.comparator)).toArray()}}new Uint8Array(0);class sr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);class hc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new hc(0)}static Mn(){return new hc(-1)}}class cOe{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hOe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class VZ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&dm(r.mutation,i,jr.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=Cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=um();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Gr();const o=cm(),a=cm();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof To)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),dm(l.mutation,c,l.mutation.getFieldMask(),Tt.now())):o.set(c.key,jr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new hOe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cm();let i=new tt((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||jr.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||_e()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=PJ();l.forEach(h=>{if(!s.has(h)){const f=BJ(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return U.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):$F(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):T.resolve(Cs());let a=-1,u=s;return o.next(c=>T.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?T.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,_e())).next(l=>({batchId:a,changes:RJ(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=um();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=um();return this.indexManager.getCollectionParents(e,i).next(o=>T.forEach(o,a=>{const u=(c=n,l=a.child(i),new Io(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,ot.newInvalidDocument(c)))});let o=um();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&dm(c.mutation,u,jr.empty(),Tt.now()),am(n,u)&&(o=o.insert(a,u))}),o})}}class fOe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return T.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:qt(r.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:iL(r.bundledQuery),readTime:qt(r.readTime)}),T.resolve();var r}}class pOe{constructor(){this.overlays=new tt(U.comparator),this.ls=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cs();return T.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const i=Cs(),s=n.length+1,o=new U(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return T.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new tt((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=Cs(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=Cs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return T.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new YF(n,r));let s=this.ls.get(n);void 0===s&&(s=_e(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class dL{constructor(){this.fs=new st(bn.ds),this.ws=new st(bn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new bn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new bn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new U(new xe([])),r=new bn(n,e),i=new bn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new U(new xe([])),r=new bn(n,e),i=new bn(n,e+1);let s=_e();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new bn(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class bn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return U.comparator(e.key,n.key)||ae(e.As,n.As)}static _s(e,n){return ae(e.As,n.As)||U.comparator(e.key,n.key)}}class gOe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new st(bn.ds)}checkEmpty(e){return T.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new KF(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new bn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return T.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new bn(n,0),i=new bn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),T.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(ae);return n.forEach(i=>{const s=new bn(i,0),o=new bn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),T.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;U.isDocumentKey(s)||(s=s.child(""));const o=new bn(new U(s),0);let a=new st(ae);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),T.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Q(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return T.forEach(n.mutations,i=>{const s=new bn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new bn(n,0),i=this.Rs.firstAfterOrEqual(r);return T.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return T.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mOe{constructor(e){this.Ds=e,this.docs=new tt(U.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ot.newInvalidDocument(i))}),T.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Gr();const o=n.path,a=new U(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kF(HX(l),r)<=0||(i.has(l.key)||am(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return T.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Cs(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _Oe(this)}getSize(e){return T.resolve(this.size)}}class _Oe extends cOe{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class yOe{constructor(e){this.persistence=e,this.xs=new Eo(n=>rc(n),sm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Ns=0,this.ks=new dL,this.targetCount=0,this.Ms=hc.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),T.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new hc(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Fn(n),T.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),T.waitFor(s).next(()=>i)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),T.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.ks.containsKey(n))}}class hL{constructor(e,n){this.$s={},this.overlays={},this.Os=new oi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new yOe(this),this.indexManager=new rOe,this.remoteDocumentCache=new mOe(r=>this.referenceDelegate.Ls(r)),this.serializer=new hZ(n),this.qs=new fOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pOe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new gOe(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);const i=new vOe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return T.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class vOe extends B1e{constructor(e){super(),this.currentSequenceNumber=e}}class MT{constructor(e){this.persistence=e,this.Qs=new dL,this.js=null}static zs(e){return new MT(e)}get Ws(){if(this.js)return this.js;throw H()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),T.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ws,r=>{const i=U.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return T.or([()=>T.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class mL{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mL(e,n.fromCache,r,i)}}class BZ{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(CJ(n))return T.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=IT(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,IT(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return CJ(n)||i.isEqual(X.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(xF()<=pe.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zF(n)),this.Wi(e,o,n,function zX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new Tt(n+1,0):new Tt(n,r));return new si(i,U.empty(),e)}(i,-1)))})}ji(e,n){let r=new st(function SJ(t){return(e,n)=>{let r=!1;for(const i of ic(t)){const s=EMe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}(e));return n.forEach((i,s)=>{am(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return xF()<=pe.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",zF(n)),this.Ui.getDocumentsMatchingQuery(e,n,si.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class EOe{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new tt(ae),this.Yi=new Eo(s=>rc(s),sm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VZ(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function GZ(t,e){return _L.apply(this,arguments)}function _L(){return _L=m(function*(t,e){const n=B(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=_e();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),_L.apply(this,arguments)}function AOe(t,e){const n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class wL{constructor(){this.activeTargetIds=function HF(){return CMe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YZ{constructor(){this.Hr=new wL,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wL,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DOe{Yr(e){}shutdown(){}}class XZ{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let BT=null;function CL(){return null===BT?BT=268435456+Math.round(2147483648*Math.random()):BT++,"0x"+BT.toString(16)}const SOe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xOe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const or="WebChannelConnection";class ROe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=CL(),a=this.To(e,n);P("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(P("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Bi("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${SOe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=CL();return new Promise((o,a)=>{const u=new S1e;u.setWithCredentials(!0),u.listenOnce(C1e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case SF.NO_ERROR:const l=u.getResponseJson();P(or,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case SF.TIMEOUT:P(or,`RPC '${e}' ${s} timed out`),a(new D(w.DEADLINE_EXCEEDED,"Request time out"));break;case SF.HTTP_ERROR:const d=u.getStatus();if(P(or,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const _=g.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(_)>=0?_:w.UNKNOWN}(f.status);a(new D(p,f.message))}else a(new D(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new D(w.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{P(or,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);P(or,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=CL(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=w1e(),a=A1e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new D1e({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");P(or,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new xOe({ro:_=>{f?P(or,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(P(or,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),P(or,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},oo:()=>d.close()}),g=(_,v,y)=>{_.listen(v,I=>{try{y(I)}catch(C){setTimeout(()=>{throw C},0)}})};return g(d,oT.EventType.OPEN,()=>{f||P(or,`RPC '${e}' stream ${i} transport opened.`)}),g(d,oT.EventType.CLOSE,()=>{f||(f=!0,P(or,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,oT.EventType.ERROR,_=>{f||(f=!0,Bi(or,`RPC '${e}' stream ${i} transport errored:`,_),p.wo(new D(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,oT.EventType.MESSAGE,_=>{var v;if(!f){const y=_.data[0];Q(!!y);const C=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(C){P(or,`RPC '${e}' stream ${i} received error:`,C);const k=C.status;let M=function(Ae){const tn=Zt[Ae];if(void 0!==tn)return function HJ(t){if(void 0===t)return Gt("GRPC error has no .code"),w.UNKNOWN;switch(t){case Zt.OK:return w.OK;case Zt.CANCELLED:return w.CANCELLED;case Zt.UNKNOWN:return w.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return w.INTERNAL;case Zt.UNAVAILABLE:return w.UNAVAILABLE;case Zt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Zt.NOT_FOUND:return w.NOT_FOUND;case Zt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Zt.ABORTED:return w.ABORTED;case Zt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Zt.DATA_LOSS:return w.DATA_LOSS;default:return H()}}(tn)}(k),ee=C.message;void 0===M&&(M=w.INTERNAL,ee="Unknown error status: "+k+" with message "+C.message),f=!0,p.wo(new D(M,ee)),d.close()}else P(or,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,b1e.STAT_EVENT,_=>{_.stat===UX.PROXY?P(or,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===UX.NOPROXY&&P(or,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function jT(){return typeof document<"u"?document:null}function bm(t){return new UMe(t,!0)}class bL{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class POe{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new bL(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return m(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return m(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return m(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Gt(n.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new D(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(m(function*(){e.state=0,e.start()}))}tu(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NOe extends POe{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function $Me(t,e){return t&&t.length>0?(Q(void 0!==e),t.map(n=>function(r,i){let s=qt(r.updateTime?r.updateTime:i);return s.isEqual(X.min())&&(s=qt(i)),new xMe(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.cu(r,n)}return Q(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=function mm(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function _m(t,e){let n;if(e instanceof Qd)n={update:sZ(t,e.key,e.value)};else if(e instanceof Yd)n={delete:gm(t,e.key)};else if(e instanceof To)n={update:sZ(t,e.key,e.data),updateMask:KMe(e.fieldMask)};else{if(!(e instanceof WF))return H();n={verify:gm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Wd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof sc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof oc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Kd)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:BMe(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:H()),n;var i}(this.serializer,r))};this.Wo(n)}}class MOe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(w.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(w.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class FOe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Gt(n),this.mu=!1):P("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class LOe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(m(function*(){var u;Fa(o)&&(P("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(c){const l=B(c);l.vu.add(4),yield rh(l),l.bu.set("Unknown"),l.vu.delete(4),yield Dm(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new FOe(r,i)}}function Dm(t){return SL.apply(this,arguments)}function SL(){return SL=m(function*(t){if(Fa(t))for(const e of t.Ru)yield e(!0)}),SL.apply(this,arguments)}function rh(t){return xL.apply(this,arguments)}function xL(){return xL=m(function*(t){for(const e of t.Ru)yield e(!1)}),xL.apply(this,arguments)}function Fa(t){return 0===B(t).vu.size}function $T(t,e,n){return FL.apply(this,arguments)}function FL(){return FL=m(function*(t,e,n){if(!Ca(e))throw e;t.vu.add(1),yield rh(t),t.bu.set("Offline"),n||(n=()=>function $Z(t){const e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){P("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield Dm(t)}))}),FL.apply(this,arguments)}function tee(t,e){return e().catch(n=>$T(t,n,e))}function ih(t){return LL.apply(this,arguments)}function LL(){return LL=m(function*(t){const e=B(t),n=La(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;jOe(e);)try{const i=yield AOe(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,GOe(e,i)}catch(i){yield $T(e,i)}nee(e)&&ree(e)}),LL.apply(this,arguments)}function jOe(t){return Fa(t)&&t.Eu.length<10}function GOe(t,e){t.Eu.push(e);const n=La(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function nee(t){return Fa(t)&&!La(t).Uo()&&t.Eu.length>0}function ree(t){La(t).start()}function $Oe(t){return VL.apply(this,arguments)}function VL(){return VL=m(function*(t){La(t).hu()}),VL.apply(this,arguments)}function qOe(t){return UL.apply(this,arguments)}function UL(){return UL=m(function*(t){const e=La(t);for(const n of t.Eu)e.uu(n.mutations)}),UL.apply(this,arguments)}function zOe(t,e,n){return BL.apply(this,arguments)}function BL(){return BL=m(function*(t,e,n){const r=t.Eu.shift(),i=QF.from(r,e,n);yield tee(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ih(t)}),BL.apply(this,arguments)}function HOe(t,e){return jL.apply(this,arguments)}function jL(){return jL=m(function*(t,e){var n;e&&La(t).ou&&(yield(n=m(function*(r,i){if(function zJ(t){switch(t){default:return H();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}(s=i.code)&&s!==w.ABORTED){const o=r.Eu.shift();La(r).Qo(),yield tee(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ih(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),nee(t)&&ree(t)}),jL.apply(this,arguments)}function iee(t,e){return GL.apply(this,arguments)}function GL(){return GL=m(function*(t,e){const n=B(t);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const r=Fa(n);n.vu.add(3),yield rh(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield Dm(n)}),GL.apply(this,arguments)}function qL(){return qL=m(function*(t,e){const n=B(t);e?(n.vu.delete(2),yield Dm(n)):e||(n.vu.add(2),yield rh(n),n.bu.set("Unknown"))}),qL.apply(this,arguments)}function La(t){return t.Du||(t.Du=function(e,n,r){const i=B(e);return i.fu(),new NOe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:$Oe.bind(null,t),ao:HOe.bind(null,t),au:qOe.bind(null,t),cu:zOe.bind(null,t)}),t.Ru.push(function(){var e=m(function*(n){n?(t.Du.Qo(),yield ih(t)):(yield t.Du.stop(),t.Eu.length>0&&(P("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class zL{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zL(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oh(t,e){if(Gt("AsyncQueue",`${e}: ${t}`),Ca(t))return new D(w.UNAVAILABLE,`${e}: ${t}`);throw t}class KOe{constructor(){this.queries=new Eo(e=>bJ(e),om),this.onlineState="Unknown",this.ku=new Set}}class tFe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Eo(a=>bJ(a),om),this._c=new Map,this.mc=new Set,this.gc=new tt(U.comparator),this.yc=new Map,this.Ic=new dL,this.Tc={},this.Ec=new Map,this.Ac=hc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function nV(){return nV=m(function*(t,e,n){const r=function TV(t){const e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oFe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aFe.bind(null,e),e}(t);try{const i=yield function(s,o){const a=B(s),u=Tt.now(),c=o.reduce((h,f)=>h.add(f.key),_e());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Gr(),p=_e();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((_,v)=>{v.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const _=[];for(const v of o){const y=PMe(v,l.get(v.key).overlayedDocument);null!=y&&_.push(new To(v.key,y,hJ(y.value.mapValue),gt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,_,o)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:RJ(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new tt(ae)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Ao(r,i.changes),yield ih(r.remoteStore)}catch(i){const s=oh(i,"Failed to persist write");n.reject(s)}}),nV.apply(this,arguments)}function hee(t,e,n){const r=B(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=B(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&function YL(t){t.ku.forEach(e=>{e.next()})}(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oFe(t,e){return sV.apply(this,arguments)}function sV(){return sV=m(function*(t,e){const n=B(t),r=e.batch.batchId;try{const i=yield function TOe(t,e){const n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=T.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);Q(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=_e();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);cV(n,r,null),uV(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ao(n,i)}catch(i){yield Aa(i)}}),sV.apply(this,arguments)}function aFe(t,e,n){return oV.apply(this,arguments)}function oV(){return oV=m(function*(t,e,n){const r=B(t);try{const i=yield function(s,o){const a=B(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(Q(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);cV(r,e,n),uV(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ao(r,i)}catch(i){yield Aa(i)}}),oV.apply(this,arguments)}function uV(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function cV(t,e,n){const r=B(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ao(t,e,n){return hV.apply(this,arguments)}function hV(){return hV=m(function*(t,e,n){const r=B(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=mL.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=m(function*(u,c){const l=B(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>T.forEach(c,h=>T.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>T.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ca(d))throw d;P("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),hV.apply(this,arguments)}function lFe(t,e){return fV.apply(this,arguments)}function fV(){return fV=m(function*(t,e){const n=B(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const r=yield GZ(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new D(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ao(n,r.er)}var i}),fV.apply(this,arguments)}class qT{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.serializer=bm(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function jZ(t,e,n,r){return new EOe(t,e,n,r)}(this.persistence,new BZ,e.initialUser,this.serializer)}createPersistence(e){return new hL(MT.zs,this.serializer)}createSharedClientState(e){return new YZ}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lh{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hee(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lFe.bind(null,r.syncEngine),yield function $L(t,e){return qL.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KOe}createDatastore(e){const n=bm(e.databaseInfo.databaseId),r=new ROe(e.databaseInfo);return new MOe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>hee(this.syncEngine,a,0),o=XZ.D()?new XZ:new DOe,new LOe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new tFe(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(n){const r=B(n);P("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield rh(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class AFe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=An.UNAUTHENTICATED,this.clientId=$X.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){P("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(P("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=oh(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function HT(t,e){return wV.apply(this,arguments)}function wV(){return wV=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield GZ(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),wV.apply(this,arguments)}function AV(t,e){return CV.apply(this,arguments)}function CV(){return CV=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function bV(t){return DV.apply(this,arguments)}(t);P("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>iee(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>iee(e.remoteStore,s)),t._onlineComponents=e}),CV.apply(this,arguments)}function DV(){return DV=m(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield HT(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function vee(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),yield HT(t,new qT)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield HT(t,new qT);return t._offlineComponents}),DV.apply(this,arguments)}function SV(){return SV=m(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield AV(t,t._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield AV(t,new lh))),t._onlineComponents}),SV.apply(this,arguments)}function xV(t){return function WT(t){return SV.apply(this,arguments)}(t).then(e=>e.syncEngine)}function Cee(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const bee=new Map;function PV(t,e,n){if(!n)throw new D(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Dee(t){if(!U.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function See(t){if(U.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QT(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":H()}function we(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=QT(t);throw new D(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Ree{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new D(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function NFe(t,e,n,r){if(!0===e&&!0===r)throw new D(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Cee(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new D(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ree({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ree(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new R1e;switch(n.type){case"firstParty":return new M1e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new D(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=bee.get(e);n&&(P("ComponentProvider","Removing Datastore"),bee.delete(e),n.terminate())}(this),Promise.resolve()}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zn(this.firestore,e,this._query)}}class Ds extends zn{constructor(e,n,r){super(e,n,function Hd(t){return new Io(t)}(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new U(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function OFe(t,e,...n){if(t=Lt(t),PV("collection","path",e),t instanceof xm){const r=xe.fromString(e,...n);return See(r),new Ds(t,null,r)}{if(!(t instanceof zt||t instanceof Ds))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return See(r),new Ds(t.firestore,null,r)}}function Pee(t,e,...n){if(t=Lt(t),1===arguments.length&&(e=$X.A()),PV("doc","path",e),t instanceof xm){const r=xe.fromString(e,...n);return Dee(r),new zt(t,null,new U(r))}{if(!(t instanceof zt||t instanceof Ds))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Dee(r),new zt(t.firestore,t instanceof Ds?t.converter:null,new U(r))}}class FFe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new bL(this,"async_queue_retry"),this.Xc=()=>{const n=jT();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=jT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=jT();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ln;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return m(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Ca(n))throw n;P("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Gt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=zL.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&H()}verifyOperationInProgress(){}sa(){var e=this;return m(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class at extends xm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new FFe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nee(this),this._firestoreClient.terminate()}}function VFe(t,e){const r="string"==typeof t?t:e||"(default)",i=yv("object"==typeof t?t:function Hz(t=mv){const e=fu.get(t);if(!e&&t===mv&&kz())return function Jve(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:mv,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Qs.create("bad-app-name",{appName:String(i)});if(n||(n=kz()),!n)throw Qs.create("no-options");const s=fu.get(i);if(s){if(zb(n,s.options)&&zb(r,s.config))return s;throw Qs.create("duplicate-app",{appName:i})}const o=new ove(i);for(const u of _v.values())o.addComponent(u);const a=new Xve(n,r,o);return fu.set(i,a),a}();if(!e)throw Qs.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=hv())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");s&&function MFe(t,e,n,r={}){var i;const s=(t=we(t,xm))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=An.MOCK_USER;else{a=function zye(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dv(JSON.stringify({alg:"none",type:"JWT"})),dv(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new D(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new An(c)}t._authCredentials=new P1e(new jX(a,u))}}(i,...s)}return i}function Nee(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new lMe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Cee(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new AFe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(dn.fromBase64String(e))}catch(n){throw new D(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pc(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hh{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new D(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class NV{constructor(e){this._methodName=e}}class MV{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}const BFe=/^__.*__$/;class jFe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qd(e,this.data,n,this.fieldTransforms)}}function Lee(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class YT{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new YT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return JT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Lee(this.ca)&&BFe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class GFe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bm(e)}ya(e,n,r,i=!1){return new YT({ca:e,methodName:n,ga:r,path:$t.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fh(t){const e=t._freezeSettings(),n=bm(t._databaseId);return new GFe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OV(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);LV("Data must be an object, but it was:",o,r);const a=Gee(r,o);let u,c;if(s.merge)u=new jr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=km(e,d,n);if(!o.contains(h))throw new D(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);qee(l,h)||l.push(h)}u=new jr(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new jFe(new qn(a),u,c)}class FV extends NV{_toFieldTransform(e){return new lm(e.path,new Wd)}isEqual(e){return e instanceof FV}}function gc(t,e){if($ee(t=Lt(t)))return LV("Unsupported field value:",e,t),Gee(t,e);if(t instanceof NV)return function(n,r){if(!Lee(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=gc(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Lt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return MJ(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Tt.fromDate(n);return{timestampValue:Xd(r.serializer,i)}}if(n instanceof Tt){const i=new Tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xd(r.serializer,i)}}if(n instanceof MV)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pc)return{bytesValue:tZ(r.serializer,n._byteString)};if(n instanceof zt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eL(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${QT(n)}`)}(t,e)}function Gee(t,e){const n={};return rJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(t,(r,i)=>{const s=gc(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function $ee(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof MV||t instanceof pc||t instanceof zt||t instanceof NV)}function LV(t,e,n){if(!$ee(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QT(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function km(t,e,n){if((e=Lt(e))instanceof hh)return e._internalPath;if("string"==typeof e)return XT(t,e);throw JT("Field path arguments must be of type string or ",t,!1,void 0,n)}const HFe=new RegExp("[~\\*/\\[\\]]");function XT(t,e,n){if(e.search(HFe)>=0)throw JT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hh(...e.split("."))._internalPath}catch{throw JT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function JT(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new D(w.INVALID_ARGUMENT,a+t+u)}function qee(t,e){return t.some(n=>n.isEqual(e))}class VV{}class UV extends VV{}function QFe(t,e,...n){let r=[];e instanceof VV&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof ph).length,o=i.filter(a=>a instanceof Nm).length;if(s>1||s>0&&o>0)throw new D(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Nm extends UV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){const n=this._parse(e);return Qee(e._query,n),new zn(e.firestore,e.converter,qF(e._query,n))}_parse(e){const n=fh(e.firestore);return function(i,s,o,a,u,c,l){let d;if(u.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new D(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){Kee(l,c);const h=[];for(const f of l)h.push(Wee(a,i,f));d={arrayValue:{values:h}}}else d=Wee(a,i,l)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||Kee(l,c),d=function jee(t,e,n,r=!1){return gc(n,t.ya(r?4:3,e))}(o,"where",l,"in"===c||"not-in"===c);return Te.create(u,c,d)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ph extends VV{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ph(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Ge.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)Qee(s,a),s=qF(s,a)}(e._query,n),new zn(e.firestore,e.converter,qF(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class BV extends UV{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new BV(e,n)}_apply(e){const n=function(r,i,s){if(null!==r.startAt)throw new D(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new D(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new qd(i,s);return function(a,u){if(null===GF(a)){const c=vT(a);null!==c&&Yee(0,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new zn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Io(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function YFe(t,e="asc"){const n=e,r=function ZT(t,e){return"string"==typeof e?XT(t,e):e instanceof hh?e._internalPath:e._delegate._internalPath}("orderBy",t);return BV._create(r,n)}class ew extends UV{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ew(e,n,r)}_apply(e){return new zn(e.firestore,e.converter,IT(e._query,this._limit,this._limitType))}}function XFe(t){return function xee(t,e){if(e<=0)throw new D(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",t),ew._create("limit",t,"F")}function Wee(t,e,n){if("string"==typeof(n=Lt(n))){if(""===n)throw new D(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$F(e)&&-1!==n.indexOf("/"))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!U.isDocumentKey(r))throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nc(t,new U(r))}if(n instanceof zt)return nc(t,n._key);throw new D(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QT(n)}.`)}function Kee(t,e){if(!Array.isArray(t)||0===t.length)throw new D(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qee(t,e){if(e.isInequality()){const r=vT(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new D(w.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=GF(t);null!==s&&Yee(0,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new D(w.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Yee(t,e,n){if(!n.isEqual(e))throw new D(w.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}function jV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function eLe(t,e,n){t=we(t,zt);const r=we(t.firestore,at),i=jV(t.converter,e,n);return Om(r,[OV(fh(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,gt.none())])}function tLe(t,e){const n=we(t.firestore,at),r=Pee(t),i=jV(t.converter,e);return Om(n,[OV(fh(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function Om(t,e){return function(n,r){const i=new ln;return n.asyncQueue.enqueueAndForget(m(function*(){return function iFe(t,e,n){return nV.apply(this,arguments)}(yield xV(n),r,i)})),i.promise}(function en(t){return t._firestoreClient||Nee(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}function fLe(){return new FV("serverTimestamp")}!function(t,e=!0){Bd=os,an(new Kt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new at(new k1e(n.getProvider("auth-internal")),new O1e(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),dt(BX,"3.13.0",t),dt(BX,"3.13.0","esm2017")}();class sw{constructor(e){return e}}const $V=new W("angularfire2.firestore-instances");function mLe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new sw(r)}}const _Le={provide:class pLe{constructor(){return Zf("firestore")}},deps:[[new fn,$V]]},yLe={provide:sw,useFactory:function gLe(t,e){const n=function Jf(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}("firestore",t,e);return n&&new sw(n)},deps:[[new fn,$V],class Yo{constructor(e){return e}}]};let vLe=(()=>{class t{constructor(){dt("angularfire",ywe.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bi({type:t}),t.\u0275inj=ci({providers:[yLe,_Le]}),t})();const ELe=vr(ENe,!0),ete=vr(tLe,!0),qV=vr(OFe,!0),TLe=vr(Pee,!0),wLe=vr(VFe,!0),ALe=vr(XFe,!0),CLe=vr(YFe,!0),bLe=vr(QFe,!0),tte=vr(fLe,!0),DLe=vr(eLe,!0),nte="firebasestorage.googleapis.com";class wt extends Yn{constructor(e,n,r=0){super(zV(e),`Firebase Storage: ${n} (${zV(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zV(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var mt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(mt||{});function zV(t){return"storage/"+t}function WV(t){return new wt(mt.INVALID_ARGUMENT,t)}function ate(){return new wt(mt.APP_DELETED,"The Firebase app was deleted.")}class Ar{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ar.makeFromUrl(e,n)}catch{return new Ar(e,"")}if(""===r.path)return r;throw function LLe(t){return new wt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(C){C.path_=decodeURIComponent(C.path)}const d=n.replace(/[.]/g,"\\."),I=[{regex:a,indices:{bucket:1,path:3},postModify:function s(C){"/"===C.path.charAt(C.path.length-1)&&(C.path_=C.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${n===nte?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<I.length;C++){const k=I[C],M=k.regex.exec(e);if(M){let Ae=M[k.indices.path];Ae||(Ae=""),r=new Ar(M[k.indices.bucket],Ae),k.postModify(r);break}}if(null==r)throw function FLe(t){return new wt(mt.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class $Le{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function QV(t,e,n,r){if(r<e)throw WV(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw WV(`Invalid value for '${t}'. Expected ${n} or less.`)}var mh=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(mh||{});class QLe{constructor(e,n,r,i,s,o,a,u,c,l,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function HLe(t){return void 0!==t}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=function HV(){return new wt(mt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?ate():function ste(){return new wt(mt.CANCELED,"User canceled the upload/download.")}():function ite(){return new wt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?n(0,new aw(!1,null,!0)):this.backoffId_=function qLe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let c=!1;function l(..._){c||(c=!0,e.apply(null,_))}function d(_){i=setTimeout(()=>{i=null,t(f,u())},_)}function h(){s&&clearTimeout(s)}function f(_,...v){if(c)return void h();if(_)return h(),void l.call(null,_,...v);if(u()||o)return h(),void l.call(null,_,...v);let I;r<64&&(r*=2),1===a?(a=2,I=0):I=1e3*(r+Math.random()),d(I)}let p=!1;function g(_){p||(p=!0,h(),!c&&(null!==i?(_||(a=2),clearTimeout(i),d(0)):_||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((r,i)=>{if(i)return void r(!1,new aw(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===mh.NO_ERROR,u=s.getStatus();if(!a||function lte(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}(u,this.additionalRetryCodes_)&&this.retry){const l=s.getErrorCode()===mh.ABORT;return void r(!1,new aw(!1,null,l))}const c=-1!==this.successCodes_.indexOf(u);r(!0,new aw(c,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function zLe(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class aw{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}class _c{constructor(e,n){this._service=e,this._location=n instanceof Ar?n:Ar.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _c(e,n)}get root(){const e=new Ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function gte(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function cVe(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Ar(this._location.bucket,e);return new _c(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function GLe(t){return new wt(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Rte(t,e){const n=e?.storageBucket;return null==n?null:Ar.makeFromBucketSpec(n,t)}class n2{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nte,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ar.makeFromBucketSpec(i,this._host):Rte(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ar.makeFromBucketSpec(this._url,e):Rte(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return m(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return m(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _c(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new $Le(ate());{const o=function eVe(t,e,n,r,i,s,o=!0){const a=function cte(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return function JLe(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function YLe(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function XLe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function ZLe(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new QLe(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var r=this;return m(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const Pte="@firebase/storage";function QVe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new n2(n,r,i,e,os)}!function YVe(){an(new Kt("storage",QVe,"PUBLIC").setMultipleInstances(!0)),dt(Pte,"0.11.2",""),dt(Pte,"0.11.2","esm2017")}();class dw{constructor(e){return e}}class hw{constructor(e){return e}}const s2e=vr(DTe,!0),o2e=vr(STe,!1);let s2=(()=>{class t{constructor(){var n=this;this.firestore=$(sw),this.auth=$(vp),this.storage=$(dw),this.messaging=$(hw),this.router=$(Or),this.provider=new B9,this.LOADING_IMAGE_URL="https://www.google.com/images/spin-32.gif?a",this.user$=v6(this.auth),this.addMessage=function(){var r=m(function*(i,s){let o;try{n.user$.subscribe(function(){var a=m(function*(u){return i&&i.length>0?o=yield ete(qV(n.firestore,"messages"),{name:u?.displayName,text:i,profilePicUrl:u?.photoURL,timestamp:tte(),uid:u?.uid}):s&&s.length>0&&(o=yield ete(qV(n.firestore,"messages"),{name:u?.displayName,imageUrl:s,profilePicUrl:u?.photoURL,timestamp:tte(),uid:u?.uid})),o});return function(u){return a.apply(this,arguments)}}())}catch(a){return void console.error("Error writing new message to Firebase Database",a)}});return function(i,s){return r.apply(this,arguments)}}(),this.saveTextMessage=function(){var r=m(function*(i){return null});return function(i){return r.apply(this,arguments)}}(),this.loadMessages=()=>{const r=bLe(qV(this.firestore,"messages"),CLe("timestamp","desc"),ALe(12));return ELe(r)},this.saveImageMessage=function(){var r=m(function*(i){});return function(i){return r.apply(this,arguments)}}(),this.requestNotificationsPermissions=m(function*(){console.log("Requesting notifications permission..."),"granted"===(yield Notification.requestPermission())?(console.log("Notification permission granted."),yield n.saveMessagingDeviceToken()):console.log("Unable to get permission to notify.")}),this.saveMessagingDeviceToken=m(function*(){try{const r=yield s2e(n.messaging);if(r){console.log("Got FCM device token:",r);const i=TLe(n.firestore,"fcmTokens",r);yield DLe(i,{uid:n.auth.currentUser?.uid}),o2e(n.messaging,s=>{console.log("New foreground notification from Firebase Messaging!",s.notification)})}else n.requestNotificationsPermissions()}catch(r){console.error("Unable to get messaging token.",r)}})}login(){NDe(this.auth,this.provider).then(n=>{const r=B9.credentialFromResult(n);return this.router.navigate(["/","chat"]),r})}logout(){MDe(this.auth).then(()=>{this.router.navigate(["/","login"]),console.log("signed out")}).catch(n=>{console.log("sign out error: "+n)})}updateData(n,r){return m(function*(){})()}deleteData(n){return m(function*(){})()}getDocData(n){}getCollectionData(n){}uploadToStorage(n,r,i){return m(function*(){return null})()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fte=(()=>{class t{constructor(){this.chatService=$(s2),this.user$=this.chatService.user$}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Tc({type:t,selectors:[["app-login-page"]],decls:12,vars:0,consts:[[1,"min-h-screen","h-full","w-full","bg-slate-100","flex","min-w-screen"],[1,"w-[50%]","h-full","items-center","m-auto"],["src","../../../assets/WithFirebase.png",1,"w-[350px]","m-auto"],[1,"w-[50%]","items-center","h-full","mt-[15%]"],[1,"mx-auto","justify-center","mr-28","ml-16"],["src","../../../assets/FriendlyChatLogo.png",1,"w-[200px]","mx-10"],[1,"text-navy-600","text-5xl","font-light"],[1,"w-[400px]","bg-white","shadow-md","flex","flex-wrap","mt-12",3,"click"],["src","../../../assets/Google.png",1,"w-8","m-2"],[1,"text-slate-700","text-xl","m-auto"]],template:function(r,i){1&r&&(ze(0,"div",0)(1,"div",1),fr(2,"img",2),yt(),ze(3,"div",3)(4,"div",4),fr(5,"img",5),ze(6,"span",6),js(7,"Friendly Chat"),yt()(),ze(8,"button",7),pn("click",function(){return i.chatService.login()}),fr(9,"img",8),ze(10,"span",9),js(11,"Sign in with Google"),yt()()()())}})}return t})();function a2e(t,e){if(1&t&&(ze(0,"div"),js(1),yt()),2&t){const n=hl(2).$implicit;hr(1),Ja(" ",n.text," ")}}function u2e(t,e){if(1&t&&(ze(0,"div"),fr(1,"img",19),yt()),2&t){const n=hl(2).$implicit;hr(1),gi("src",n.imageUrl,Wc)}}function c2e(t,e){if(1&t&&(ze(0,"div")(1,"div",15),fr(2,"img",16),ze(3,"span",17),js(4),yt()(),ze(5,"div",18),dl(6,a2e,2,1,"div",14),dl(7,u2e,2,1,"div",14),yt()()),2&t){const n=hl().$implicit;hr(2),gi("src",n.profilePicUrl,Wc)("alt",n.name),hr(2),Ja("",n.name,": "),hr(2),gi("ngIf",n.text&&n.text.length>0),hr(1),gi("ngIf",n.imageUrl&&n.imageUrl.length>0)}}function l2e(t,e){if(1&t&&(ze(0,"div")(1,"div",13),dl(2,c2e,8,5,"div",14),ly(3,"async"),yt()()),2&t){const n=hl();hr(2),gi("ngIf",dy(3,1,n.user$))}}let d2e=(()=>{class t{constructor(){this.chatService=$(s2),this.messages$=this.chatService.loadMessages(),this.user$=this.chatService.user$,this.text=""}sendTextMessage(){this.chatService.saveTextMessage(this.text),this.text=""}uploadImage(n){const r=n.target.files[0];r&&this.chatService.saveImageMessage(r)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Tc({type:t,selectors:[["app-chat-page"]],decls:14,vars:4,consts:[[1,"min-h-screen","h-full","w-full","bg-navy-30"],[1,"w-3/4","bg-navy-10","min-h-screen","h-full","mx-auto","flex","flex-col","flex-grow","pb-56"],[4,"ngFor","ngForOf"],[1,"bg-navy-10","w-full","shadow-[0_35px_60px_-15px_rgba(0,0,0,1)]","min-h-32","h-auto","bottom-0","fixed"],[1,"flex-wrap","flex","w-5/6","mx-auto"],["type","file",1,"file-input","hidden",3,"change"],["fileUpload",""],[1,"file-upload","w-16","h-16","rounded-full","bg-amber-800","my-3"],["color","primary",1,"upload-btn",3,"click"],["src","../../../assets/add.svg","alt","Upload image",1,"w-16","h-16"],["placeholder","Write your thoughts here...",1,"w-4/5","mx-auto","h-16","rounded-3xl","my-auto","overflow-scroll","text-gray-900","dark:placeholder-gray-400","p-4",3,"ngModel","ngModelChange"],[1,"w-16","h-16","rounded-full","bg-amber-800","my-3",3,"click"],["src","../../../assets/send.svg","alt","Send message",1,"w-16","h-16"],[1,"flex","flex-col","flex-grow","p-4","overflow-scroll","space-x-3"],[4,"ngIf"],[1,"flex","flex-wrap","min-h-[50px]","mt-4"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"text-gray-500","mx-5","my-auto"],[1,"mt-4","ml-12","p-5","rounded-full","max-w-xl","bg-amber-200","shadow-lg","border-b-2"],["alt","image",1,"max-w-[150px]",3,"src"]],template:function(r,i){if(1&r){const s=R0();ze(0,"div",0)(1,"div",1),dl(2,l2e,4,3,"div",2),ly(3,"async"),yt(),ze(4,"div",3)(5,"div",4)(6,"input",5,6),pn("change",function(a){return i.uploadImage(a)}),yt(),ze(8,"div",7)(9,"button",8),pn("click",function(){return Xw(s),Jw(function A4(t){return Rc(function Qre(){return ne.lFrame.contextLView}(),ve+t)}(7).click())}),fr(10,"img",9),yt()(),ze(11,"textarea",10),pn("ngModelChange",function(a){return i.text=a}),yt(),ze(12,"button",11),pn("click",function(){return i.sendTextMessage()}),fr(13,"img",12),yt()()()()}if(2&r){let s;hr(2),gi("ngForOf",null==(s=dy(3,2,i.messages$))?null:s.reverse()),hr(9),gi("ngModel",i.text)}},dependencies:[j$,NC,Fy,q5,ub,FC]})}return t})();const Lte=()=>(t=>vw(_N,Pe(e=>e&&t||!0)))(["chat"]),f2e=[{path:"",component:Fte,canActivate:[sI],data:{authGuardPipe:Lte}},{path:"login",component:Fte,canActivate:[sI],data:{authGuardPipe:Lte}},{path:"chat",component:d2e,canActivate:[sI],data:{authGuardPipe:()=>(t=>vw(_N,Pe(e=>e||t)))(["login"])}}];let p2e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t});static#n=this.\u0275inj=ci({imports:[Dz.forRoot(f2e),Dz]})}return t})();function g2e(t,e){if(1&t){const n=R0();ze(0,"div",6)(1,"div",7),fr(2,"img",8),ze(3,"span",9),js(4),yt(),ze(5,"div",10)(6,"button",11),fr(7,"img",12),yt(),ze(8,"ul",13)(9,"li",14),fr(10,"img",8),ze(11,"span",15),js(12),yt()(),ze(13,"li",16)(14,"a",17),pn("click",function(){return Xw(n),Jw(hl().chatService.logout())}),js(15," Logout "),yt()()()()()()}if(2&t){const n=e.ngIf;hr(2),gi("src",null==n?null:n.photoURL,Wc)("alt",null==n?null:n.displayName),hr(2),Ja(" ",null==n?null:n.displayName," "),hr(6),gi("src",null==n?null:n.photoURL,Wc)("alt",null==n?null:n.displayName),hr(2),Ja(" ",null==n?null:n.displayName," ")}}let m2e=(()=>{class t{constructor(){this.chatService=$(s2),this.user$=this.chatService.user$}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Tc({type:t,selectors:[["app-header"]],decls:9,vars:3,consts:[[1,"bg-navy-400","px-2","lg:px-4","py-2.5","h-18"],[1,"flex","flex-wrap","justify-between","items-center","max-w-screen"],["href","/",1,"flex","items-center"],["src","../../../assets/FriendlyChatLogo.png","alt","FriendlyChat",1,"mr-3","h-16","sm:h-10","stop-image"],[1,"mr-3","self-center","text-2xl","whitespace-nowrap","font-light","text-white"],["class","flex flex-wrap items-end auth",4,"ngIf"],[1,"flex","flex-wrap","items-end","auth"],[1,"flex","flex-wrap","justify-between","text-white"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"text-white","text-xl","whitespace-nowrap","font-light","px-4","lg:px-5","py-2","lg:py-2.5"],[1,"dropdown","inline-block","relative","shadow-lg"],[1,"text-gray-700","py-2","px-4","rounded","inline-flex","items-center","font-semibold"],["src","../../../assets/menu.svg",1,"w-8","h-8","rounded-full"],[1,"dropdown-menu","absolute","hidden","text-gray-700","pt-3","w-48","right-2"],[1,"bg-white","p-4","flex-row"],[1,"text-navy-200","text-md","whitespace-nowrap","px-4","lg:px-5","py-2","lg:py-2.5","mr-6"],[1,""],["href","/",1,"bg-white","hover:bg-navy-20","py-3","px-4","block","whitespace-no-wrap","text-navy-500","font-semibold",3,"click"]],template:function(r,i){1&r&&(ze(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),fr(4,"img",3),ze(5,"span",4),js(6," Friendly Chat "),yt()(),dl(7,g2e,16,6,"div",5),ly(8,"async"),yt()()()),2&r&&(hr(7),gi("ngIf",dy(8,1,i.user$)))},dependencies:[NC,FC],styles:[".dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})}return t})(),_2e=(()=>{class t{constructor(){this.title="friendlychat"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Tc({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"site-layout"],[1,"container"]],template:function(r,i){1&r&&(ze(0,"div",0),fr(1,"app-header")(2,"div",1)(3,"router-outlet"),yt())},dependencies:[kb,m2e]})}return t})(),y2e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=bi({type:t,bootstrap:[_2e]});static#n=this.\u0275inj=ci({providers:[{provide:"FirestoreProvider",useFactory:()=>function ILe(t,...e){return{ngModule:vLe,providers:[{provide:$V,useFactory:mLe(t),multi:!0,deps:[qe,kr,Iwe,u9,[new fn,y6],[new fn,j6],...e]}]}}(()=>wLe())}],imports:[Qpe,p2e,H$,ame]})}return t})();Wpe().bootstrapModule(y2e).catch(t=>console.error(t))}},$e=>{$e($e.s=333)}]);